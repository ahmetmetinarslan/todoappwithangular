"use strict";(self.webpackChunktodoApp=self.webpackChunktodoApp||[]).push([[179],{2011:(It,Ne,L)=>{L.d(Ne,{Dh:()=>ve,GT:()=>ce,cc:()=>Pe,hO:()=>Je,on:()=>H,pX:()=>ie,xv:()=>Ee});var I=L(4650),ee=L(9260),O=L(7750);It=L.hmd(It);const ae=["ngOnDestroy"],ie=(ye,it,ot,Ae={})=>new Proxy(ye,{get:(ge,fe)=>ot.runOutsideAngular(()=>{var Ze;if(ye[fe])return!(null===(Ze=Ae?.spy)||void 0===Ze)&&Ze.get&&Ae.spy.get(fe,ye[fe]),ye[fe];if(ae.indexOf(fe)>-1)return()=>{};const Ve=it.toPromise().then(at=>{const Q=at&&at[fe];return"function"==typeof Q?Q.bind(at):Q&&Q.then?Q.then(pt=>ot.run(()=>pt)):ot.run(()=>Q)});return new Proxy(()=>{},{get:(at,Q)=>Ve[Q],apply:(at,Q,pt)=>Ve.then(ct=>{var Ut;const ut=ct&&ct(...pt);return!(null===(Ut=Ae?.spy)||void 0===Ut)&&Ut.apply&&Ae.spy.apply(fe,pt,ut),ut})})})}),ce=(ye,it)=>{it.forEach(ot=>{Object.getOwnPropertyNames(ot.prototype||ot).forEach(Ae=>{Object.defineProperty(ye.prototype,Ae,Object.getOwnPropertyDescriptor(ot.prototype||ot,Ae))})})};class he{constructor(it){return it}}const ve=new I.OlP("angularfire2.app.options"),Ee=new I.OlP("angularfire2.app.name");function H(ye,it,ot){const ge="object"==typeof ot&&ot||{};ge.name=ge.name||"string"==typeof ot&&ot||"[DEFAULT]";const Ze=ee.Z.apps.filter(Ve=>Ve&&Ve.name===ge.name)[0]||it.runOutsideAngular(()=>ee.Z.initializeApp(ye,ge));try{JSON.stringify(ye)!==JSON.stringify(Ze.options)&&j("error",`${Ze.name} Firebase App already initialized with different options${It.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(Ze)}const j=(ye,...it)=>{(0,I.X6Q)()&&typeof console<"u"&&console[ye](...it)},K={provide:he,useFactory:H,deps:[ve,I.R0b,[new I.FiY,Ee]]};let Je=(()=>{class ye{constructor(ot){ee.Z.registerVersion("angularfire",O.q4.full,"core"),ee.Z.registerVersion("angularfire",O.q4.full,"app-compat"),ee.Z.registerVersion("angular",I.q4F.full,ot.toString())}static initializeApp(ot,Ae){return{ngModule:ye,providers:[{provide:ve,useValue:ot},{provide:Ee,useValue:Ae}]}}}return ye.\u0275fac=function(ot){return new(ot||ye)(I.LFG(I.Lbi))},ye.\u0275mod=I.oAB({type:ye}),ye.\u0275inj=I.cJS({providers:[K]}),ye})();function Pe(ye,it,ot,Ae,ge){const[,fe,Ze]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===ye)||[];if(fe)return function Oe(ye,it){try{return ye.toString()===it.toString()}catch{return ye===it}}(ge,Ze)||(de("error",`${it} was already initialized on the ${ot} Firebase App with different settings.${Ke?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:ge,was:Ze})),fe;{const Ve=Ae();return globalThis.\u0275AngularfireInstanceCache.push([ye,Ve,ge]),Ve}}const Ke=!!It.hot,de=(ye,...it)=>{(0,I.X6Q)()&&typeof console<"u"&&console[ye](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7750:(It,Ne,L)=>{L.d(Ne,{q4:()=>ol,iC:()=>Zd,HU:()=>Da,vb:()=>ul,JM:()=>Ef});var I=L(4650),ee=L(259),O=L(5861),ae=L(6881),ie=L(2090),ce=L(4859),he=L(1877);let Ee,H;const Je=new WeakMap,Pe=new WeakMap,Oe=new WeakMap,Ke=new WeakMap,de=new WeakMap;let ot={get(v,T,A){if(v instanceof IDBTransaction){if("done"===T)return Pe.get(v);if("objectStoreNames"===T)return v.objectStoreNames||Oe.get(v);if("store"===T)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ze(v[T])},set:(v,T,A)=>(v[T]=A,!0),has:(v,T)=>v instanceof IDBTransaction&&("done"===T||"store"===T)||T in v};function fe(v){return"function"==typeof v?function ge(v){return v!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function K(){return H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(v)?function(...T){return v.apply(Ve(this),T),Ze(Je.get(this))}:function(...T){return Ze(v.apply(Ve(this),T))}:function(T,...A){const P=v.call(Ve(this),T,...A);return Oe.set(P,T.sort?T.sort():[T]),Ze(P)}}(v):(v instanceof IDBTransaction&&function it(v){if(Pe.has(v))return;const T=new Promise((A,P)=>{const U=()=>{v.removeEventListener("complete",z),v.removeEventListener("error",re),v.removeEventListener("abort",re)},z=()=>{A(),U()},re=()=>{P(v.error||new DOMException("AbortError","AbortError")),U()};v.addEventListener("complete",z),v.addEventListener("error",re),v.addEventListener("abort",re)});Pe.set(v,T)}(v),((v,T)=>T.some(A=>v instanceof A))(v,function j(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(v,ot):v)}function Ze(v){if(v instanceof IDBRequest)return function ye(v){const T=new Promise((A,P)=>{const U=()=>{v.removeEventListener("success",z),v.removeEventListener("error",re)},z=()=>{A(Ze(v.result)),U()},re=()=>{P(v.error),U()};v.addEventListener("success",z),v.addEventListener("error",re)});return T.then(A=>{A instanceof IDBCursor&&Je.set(A,v)}).catch(()=>{}),de.set(T,v),T}(v);if(Ke.has(v))return Ke.get(v);const T=fe(v);return T!==v&&(Ke.set(v,T),de.set(T,v)),T}const Ve=v=>de.get(v),pt=["get","getKey","getAll","getAllKeys","count"],ct=["put","add","delete","clear"],Ut=new Map;function ut(v,T){if(!(v instanceof IDBDatabase)||T in v||"string"!=typeof T)return;if(Ut.get(T))return Ut.get(T);const A=T.replace(/FromIndex$/,""),P=T!==A,U=ct.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!U&&!pt.includes(A))return;const z=function(){var re=(0,O.Z)(function*(Ue,...Me){const We=this.transaction(Ue,U?"readwrite":"readonly");let st=We.store;return P&&(st=st.index(Me.shift())),(yield Promise.all([st[A](...Me),U&&We.done]))[0]});return function(Me){return re.apply(this,arguments)}}();return Ut.set(T,z),z}!function Ae(v){ot=v(ot)}(v=>({...v,get:(T,A,P)=>ut(T,A)||v.get(T,A,P),has:(T,A)=>!!ut(T,A)||v.has(T,A)}));const Ts="@firebase/installations",we="w:0.6.4",_e="FIS_v2",ht=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ot(v){return v instanceof ie.ZR&&v.code.includes("request-failed")}function qt({projectId:v}){return`https://firebaseinstallations.googleapis.com/v1/projects/${v}/installations`}function Kt(v){return{token:v.token,requestStatus:2,expiresIn:Xo(v.expiresIn),creationTime:Date.now()}}function En(v,T){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,O.Z)(function*(v,T){const P=(yield T.json()).error;return ht.create("request-failed",{requestName:v,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function Lr({apiKey:v}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":v})}function Kn(v,{refreshToken:T}){const A=Lr(v);return A.append("Authorization",function yo(v){return`${_e} ${v}`}(T)),A}function fr(v){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,O.Z)(function*(v){const T=yield v();return T.status>=500&&T.status<600?v():T})).apply(this,arguments)}function Xo(v){return Number(v.replace("s","000"))}function ft(v,T){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,O.Z)(function*({appConfig:v,heartbeatServiceProvider:T},{fid:A}){const P=qt(v),U=Lr(v),z=T.getImmediate({optional:!0});if(z){const We=yield z.getHeartbeatsHeader();We&&U.append("x-firebase-client",We)}const Ue={method:"POST",headers:U,body:JSON.stringify({fid:A,authVersion:_e,appId:v.appId,sdkVersion:we})},Me=yield fr(()=>fetch(P,Ue));if(Me.ok){const We=yield Me.json();return{fid:We.fid||A,registrationStatus:2,refreshToken:We.refreshToken,authToken:Kt(We.authToken)}}throw yield En("Create Installation",Me)})).apply(this,arguments)}function Ei(v){return new Promise(T=>{setTimeout(T,v)})}const _o=/^[cdef][\w-]{21}$/;function Zn(){try{const v=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(v),v[0]=112+v[0]%16;const A=function vn(v){return function Vr(v){return btoa(String.fromCharCode(...v)).replace(/\+/g,"-").replace(/\//g,"_")}(v).substr(0,22)}(v);return _o.test(A)?A:""}catch{return""}}function Zt(v){return`${v.appName}!${v.appId}`}const et=new Map;function vt(v,T){const A=Zt(v);Yr(A,T),function Gn(v,T){const A=function pr(){return!Et&&"BroadcastChannel"in self&&(Et=new BroadcastChannel("[Firebase] FID Change"),Et.onmessage=v=>{Yr(v.data.key,v.data.fid)}),Et}();A&&A.postMessage({key:v,fid:T}),function on(){0===et.size&&Et&&(Et.close(),Et=null)}()}(A,T)}function Yr(v,T){const A=et.get(v);if(A)for(const P of A)P(T)}let Et=null;const Yn="firebase-installations-store";let gr=null;function Di(){return gr||(gr=function at(v,T,{blocked:A,upgrade:P,blocking:U,terminated:z}={}){const re=indexedDB.open(v,T),Ue=Ze(re);return P&&re.addEventListener("upgradeneeded",Me=>{P(Ze(re.result),Me.oldVersion,Me.newVersion,Ze(re.transaction))}),A&&re.addEventListener("blocked",()=>A()),Ue.then(Me=>{z&&Me.addEventListener("close",()=>z()),U&&Me.addEventListener("versionchange",()=>U())}).catch(()=>{}),Ue}("firebase-installations-database",1,{upgrade:(v,T)=>{0===T&&v.createObjectStore(Yn)}})),gr}function Sn(v,T){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*(v,T){const A=Zt(v),U=(yield Di()).transaction(Yn,"readwrite"),z=U.objectStore(Yn),re=yield z.get(A);return yield z.put(T,A),yield U.done,(!re||re.fid!==T.fid)&&vt(v,T.fid),T})).apply(this,arguments)}function ji(v){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,O.Z)(function*(v){const T=Zt(v),P=(yield Di()).transaction(Yn,"readwrite");yield P.objectStore(Yn).delete(T),yield P.done})).apply(this,arguments)}function Qr(v,T){return Br.apply(this,arguments)}function Br(){return(Br=(0,O.Z)(function*(v,T){const A=Zt(v),U=(yield Di()).transaction(Yn,"readwrite"),z=U.objectStore(Yn),re=yield z.get(A),Ue=T(re);return void 0===Ue?yield z.delete(A):yield z.put(Ue,A),yield U.done,Ue&&(!re||re.fid!==Ue.fid)&&vt(v,Ue.fid),Ue})).apply(this,arguments)}function B(v){return F.apply(this,arguments)}function F(){return(F=(0,O.Z)(function*(v){let T;const A=yield Qr(v.appConfig,P=>{const U=G(P),z=se(v,U);return T=z.registrationPromise,z.installationEntry});return""===A.fid?{installationEntry:yield T}:{installationEntry:A,registrationPromise:T}})).apply(this,arguments)}function G(v){return Fe(v||{fid:Zn(),registrationStatus:0})}function se(v,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ht.create("app-offline"))};const A={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},P=function Z(v,T){return ze.apply(this,arguments)}(v,A);return{installationEntry:A,registrationPromise:P}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:St(v)}:{installationEntry:T}}function ze(){return(ze=(0,O.Z)(function*(v,T){try{const A=yield ft(v,T);return Sn(v.appConfig,A)}catch(A){throw Ot(A)&&409===A.customData.serverCode?yield ji(v.appConfig):yield Sn(v.appConfig,{fid:T.fid,registrationStatus:0}),A}})).apply(this,arguments)}function St(v){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(v){let T=yield rn(v.appConfig);for(;1===T.registrationStatus;)yield Ei(100),T=yield rn(v.appConfig);if(0===T.registrationStatus){const{installationEntry:A,registrationPromise:P}=yield B(v);return P||A}return T})).apply(this,arguments)}function rn(v){return Qr(v,T=>{if(!T)throw ht.create("installation-not-found");return Fe(T)})}function Fe(v){return function lt(v){return 1===v.registrationStatus&&v.registrationTime+1e4<Date.now()}(v)?{fid:v.fid,registrationStatus:0}:v}function mt(v,T){return dn.apply(this,arguments)}function dn(){return(dn=(0,O.Z)(function*({appConfig:v,heartbeatServiceProvider:T},A){const P=yr(v,A),U=Kn(v,A),z=T.getImmediate({optional:!0});if(z){const We=yield z.getHeartbeatsHeader();We&&U.append("x-firebase-client",We)}const Ue={method:"POST",headers:U,body:JSON.stringify({installation:{sdkVersion:we,appId:v.appId}})},Me=yield fr(()=>fetch(P,Ue));if(Me.ok)return Kt(yield Me.json());throw yield En("Generate Auth Token",Me)})).apply(this,arguments)}function yr(v,{fid:T}){return`${qt(v)}/${T}/authTokens:generate`}function hn(v){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*(v,T=!1){let A;const P=yield Qr(v.appConfig,z=>{if(!kt(z))throw ht.create("not-registered");const re=z.authToken;if(!T&&Qt(re))return z;if(1===re.requestStatus)return A=ne(v,T),z;{if(!navigator.onLine)throw ht.create("app-offline");const Ue=Gt(z);return A=Re(v,Ue),Ue}});return A?yield A:P.authToken})).apply(this,arguments)}function ne(v,T){return J.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(v,T){let A=yield xe(v.appConfig);for(;1===A.authToken.requestStatus;)yield Ei(100),A=yield xe(v.appConfig);const P=A.authToken;return 0===P.requestStatus?hn(v,T):P})).apply(this,arguments)}function xe(v){return Qr(v,T=>{if(!kt(T))throw ht.create("not-registered");return function _r(v){return 1===v.requestStatus&&v.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Re(v,T){return wt.apply(this,arguments)}function wt(){return(wt=(0,O.Z)(function*(v,T){try{const A=yield mt(v,T),P=Object.assign(Object.assign({},T),{authToken:A});return yield Sn(v.appConfig,P),A}catch(A){if(!Ot(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const P=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Sn(v.appConfig,P)}else yield ji(v.appConfig);throw A}})).apply(this,arguments)}function kt(v){return void 0!==v&&2===v.registrationStatus}function Qt(v){return 2===v.requestStatus&&!function Dn(v){const T=Date.now();return T<v.creationTime||v.creationTime+v.expiresIn<T+36e5}(v)}function Gt(v){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},v),{authToken:T})}function Jr(){return(Jr=(0,O.Z)(function*(v){const T=v,{installationEntry:A,registrationPromise:P}=yield B(T);return P?P.catch(console.error):hn(T).catch(console.error),A.fid})).apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(v,T=!1){const A=v;return yield an(A),(yield hn(A,T)).token})).apply(this,arguments)}function an(v){return $i.apply(this,arguments)}function $i(){return($i=(0,O.Z)(function*(v){const{registrationPromise:T}=yield B(v);T&&(yield T)})).apply(this,arguments)}function Qn(v){return ht.create("missing-app-config-values",{valueName:v})}const Ur="installations",ou=v=>{const T=v.getProvider("app").getImmediate(),A=function md(v){if(!v||!v.options)throw Qn("App Configuration");if(!v.name)throw Qn("App Name");const T=["projectId","apiKey","appId"];for(const A of T)if(!v.options[A])throw Qn(A);return{appName:v.name,projectId:v.options.projectId,apiKey:v.options.apiKey,appId:v.options.appId}}(T);return{app:T,appConfig:A,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},as=v=>{const T=v.getProvider("app").getImmediate(),A=(0,ae._getProvider)(T,Ur).getImmediate();return{getId:()=>function ci(v){return Jr.apply(this,arguments)}(A),getToken:U=>function ea(v){return iu.apply(this,arguments)}(A,U)}};(function bi(){(0,ae._registerComponent)(new ce.wA(Ur,ou,"PUBLIC")),(0,ae._registerComponent)(new ce.wA("installations-internal",as,"PRIVATE"))})(),(0,ae.registerVersion)(Ts,"0.6.4"),(0,ae.registerVersion)(Ts,"0.6.4","esm2017");const Eo="@firebase/remote-config",mn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class li{constructor(T,A,P,U){this.client=T,this.storage=A,this.storageCache=P,this.logger=U}isCachedDataFresh(T,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-A,U=P<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${U}.`),U}fetch(T){var A=this;return(0,O.Z)(function*(){const[P,U]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(U&&A.isCachedDataFresh(T.cacheMaxAgeMillis,P))return U;T.eTag=U&&U.eTag;const z=yield A.client.fetch(T),re=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===z.status&&re.push(A.storage.setLastSuccessfulFetchResponse(z)),yield Promise.all(re),z})()}}function Cd(v=navigator){return v.languages&&v.languages[0]||v.language}class ta{constructor(T,A,P,U,z,re){this.firebaseInstallations=T,this.sdkVersion=A,this.namespace=P,this.projectId=U,this.apiKey=z,this.appId=re}fetch(T){var A=this;return(0,O.Z)(function*(){const[P,U]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),re=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Me={sdk_version:A.sdkVersion,app_instance_id:P,app_instance_id_token:U,app_id:A.appId,language_code:Cd()},We={method:"POST",headers:Ue,body:JSON.stringify(Me)},st=fetch(re,We),bt=new Promise((ii,gs)=>{T.signal.addEventListener(()=>{const Bo=new Error("The operation was aborted.");Bo.name="AbortError",gs(Bo)})});let ur;try{yield Promise.race([st,bt]),ur=yield st}catch(ii){let gs="fetch-client-network";throw"AbortError"===ii?.name&&(gs="fetch-timeout"),mn.create(gs,{originalErrorMessage:ii?.message})}let nr=ur.status;const Vo=ur.headers.get("ETag")||void 0;let zu,Ps;if(200===ur.status){let ii;try{ii=yield ur.json()}catch(gs){throw mn.create("fetch-client-parse",{originalErrorMessage:gs?.message})}zu=ii.entries,Ps=ii.state}if("INSTANCE_STATE_UNSPECIFIED"===Ps?nr=500:"NO_CHANGE"===Ps?nr=304:("NO_TEMPLATE"===Ps||"EMPTY_CONFIG"===Ps)&&(zu={}),304!==nr&&200!==nr)throw mn.create("fetch-status",{httpStatus:nr});return{status:nr,eTag:Vo,config:zu}})()}}class tf{constructor(T,A){this.client=T,this.storage=A}fetch(T){var A=this;return(0,O.Z)(function*(){const P=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(T,P)})()}attemptFetch(T,{throttleEndTimeMillis:A,backoffCount:P}){var U=this;return(0,O.Z)(function*(){yield function Mc(v,T){return new Promise((A,P)=>{const U=Math.max(T-Date.now(),0),z=setTimeout(A,U);v.addEventListener(()=>{clearTimeout(z),P(mn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,A);try{const z=yield U.client.fetch(T);return yield U.storage.deleteThrottleMetadata(),z}catch(z){if(!function cu(v){if(!(v instanceof ie.ZR&&v.customData))return!1;const T=Number(v.customData.httpStatus);return 429===T||500===T||503===T||504===T}(z))throw z;const re={throttleEndTimeMillis:Date.now()+(0,ie.$s)(P),backoffCount:P+1};return yield U.storage.setThrottleMetadata(re),U.attemptFetch(T,re)}})()}}class nf{constructor(T,A,P,U,z){this.app=T,this._client=A,this._storageCache=P,this._storage=U,this._logger=z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function or(v,T){const A=v.target.error||void 0;return mn.create(T,{originalErrorMessage:A&&A?.message})}const Ar="app_namespace_store";class u0{constructor(T,A,P,U=function hu(){return new Promise((v,T)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=P=>{T(or(P,"storage-open"))},A.onsuccess=P=>{v(P.target.result)},A.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(Ar,{keyPath:"compositeKey"})}}catch(A){T(mn.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=T,this.appName=A,this.namespace=P,this.openDbPromise=U}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var A=this;return(0,O.Z)(function*(){const P=yield A.openDbPromise;return new Promise((U,z)=>{const Ue=P.transaction([Ar],"readonly").objectStore(Ar),Me=A.createCompositeKey(T);try{const We=Ue.get(Me);We.onerror=st=>{z(or(st,"storage-get"))},We.onsuccess=st=>{const bt=st.target.result;U(bt?bt.value:void 0)}}catch(We){z(mn.create("storage-get",{originalErrorMessage:We?.message}))}})})()}set(T,A){var P=this;return(0,O.Z)(function*(){const U=yield P.openDbPromise;return new Promise((z,re)=>{const Me=U.transaction([Ar],"readwrite").objectStore(Ar),We=P.createCompositeKey(T);try{const st=Me.put({compositeKey:We,value:A});st.onerror=bt=>{re(or(bt,"storage-set"))},st.onsuccess=()=>{z()}}catch(st){re(mn.create("storage-set",{originalErrorMessage:st?.message}))}})})()}delete(T){var A=this;return(0,O.Z)(function*(){const P=yield A.openDbPromise;return new Promise((U,z)=>{const Ue=P.transaction([Ar],"readwrite").objectStore(Ar),Me=A.createCompositeKey(T);try{const We=Ue.delete(Me);We.onerror=st=>{z(or(st,"storage-delete"))},We.onsuccess=()=>{U()}}catch(We){z(mn.create("storage-delete",{originalErrorMessage:We?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class kn{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const A=T.storage.getLastFetchStatus(),P=T.storage.getLastSuccessfulFetchTimestampMillis(),U=T.storage.getActiveConfig(),z=yield A;z&&(T.lastFetchStatus=z);const re=yield P;re&&(T.lastSuccessfulFetchTimestampMillis=re);const Ue=yield U;Ue&&(T.activeConfig=Ue)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function jr(){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}let Do,On;!function Cs(){(0,ae._registerComponent)(new ce.wA("remote-config",function v(T,{instanceIdentifier:A}){const P=T.getProvider("app").getImmediate(),U=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw mn.create("registration-window");if(!(0,ie.hl)())throw mn.create("indexed-db-unavailable");const{projectId:z,apiKey:re,appId:Ue}=P.options;if(!z)throw mn.create("registration-project-id");if(!re)throw mn.create("registration-api-key");if(!Ue)throw mn.create("registration-app-id");const Me=new u0(Ue,P.name,A=A||"firebase"),We=new kn(Me),st=new he.Yd(Eo);st.logLevel=he.in.ERROR;const bt=new ta(U,ae.SDK_VERSION,A,z,re,Ue),ur=new tf(bt,Me),nr=new li(ur,Me,We,st),Vo=new nf(P,nr,We,Me,st);return function Wp(v){const T=(0,ie.m9)(v);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Vo),Vo},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Eo,"0.4.4"),(0,ae.registerVersion)(Eo,"0.4.4","esm2017")}();const kc=new WeakMap,Xr=new WeakMap,Ss=new WeakMap,vr=new WeakMap,Tt=new WeakMap;let na={get(v,T,A){if(v instanceof IDBTransaction){if("done"===T)return Xr.get(v);if("objectStoreNames"===T)return v.objectStoreNames||Ss.get(v);if("store"===T)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Si(v[T])},set:(v,T,A)=>(v[T]=A,!0),has:(v,T)=>v instanceof IDBTransaction&&("done"===T||"store"===T)||T in v};function Nd(v){return"function"==typeof v?function Md(v){return v!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function js(){return On||(On=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(v)?function(...T){return v.apply(pu(this),T),Si(kc.get(this))}:function(...T){return Si(v.apply(pu(this),T))}:function(T,...A){const P=v.call(pu(this),T,...A);return Ss.set(P,T.sort?T.sort():[T]),Si(P)}}(v):(v instanceof IDBTransaction&&function Ad(v){if(Xr.has(v))return;const T=new Promise((A,P)=>{const U=()=>{v.removeEventListener("complete",z),v.removeEventListener("error",re),v.removeEventListener("abort",re)},z=()=>{A(),U()},re=()=>{P(v.error||new DOMException("AbortError","AbortError")),U()};v.addEventListener("complete",z),v.addEventListener("error",re),v.addEventListener("abort",re)});Xr.set(v,T)}(v),((v,T)=>T.some(A=>v instanceof A))(v,function Kp(){return Do||(Do=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(v,na):v)}function Si(v){if(v instanceof IDBRequest)return function Sd(v){const T=new Promise((A,P)=>{const U=()=>{v.removeEventListener("success",z),v.removeEventListener("error",re)},z=()=>{A(Si(v.result)),U()},re=()=>{P(v.error),U()};v.addEventListener("success",z),v.addEventListener("error",re)});return T.then(A=>{A instanceof IDBCursor&&kc.set(A,v)}).catch(()=>{}),Tt.set(T,v),T}(v);if(vr.has(v))return vr.get(v);const T=Nd(v);return T!==v&&(vr.set(v,T),Tt.set(T,v)),T}const pu=v=>Tt.get(v);function Te(v,T,{blocked:A,upgrade:P,blocking:U,terminated:z}={}){const re=indexedDB.open(v,T),Ue=Si(re);return P&&re.addEventListener("upgradeneeded",Me=>{P(Si(re.result),Me.oldVersion,Me.newVersion,Si(re.transaction))}),A&&re.addEventListener("blocked",()=>A()),Ue.then(Me=>{z&&Me.addEventListener("close",()=>z()),U&&Me.addEventListener("versionchange",()=>U())}).catch(()=>{}),Ue}function jt(v,{blocked:T}={}){const A=indexedDB.deleteDatabase(v);return T&&A.addEventListener("blocked",()=>T()),Si(A).then(()=>{})}const gu=["get","getKey","getAll","getAllKeys","count"],Oc=["put","add","delete","clear"],An=new Map;function mu(v,T){if(!(v instanceof IDBDatabase)||T in v||"string"!=typeof T)return;if(An.get(T))return An.get(T);const A=T.replace(/FromIndex$/,""),P=T!==A,U=Oc.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!U&&!gu.includes(A))return;const z=function(){var re=(0,O.Z)(function*(Ue,...Me){const We=this.transaction(Ue,U?"readwrite":"readonly");let st=We.store;return P&&(st=st.index(Me.shift())),(yield Promise.all([st[A](...Me),U&&We.done]))[0]});return function(Me){return re.apply(this,arguments)}}();return An.set(T,z),z}!function xd(v){na=v(na)}(v=>({...v,get:(T,A,P)=>mu(T,A)||v.get(T,A,P),has:(T,A)=>!!mu(T,A)||v.has(T,A)}));const $s="/firebase-messaging-sw.js",ei="/firebase-cloud-messaging-push-scope",To="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fc="google.c.a.c_id",xn="google.c.a.c_l",rf="google.c.a.ts",sf="google.c.a.e";var ti=(()=>{return(v=ti||(ti={})).PUSH_RECEIVED="push-received",v.NOTIFICATION_CLICKED="notification-clicked",ti;var v})();function Ai(v){const T=new Uint8Array(v);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cs(v){const A=(v+"=".repeat((4-v.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(A),U=new Uint8Array(P.length);for(let z=0;z<P.length;++z)U[z]=P.charCodeAt(z);return U}const ni="fcm_token_details_db",Hs="fcm_token_object_Store";function Zp(v){return bo.apply(this,arguments)}function bo(){return bo=(0,O.Z)(function*(v){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(z=>z.name).includes(ni))return null;let T=null;return(yield Te(ni,5,{upgrade:(P=(0,O.Z)(function*(U,z,re,Ue){var Me;if(z<2||!U.objectStoreNames.contains(Hs))return;const We=Ue.objectStore(Hs),st=yield We.index("fcmSenderId").get(v);if(yield We.clear(),st)if(2===z){const bt=st;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;T={token:bt.fcmToken,createTime:null!==(Me=bt.createTime)&&void 0!==Me?Me:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:Ai(bt.vapidKey)}}}else if(3===z){const bt=st;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:Ai(bt.auth),p256dh:Ai(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:Ai(bt.vapidKey)}}}else if(4===z){const bt=st;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:Ai(bt.auth),p256dh:Ai(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:Ai(bt.vapidKey)}}}}),function(z,re,Ue,Me){return P.apply(this,arguments)})})).close(),yield jt(ni),yield jt("fcm_vapid_details_db"),yield jt("undefined"),Vc(T)?T:null;var P}),bo.apply(this,arguments)}function Vc(v){if(!v||!v.subscriptionOptions)return!1;const{subscriptionOptions:T}=v;return"number"==typeof v.createTime&&v.createTime>0&&"string"==typeof v.token&&v.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Mr="firebase-messaging-store";let Bc=null;function ia(){return Bc||(Bc=Te("firebase-messaging-database",1,{upgrade:(v,T)=>{0===T&&v.createObjectStore(Mr)}})),Bc}function sa(v){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(v){const T=_u(v),P=yield(yield ia()).transaction(Mr).objectStore(Mr).get(T);if(P)return P;{const U=yield Zp(v.appConfig.senderId);if(U)return yield Uc(v,U),U}})).apply(this,arguments)}function Uc(v,T){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(v,T){const A=_u(v),U=(yield ia()).transaction(Mr,"readwrite");return yield U.objectStore(Mr).put(T,A),yield U.done,T})).apply(this,arguments)}function Rd(v){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(v){const T=_u(v),P=(yield ia()).transaction(Mr,"readwrite");yield P.objectStore(Mr).delete(T),yield P.done})).apply(this,arguments)}function _u({appConfig:v}){return v.appId}const tn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ls(v,T){return wn.apply(this,arguments)}function wn(){return(wn=(0,O.Z)(function*(v,T){const A=yield $c(v),P=aa(T),U={method:"POST",headers:A,body:JSON.stringify(P)};let z;try{z=yield(yield fetch(vu(v.appConfig),U)).json()}catch(re){throw tn.create("token-subscribe-failed",{errorInfo:re?.toString()})}if(z.error)throw tn.create("token-subscribe-failed",{errorInfo:z.error.message});if(!z.token)throw tn.create("token-subscribe-no-token");return z.token})).apply(this,arguments)}function kd(v,T){return Od.apply(this,arguments)}function Od(){return(Od=(0,O.Z)(function*(v,T){const A=yield $c(v),P=aa(T.subscriptionOptions),U={method:"PATCH",headers:A,body:JSON.stringify(P)};let z;try{z=yield(yield fetch(`${vu(v.appConfig)}/${T.token}`,U)).json()}catch(re){throw tn.create("token-update-failed",{errorInfo:re?.toString()})}if(z.error)throw tn.create("token-update-failed",{errorInfo:z.error.message});if(!z.token)throw tn.create("token-update-no-token");return z.token})).apply(this,arguments)}function jc(v,T){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,O.Z)(function*(v,T){const P={method:"DELETE",headers:yield $c(v)};try{const z=yield(yield fetch(`${vu(v.appConfig)}/${T}`,P)).json();if(z.error)throw tn.create("token-unsubscribe-failed",{errorInfo:z.error.message})}catch(U){throw tn.create("token-unsubscribe-failed",{errorInfo:U?.toString()})}})).apply(this,arguments)}function vu({projectId:v}){return`https://fcmregistrations.googleapis.com/v1/projects/${v}/registrations`}function $c(v){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*({appConfig:v,installations:T}){const A=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":v.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function aa({p256dh:v,auth:T,endpoint:A,vapidKey:P}){const U={web:{endpoint:A,auth:T,p256dh:v}};return P!==To&&(U.web.applicationPubKey=P),U}const So=6048e5;function Fd(v){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(v){const T=yield Hc(v.swRegistration,v.vapidKey),A={vapidKey:v.vapidKey,swScope:v.swRegistration.scope,endpoint:T.endpoint,auth:Ai(T.getKey("auth")),p256dh:Ai(T.getKey("p256dh"))},P=yield sa(v.firebaseDependencies);if(P){if(uf(P.subscriptionOptions,A))return Date.now()>=P.createTime+So?ca(v,{token:P.token,createTime:Date.now(),subscriptionOptions:A}):P.token;try{yield jc(v.firebaseDependencies,P.token)}catch(U){console.warn(U)}return af(v.firebaseDependencies,A)}return af(v.firebaseDependencies,A)})).apply(this,arguments)}function of(v){return ds.apply(this,arguments)}function ds(){return(ds=(0,O.Z)(function*(v){const T=yield sa(v.firebaseDependencies);T&&(yield jc(v.firebaseDependencies,T.token),yield Rd(v.firebaseDependencies));const A=yield v.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()})).apply(this,arguments)}function ca(v,T){return wu.apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(v,T){try{const A=yield kd(v.firebaseDependencies,T),P=Object.assign(Object.assign({},T),{token:A,createTime:Date.now()});return yield Uc(v.firebaseDependencies,P),A}catch(A){throw yield of(v),A}})).apply(this,arguments)}function af(v,T){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*(v,T){const P={token:yield ls(v,T),createTime:Date.now(),subscriptionOptions:T};return yield Uc(v,P),P.token})).apply(this,arguments)}function Hc(v,T){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,O.Z)(function*(v,T){return(yield v.pushManager.getSubscription())||v.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cs(T)})})).apply(this,arguments)}function uf(v,T){return T.vapidKey===v.vapidKey&&T.endpoint===v.endpoint&&T.auth===v.auth&&T.p256dh===v.p256dh}function Gc(v){const T={from:v.from,collapseKey:v.collapse_key,messageId:v.fcmMessageId};return function Iu(v,T){if(!T.notification)return;v.notification={};const A=T.notification.title;A&&(v.notification.title=A);const P=T.notification.body;P&&(v.notification.body=P);const U=T.notification.image;U&&(v.notification.image=U);const z=T.notification.icon;z&&(v.notification.icon=z)}(T,v),function Eu(v,T){!T.data||(v.data=T.data)}(T,v),function Du(v,T){var A,P,U,z,re;if(!(T.fcmOptions||null!==(A=T.notification)&&void 0!==A&&A.click_action))return;v.fcmOptions={};const Ue=null!==(U=null===(P=T.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==U?U:null===(z=T.notification)||void 0===z?void 0:z.click_action;Ue&&(v.fcmOptions.link=Ue);const Me=null===(re=T.fcmOptions)||void 0===re?void 0:re.analytics_label;Me&&(v.fcmOptions.analyticsLabel=Me)}(T,v),T}function cf(v){return"object"==typeof v&&!!v&&Fc in v}function Ao(v,T){const A=[];for(let P=0;P<v.length;P++)A.push(v.charAt(P)),P<T.length&&A.push(T.charAt(P));return A.join("")}function zc(v){return tn.create("missing-app-config-values",{valueName:v})}Ao("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ao("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class la{constructor(T,A,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const U=function Bd(v){if(!v||!v.options)throw zc("App Configuration Object");if(!v.name)throw zc("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:A}=v;for(const P of T)if(!A[P])throw zc(P);return{appName:v.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:U,installations:A,analyticsProvider:P}}_delete(){return Promise.resolve()}}function lf(v){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,O.Z)(function*(v){try{v.swRegistration=yield navigator.serviceWorker.register($s,{scope:ei}),v.swRegistration.update().catch(()=>{})}catch(T){throw tn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function da(v,T){return hs.apply(this,arguments)}function hs(){return(hs=(0,O.Z)(function*(v,T){if(!T&&!v.swRegistration&&(yield lf(v)),T||!v.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw tn.create("invalid-sw-registration");v.swRegistration=T}})).apply(this,arguments)}function Ws(v,T){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,O.Z)(function*(v,T){T?v.vapidKey=T:v.vapidKey||(v.vapidKey=To)})).apply(this,arguments)}function ha(){return(ha=(0,O.Z)(function*(v,T){if(!navigator)throw tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw tn.create("permission-blocked");return yield Ws(v,T?.vapidKey),yield da(v,T?.serviceWorkerRegistration),Fd(v)})).apply(this,arguments)}function hi(v,T,A){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,O.Z)(function*(v,T,A){const P=xo(T);(yield v.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:A[Fc],message_name:A[xn],message_time:A[rf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xo(v){switch(v){case ti.NOTIFICATION_CLICKED:return"notification_open";case ti.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function qs(){return(qs=(0,O.Z)(function*(v,T){const A=T.data;if(!A.isFirebaseMessaging)return;v.onMessageHandler&&A.messageType===ti.PUSH_RECEIVED&&("function"==typeof v.onMessageHandler?v.onMessageHandler(Gc(A)):v.onMessageHandler.next(Gc(A)));const P=A.data;cf(P)&&"1"===P[sf]&&(yield hi(v,A.messageType,P))})).apply(this,arguments)}const Ks="@firebase/messaging",Zs=v=>{const T=new la(v.getProvider("app").getImmediate(),v.getProvider("installations-internal").getImmediate(),v.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function qc(v,T){return qs.apply(this,arguments)}(T,A)),T},bu=v=>{const T=v.getProvider("messaging").getImmediate();return{getToken:P=>function Tu(v,T){return ha.apply(this,arguments)}(T,P)}};function pa(){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function df(){(0,ae._registerComponent)(new ce.wA("messaging",Zs,"PUBLIC")),(0,ae._registerComponent)(new ce.wA("messaging-internal",bu,"PRIVATE")),(0,ae.registerVersion)(Ks,"0.12.4"),(0,ae.registerVersion)(Ks,"0.12.4","esm2017")}();const Tn="analytics",Kc="firebase_id",Su="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fs="https://www.googletagmanager.com/gtag/js",Mn=new he.Yd("@firebase/analytics"),wr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function No(v){if(!v.startsWith(fs)){const T=wr.create("invalid-gtag-resource",{gtagURL:v});return Mn.warn(T.message),""}return v}function ps(v){return Promise.all(v.map(T=>T.catch(A=>A)))}function ya(v,T){const A=function Au(v,T){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(v,T)),A}("firebase-js-sdk-policy",{createScriptURL:No}),P=document.createElement("script"),U=`${fs}?l=${v}&id=${T}`;P.src=A?A?.createScriptURL(U):U,P.async=!0,document.head.appendChild(P)}function Zc(v,T,A,P,U,z){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,O.Z)(function*(v,T,A,P,U,z){const re=P[U];try{if(re)yield T[re];else{const Me=(yield ps(A)).find(We=>We.measurementId===U);Me&&(yield T[Me.appId])}}catch(Ue){Mn.error(Ue)}v("config",U,z)})).apply(this,arguments)}function pf(v,T,A,P,U){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,O.Z)(function*(v,T,A,P,U){try{let z=[];if(U&&U.send_to){let re=U.send_to;Array.isArray(re)||(re=[re]);const Ue=yield ps(A);for(const Me of re){const We=Ue.find(bt=>bt.measurementId===Me),st=We&&T[We.appId];if(!st){z=[];break}z.push(st)}}0===z.length&&(z=Object.values(T)),yield Promise.all(z),v("event",P,U||{})}catch(z){Mn.error(z)}})).apply(this,arguments)}function eg(v){const T=window.document.getElementsByTagName("script");for(const A of Object.values(T))if(A.src&&A.src.includes(fs)&&A.src.includes(v))return A;return null}const zn=new class xu{constructor(T={},A=1e3){this.throttleMetadata=T,this.intervalMillis=A}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,A){this.throttleMetadata[T]=A}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Mu(v){return new Headers({Accept:"application/json","x-goog-api-key":v})}function fi(v){return jd.apply(this,arguments)}function jd(){return(jd=(0,O.Z)(function*(v){var T;const{appId:A,apiKey:P}=v,U={method:"GET",headers:Mu(P)},z=Su.replace("{app-id}",A),re=yield fetch(z,U);if(200!==re.status&&304!==re.status){let Ue="";try{const Me=yield re.json();null!==(T=Me.error)&&void 0!==T&&T.message&&(Ue=Me.error.message)}catch{}throw wr.create("config-fetch-failed",{httpStatus:re.status,responseMessage:Ue})}return re.json()})).apply(this,arguments)}function mf(v){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,O.Z)(function*(v,T=zn,A){const{appId:P,apiKey:U,measurementId:z}=v.options;if(!P)throw wr.create("no-app-id");if(!U){if(z)return{measurementId:z,appId:P};throw wr.create("no-api-key")}const re=T.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new $d;return setTimeout((0,O.Z)(function*(){Ue.abort()}),void 0!==A?A:6e4),Mi({appId:P,apiKey:U,measurementId:z},re,Ue,T)})).apply(this,arguments)}function Mi(v,T,A){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,O.Z)(function*(v,{throttleEndTimeMillis:T,backoffCount:A},P,U=zn){var z;const{appId:re,measurementId:Ue}=v;try{yield Jc(P,T)}catch(Me){if(Ue)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${Me?.message}]`),{appId:re,measurementId:Ue};throw Me}try{const Me=yield fi(v);return U.deleteThrottleMetadata(re),Me}catch(Me){const We=Me;if(!Po(We)){if(U.deleteThrottleMetadata(re),Ue)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${We?.message}]`),{appId:re,measurementId:Ue};throw Me}const st=503===Number(null===(z=We?.customData)||void 0===z?void 0:z.httpStatus)?(0,ie.$s)(A,U.intervalMillis,30):(0,ie.$s)(A,U.intervalMillis),bt={throttleEndTimeMillis:Date.now()+st,backoffCount:A+1};return U.setThrottleMetadata(re,bt),Mn.debug(`Calling attemptFetch again in ${st} millis`),Mi(v,bt,P,U)}})).apply(this,arguments)}function Jc(v,T){return new Promise((A,P)=>{const U=Math.max(T-Date.now(),0),z=setTimeout(A,U);v.addEventListener(()=>{clearTimeout(z),P(wr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Po(v){if(!(v instanceof ie.ZR&&v.customData))return!1;const T=Number(v.customData.httpStatus);return 429===T||500===T||503===T||504===T}class $d{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Hd,Gd;function yf(){return(yf=(0,O.Z)(function*(v,T,A,P,U){if(U&&U.global)v("event",A,P);else{const z=yield T;v("event",A,Object.assign(Object.assign({},P),{send_to:z}))}})).apply(this,arguments)}function Ou(v){Gd=v}function Lu(v){Hd=v}function Nr(){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(){if(!(0,ie.hl)())return Mn.warn(wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(v){return Mn.warn(wr.create("indexeddb-unavailable",{errorInfo:v?.toString()}).message),!1}return!0})).apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(v,T,A,P,U,z,re){var Ue;const Me=mf(v);Me.then(nr=>{A[nr.measurementId]=nr.appId,v.options.measurementId&&nr.measurementId!==v.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${v.options.measurementId}) does not match the measurement ID fetched from the server (${nr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(nr=>Mn.error(nr)),T.push(Me);const We=Nr().then(nr=>{if(nr)return P.getId()}),[st,bt]=yield Promise.all([Me,We]);eg(z)||ya(z,st.measurementId),Gd&&(U("consent","default",Gd),Ou(void 0)),U("js",new Date);const ur=null!==(Ue=re?.config)&&void 0!==Ue?Ue:{};return ur.origin="firebase",ur.update=!0,null!=bt&&(ur[Kc]=bt),U("config",st.measurementId,ur),Hd&&(U("set",Hd),Lu(void 0)),st.measurementId})).apply(this,arguments)}class Ni{constructor(T){this.app=T}_delete(){return delete Bn[this.app.options.appId],Promise.resolve()}}let Bn={},Xn=[];const zd={};let Pr,ar,Vu="dataLayer",Pi=!1;function el(v,T,A){!function $r(){const v=[];if((0,ie.ru)()&&v.push("This is a browser extension environment."),(0,ie.zI)()||v.push("Cookies are not available."),v.length>0){const T=v.map((P,U)=>`(${U+1}) ${P}`).join(" "),A=wr.create("invalid-analytics-context",{errorInfo:T});Mn.warn(A.message)}}();const P=v.options.appId;if(!P)throw wr.create("no-app-id");if(!v.options.apiKey){if(!v.options.measurementId)throw wr.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${v.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Bn[P])throw wr.create("already-exists",{id:P});if(!Pi){!function un(v){let T=[];Array.isArray(window[v])?T=window[v]:window[v]=T}(Vu);const{wrappedGtag:z,gtagCore:re}=function Xp(v,T,A,P,U){let z=function(...re){window[P].push(arguments)};return window[U]&&"function"==typeof window[U]&&(z=window[U]),window[U]=function gf(v,T,A,P){function z(){return(z=(0,O.Z)(function*(re,...Ue){try{if("event"===re){const[Me,We]=Ue;yield pf(v,T,A,Me,We)}else if("config"===re){const[Me,We]=Ue;yield Zc(v,T,A,P,Me,We)}else if("consent"===re){const[Me]=Ue;v("consent","update",Me)}else if("get"===re){const[Me,We,st]=Ue;v("get",Me,We,st)}else if("set"===re){const[Me]=Ue;v("set",Me)}else v(re,...Ue)}catch(Me){Mn.error(Me)}})).apply(this,arguments)}return function U(re){return z.apply(this,arguments)}}(z,v,T,A),{gtagCore:z,wrappedGtag:window[U]}}(Bn,Xn,zd,Vu,"gtag");ar=z,Pr=re,Pi=!0}return Bn[P]=function Fu(v,T,A,P,U,z,re){return Jn.apply(this,arguments)}(v,Xn,zd,T,Pr,Vu,A),new Ni(v)}function tl(){return nl.apply(this,arguments)}function nl(){return(nl=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const Hr="@firebase/analytics";!function rl(){(0,ae._registerComponent)(new ce.wA(Tn,(T,{options:A})=>el(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,ae._registerComponent)(new ce.wA("analytics-internal",function v(T){try{const A=T.getProvider(Tn).getImmediate();return{logEvent:(P,U,z)=>function Ht(v,T,A,P){v=(0,ie.m9)(v),function tg(v,T,A,P,U){return yf.apply(this,arguments)}(ar,Bn[v.app.options.appId],T,A,P).catch(U=>Mn.error(U))}(A,P,U,z)}}catch(A){throw wr.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,ae.registerVersion)(Hr,"0.10.0"),(0,ae.registerVersion)(Hr,"0.10.0","esm2017")}();var Dt=L(4408),Ia=L(7565);const ju=new class Wd extends Ia.v{}(class Ms extends Dt.o{constructor(T,A){super(T,A),this.scheduler=T,this.work=A}schedule(T,A=0){return A>0?super.schedule(T,A):(this.delay=A,this.state=T,this.scheduler.flush(this),this)}execute(T,A){return A>0||this.closed?super.execute(T,A):this._execute(T,A)}requestAsyncId(T,A,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(T,A,P):(T.flush(this),0)}});var qd=L(4986),wf=L(576),er=L(4482),eo=L(5403),Cn=L(4671),il=L(9468),sl=L(5363);const ol=new I.GfV("7.6.1"),Oo="__angularfire_symbol__analyticsIsSupportedValue",tr="__angularfire_symbol__analyticsIsSupported",al="__angularfire_symbol__remoteConfigIsSupportedValue",Ns="__angularfire_symbol__remoteConfigIsSupported",Ki="__angularfire_symbol__messagingIsSupportedValue",ki="__angularfire_symbol__messagingIsSupported";function Ef(v,T,A){if(T){if(1===T.length)return T[0];const z=T.filter(re=>re.app===A);if(1===z.length)return z[0]}return A.container.getProvider(v).getImmediate({optional:!0})}globalThis[tr]||(globalThis[tr]=tl().then(v=>globalThis[Oo]=v).catch(()=>globalThis[Oo]=!1)),globalThis[ki]||(globalThis[ki]=pa().then(v=>globalThis[Ki]=v).catch(()=>globalThis[Ki]=!1)),globalThis[Ns]||(globalThis[Ns]=jr().then(v=>globalThis[al]=v).catch(()=>globalThis[al]=!1));const ul=(v,T)=>{const A=T?[T]:(0,ee.C6)(),P=[];return A.forEach(U=>{U.container.getProvider(v).instances.forEach(re=>{P.includes(re)||P.push(re)})}),P};function Lo(){}class Ea{constructor(T,A=ju){this.zone=T,this.delegate=A}now(){return this.delegate.now()}schedule(T,A,P){const U=this.zone;return this.delegate.schedule(function(re){U.runGuarded(()=>{T.apply(this,[re])})},A,P)}}class cl{constructor(T){this.zone=T,this.task=null}call(T,A){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lo,{},Lo,Lo)),A.pipe(function qi(v,T,A){const P=(0,wf.m)(v)||T||A?{next:v,error:T,complete:A}:v;return P?(0,er.e)((U,z)=>{var re;null===(re=P.subscribe)||void 0===re||re.call(P);let Ue=!0;U.subscribe((0,eo.x)(z,Me=>{var We;null===(We=P.next)||void 0===We||We.call(P,Me),z.next(Me)},()=>{var Me;Ue=!1,null===(Me=P.complete)||void 0===Me||Me.call(P),z.complete()},Me=>{var We;Ue=!1,null===(We=P.error)||void 0===We||We.call(P,Me),z.error(Me)},()=>{var Me,We;Ue&&(null===(Me=P.unsubscribe)||void 0===Me||Me.call(P)),null===(We=P.finalize)||void 0===We||We.call(P)}))}):Cn.y}({next:P,complete:P,error:P})).subscribe(T).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Da=(()=>{class v{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Ea(Zone.current)),this.insideAngular=A.run(()=>new Ea(Zone.current,qd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return v.\u0275fac=function(A){return new(A||v)(I.LFG(I.R0b))},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function Zi(){const v=globalThis.\u0275AngularFireScheduler;if(!v)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return v}function Zd(v){return Zi(),function to(v){return function(A){return(A=A.lift(new cl(v.ngZone))).pipe((0,il.R)(v.outsideAngular),(0,sl.Q)(v.insideAngular))}}(Zi())(v)}},2090:(It,Ne,L)=>{L.d(Ne,{$s:()=>ji,BH:()=>fe,G6:()=>we,L:()=>Ee,LL:()=>gt,Pz:()=>ge,Sg:()=>Ze,UG:()=>Q,US:()=>ce,ZB:()=>K,ZR:()=>dt,aH:()=>Ae,b$:()=>Ut,eu:()=>De,hl:()=>_e,jU:()=>pt,m9:()=>Br,ne:()=>Zt,pd:()=>Zn,r3:()=>Ii,ru:()=>ct,tV:()=>H,uI:()=>at,vZ:()=>Fr,w1:()=>Ts,xO:()=>_o,xb:()=>yo,z$:()=>Ve,zI:()=>He,zd:()=>ui});const ae=function(B){const F=[];let G=0;for(let se=0;se<B.length;se++){let Z=B.charCodeAt(se);Z<128?F[G++]=Z:Z<2048?(F[G++]=Z>>6|192,F[G++]=63&Z|128):55296==(64512&Z)&&se+1<B.length&&56320==(64512&B.charCodeAt(se+1))?(Z=65536+((1023&Z)<<10)+(1023&B.charCodeAt(++se)),F[G++]=Z>>18|240,F[G++]=Z>>12&63|128,F[G++]=Z>>6&63|128,F[G++]=63&Z|128):(F[G++]=Z>>12|224,F[G++]=Z>>6&63|128,F[G++]=63&Z|128)}return F},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,F){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,se=[];for(let Z=0;Z<B.length;Z+=3){const ze=B[Z],St=Z+1<B.length,Rt=St?B[Z+1]:0,rn=Z+2<B.length,Fe=rn?B[Z+2]:0;let dn=(15&Rt)<<2|Fe>>6,yr=63&Fe;rn||(yr=64,St||(dn=64)),se.push(G[ze>>2],G[(3&ze)<<4|Rt>>4],G[dn],G[yr])}return se.join("")},encodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(B):this.encodeByteArray(ae(B),F)},decodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(B):function(B){const F=[];let G=0,se=0;for(;G<B.length;){const Z=B[G++];if(Z<128)F[se++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const ze=B[G++];F[se++]=String.fromCharCode((31&Z)<<6|63&ze)}else if(Z>239&&Z<365){const rn=((7&Z)<<18|(63&B[G++])<<12|(63&B[G++])<<6|63&B[G++])-65536;F[se++]=String.fromCharCode(55296+(rn>>10)),F[se++]=String.fromCharCode(56320+(1023&rn))}else{const ze=B[G++],St=B[G++];F[se++]=String.fromCharCode((15&Z)<<12|(63&ze)<<6|63&St)}}return F.join("")}(this.decodeStringToByteArray(B,F))},decodeStringToByteArray(B,F){this.init_();const G=F?this.charToByteMapWebSafe_:this.charToByteMap_,se=[];for(let Z=0;Z<B.length;){const ze=G[B.charAt(Z++)],Rt=Z<B.length?G[B.charAt(Z)]:0;++Z;const Fe=Z<B.length?G[B.charAt(Z)]:64;++Z;const mt=Z<B.length?G[B.charAt(Z)]:64;if(++Z,null==ze||null==Rt||null==Fe||null==mt)throw new he;se.push(ze<<2|Rt>>4),64!==Fe&&(se.push(Rt<<4&240|Fe>>2),64!==mt&&se.push(Fe<<6&192|mt))}return se},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ee=function(B){return function(B){const F=ae(B);return ce.encodeByteArray(F,!0)}(B).replace(/\./g,"")},H=function(B){try{return ce.decodeString(B,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function K(B,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return F}for(const G in F)!F.hasOwnProperty(G)||!Je(G)||(B[G]=K(B[G],F[G]));return B}function Je(B){return"__proto__"!==B}const ye=()=>{try{return function Pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=B&&H(B[1]);return F&&JSON.parse(F)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},Ae=()=>{var B;return null===(B=ye())||void 0===B?void 0:B.config},ge=B=>{var F;return null===(F=ye())||void 0===F?void 0:F[`_${B}`]};class fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,G)=>{this.resolve=F,this.reject=G})}wrapCallback(F){return(G,se)=>{G?this.reject(G):this.resolve(se),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(G):F(G,se))}}}function Ze(B,F){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const se=F||"demo-project",Z=B.iat||0,ze=B.sub||B.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const St=Object.assign({iss:`https://securetoken.google.com/${se}`,aud:se,iat:Z,exp:Z+3600,auth_time:Z,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},B);return[Ee(JSON.stringify({alg:"none",type:"JWT"})),Ee(JSON.stringify(St)),""].join(".")}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function at(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Q(){var B;const F=null===(B=ye())||void 0===B?void 0:B.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function pt(){return"object"==typeof self&&self.self===self}function ct(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Ut(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ts(){const B=Ve();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function we(){return!Q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){try{return"object"==typeof indexedDB}catch{return!1}}function De(){return new Promise((B,F)=>{try{let G=!0;const se="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(se);Z.onsuccess=()=>{Z.result.close(),G||self.indexedDB.deleteDatabase(se),B(!0)},Z.onupgradeneeded=()=>{G=!1},Z.onerror=()=>{var ze;F((null===(ze=Z.error)||void 0===ze?void 0:ze.message)||"")}}catch(G){F(G)}})}function He(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class dt extends Error{constructor(F,G,se){super(G),this.code=F,this.customData=se,this.name="FirebaseError",Object.setPrototypeOf(this,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gt.prototype.create)}}class gt{constructor(F,G,se){this.service=F,this.serviceName=G,this.errors=se}create(F,...G){const se=G[0]||{},Z=`${this.service}/${F}`,ze=this.errors[F],St=ze?function ht(B,F){return B.replace(Ot,(G,se)=>{const Z=F[se];return null!=Z?String(Z):`<${se}?>`})}(ze,se):"Error";return new dt(Z,`${this.serviceName}: ${St} (${Z}).`,se)}}const Ot=/\{\$([^}]+)}/g;function Ii(B,F){return Object.prototype.hasOwnProperty.call(B,F)}function yo(B){for(const F in B)if(Object.prototype.hasOwnProperty.call(B,F))return!1;return!0}function Fr(B,F){if(B===F)return!0;const G=Object.keys(B),se=Object.keys(F);for(const Z of G){if(!se.includes(Z))return!1;const ze=B[Z],St=F[Z];if(Ei(ze)&&Ei(St)){if(!Fr(ze,St))return!1}else if(ze!==St)return!1}for(const Z of se)if(!G.includes(Z))return!1;return!0}function Ei(B){return null!==B&&"object"==typeof B}function _o(B){const F=[];for(const[G,se]of Object.entries(B))Array.isArray(se)?se.forEach(Z=>{F.push(encodeURIComponent(G)+"="+encodeURIComponent(Z))}):F.push(encodeURIComponent(G)+"="+encodeURIComponent(se));return F.length?"&"+F.join("&"):""}function ui(B){const F={};return B.replace(/^\?/,"").split("&").forEach(se=>{if(se){const[Z,ze]=se.split("=");F[decodeURIComponent(Z)]=decodeURIComponent(ze)}}),F}function Zn(B){const F=B.indexOf("?");if(!F)return"";const G=B.indexOf("#",F);return B.substring(F,G>0?G:void 0)}function Zt(B,F){const G=new et(B,F);return G.subscribe.bind(G)}class et{constructor(F,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{F(this)}).catch(se=>{this.error(se)})}next(F){this.forEachObserver(G=>{G.next(F)})}error(F){this.forEachObserver(G=>{G.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,G,se){let Z;if(void 0===F&&void 0===G&&void 0===se)throw new Error("Missing Observer.");Z=function ln(B,F){if("object"!=typeof B||null===B)return!1;for(const G of F)if(G in B&&"function"==typeof B[G])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:G,complete:se},void 0===Z.next&&(Z.next=Ui),void 0===Z.error&&(Z.error=Ui),void 0===Z.complete&&(Z.complete=Ui);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),ze}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,F)}sendOne(F,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{G(this.observers[F])}catch(se){typeof console<"u"&&console.error&&console.error(se)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ui(){}function ji(B,F=1e3,G=2){const se=F*Math.pow(G,B),Z=Math.round(.5*se*(Math.random()-.5)*2);return Math.min(144e5,se+Z)}function Br(B){return B&&B._delegate?B._delegate:B}},4220:(It,Ne,L)=>{var I=L(4650);let ee=null;function O(){return ee}const he=new I.OlP("DocumentToken");let an=(()=>{class n{constructor(t,r,a,c){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=a,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,I.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,I.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(a=>{r?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.ZZ4),I.Y36(I.aQg),I.Y36(I.SBq),I.Y36(I.Qsj))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class bc{constructor(e,t,r,a){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fn=(()=>{class n{constructor(t,r,a){this._viewContainer=t,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((a,c,h)=>{if(null==a.previousIndex)r.createEmbeddedView(this._template,new bc(a.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===c?void 0:c);else if(null!==c){const y=r.get(c);r.move(y,h),bs(y,a)}});for(let a=0,c=r.length;a<c;a++){const y=r.get(a).context;y.index=a,y.count=c,y.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{bs(r.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function bs(n,e){n.context.$implicit=e.item}let Nc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({}),n})();function du(n){return"server"===n}class Gc extends class uf extends class ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){ee||(ee=n)}(new Gc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Eu(){return Iu=Iu||document.querySelector("base"),Iu?Iu.getAttribute("href"):null}();return null==t?null:function cf(n){Du=Du||document.createElement("a"),Du.setAttribute("href",n);const e=Du.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function iu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let Du,Iu=null;const Ao=new I.OlP("TRANSITION_ID"),zc=[{provide:I.ip1,useFactory:function Bd(n,e,t){return()=>{t.get(I.CZH).donePromise.then(()=>{const r=O(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)r.remove(a[c])})}},deps:[Ao,he,I.zs3],multi:!0}];let lf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const Hi=new I.OlP("EventManagerPlugins");let da=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let c=0;c<a.length;c++){const h=a[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(Hi),I.LFG(I.R0b))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class hs{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=O().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let Ws=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})(),Gi=(()=>{class n extends Ws{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,a.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Tu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Tu))}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(he))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();function Tu(n){O().remove(n)}const ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},hi=/%COMP%/g;function Zs(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?Zs(n,a,t):(a=a.replace(hi,n),t.push(a))}return t}function bu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pa=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Mo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case I.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new Ys(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case I.ifc.ShadowDom:return new hf(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=Zs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(da),I.LFG(Gi),I.LFG(I.AFp))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class Mo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ha[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ga(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ga(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const c=ha[a];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=ha[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(I.JOm.DashCase|I.JOm.Important)?e.style.setProperty(t,r,a&I.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&I.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bu(r)):this.eventManager.addEventListener(e,t,bu(r))}}function ga(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ys extends Mo{constructor(e,t,r,a){super(e),this.component=r;const c=Zs(a+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr=function Ks(n){return"_ngcontent-%COMP%".replace(hi,n)}(a+"-"+r.id),this.hostAttr=function fa(n){return"_nghost-%COMP%".replace(hi,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class hf extends Mo{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Zs(a.id,a.styles,[]);for(let h=0;h<c.length;h++){const y=document.createElement("style");y.textContent=c[h],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Cu=(()=>{class n extends hs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(he))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const Wi=["alt","control","meta","shift"],Jp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Kc=(()=>{class n extends hs{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(r.pop());let h="",y=r.indexOf("code");if(y>-1&&(r.splice(y,1),h="code."),Wi.forEach(C=>{const x=r.indexOf(C);x>-1&&(r.splice(x,1),h+=C+".")}),h+=c,0!=r.length||0===c.length)return null;const E={};return E.domEventName=a,E.fullKey=h,E}static matchEventFullKeyCode(t,r){let a=Jp[t.key]||t.key,c="";return r.indexOf("code.")>-1&&(a=t.code,c="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Wi.forEach(h=>{h!==a&&(0,Tn[h])(t)&&(c+=h+".")}),c+=a,c===r)}static eventCallback(t,r,a){return c=>{n.matchEventFullKeyCode(c,t)&&a.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(he))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const Au=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:"browser"},{provide:I.g9A,useValue:function Qs(){Gc.makeCurrent()},multi:!0},{provide:he,useFactory:function No(){return(0,I.RDi)(document),document},deps:[]}]),ya=new I.OlP(""),un=[{provide:I.rWj,useClass:class la{addToWindow(e){I.dqk.getAngularTestability=(r,a=!0)=>{const c=e.findTestabilityInTree(r,a);if(null==c)throw new Error("Could not find testability for element.");return c},I.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(r=>{const a=I.dqk.getAllAngularTestabilities();let c=a.length,h=!1;const y=function(E){h=h||E,c--,0==c&&r(h)};a.forEach(function(E){E.whenStable(y)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],Zc=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function wr(){return new I.qLn},deps:[]},{provide:Hi,useClass:Cu,multi:!0,deps:[he,I.R0b,I.Lbi]},{provide:Hi,useClass:Kc,multi:!0,deps:[he]},{provide:pa,useClass:pa,deps:[da,Gi,I.AFp]},{provide:I.FYo,useExisting:pa},{provide:Ws,useExisting:Gi},{provide:Gi,useClass:Gi,deps:[he]},{provide:da,useClass:da,deps:[Hi,I.R0b]},{provide:class fu{},useClass:lf,deps:[]},[]];let Yc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:I.AFp,useValue:t.appId},{provide:Ao,useExisting:I.AFp},zc]}}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(ya,12))},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[...Zc,...un],imports:[Nc,I.hGG]}),n})();typeof window<"u"&&window;var Nr=L(2011),Ro=L(4986),Fu=L(8306),Jn=L(8996),Ni=L(7669);function Bn(...n){const e=(0,Ni.yG)(n);return(0,Jn.D)(n,e)}var Xn=L(7750),zd=L(6131);function ko(...n){return function Vu(){return(0,zd.J)(1)}()((0,Jn.D)(n,(0,Ni.yG)(n)))}var Pr=L(4482);function ar(...n){const e=(0,Ni.yG)(n);return(0,Pr.e)((t,r)=>{(e?ko(n,t,e):ko(n,t)).subscribe(r)})}var Pi=L(5403);function bn(){return(0,Pr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pi.x)(e,a=>{const c=t;t=a,r&&e.next([c,a]),r=!0}))})}var $r=L(4004);function el(n,e,t,r,a){return(c,h)=>{let y=t,E=e,C=0;c.subscribe((0,Pi.x)(h,x=>{const k=C++;E=y?n(E,x,k):(y=!0,x),r&&h.next(E)},a&&(()=>{y&&h.next(E),h.complete()})))}}function Bu(n,e){return(0,Pr.e)(el(n,e,arguments.length>=2,!0))}var As=L(4671);function nl(n,e){return n===e}function Js(n,e){return(0,Pr.e)((t,r)=>{let a=0;t.subscribe((0,Pi.x)(r,c=>n.call(e,c,a++)&&r.next(c)))})}L(2644);var Ye,Xs=L(3942),le=L(5861),Ri=L(6881),wa=L(4859),xs=L(1877),Ht=L(2090),Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hr={},rl=rl||{},Dt=Uu||self;function Ms(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ia(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ju="closure_uid_"+(1e9*Math.random()>>>0),rg=0;function qd(n,e,t){return n.call.apply(n.bind,arguments)}function wf(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function er(n,e,t){return(er=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qd:wf).apply(null,arguments)}function eo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Cn(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,a,c){for(var h=Array(arguments.length-2),y=2;y<arguments.length;y++)h[y-2]=arguments[y];return e.prototype[a].apply(r,h)}}function qi(){this.s=this.s,this.o=this.o}qi.prototype.s=!1,qi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Wd(n){Object.prototype.hasOwnProperty.call(n,ju)&&n[ju]||(n[ju]=++rg)}(this)},qi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sl=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ol(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Oo(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ms(r)){const a=n.length||0,c=r.length||0;n.length=a+c;for(let h=0;h<c;h++)n[a+h]=r[h]}else n.push(r)}}function tr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}tr.prototype.h=function(){this.defaultPrevented=!0};var al=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",()=>{},e),Dt.removeEventListener("test",()=>{},e)}catch{}return n}();function Ns(n){return/^[\s\xa0]*$/.test(n)}function Ki(){var n=Dt.navigator;return n&&(n=n.userAgent)?n:""}function ki(n){return-1!=Ki().indexOf(n)}function $u(n){return $u[" "](n),n}$u[" "]=function(){};var Da,n,If=ki("Opera"),Hu=ki("Trident")||ki("MSIE"),Ef=ki("Edge"),ul=Ef||Hu,Lo=ki("Gecko")&&!(-1!=Ki().toLowerCase().indexOf("webkit")&&!ki("Edge"))&&!(ki("Trident")||ki("MSIE"))&&!ki("Edge"),Ea=-1!=Ki().toLowerCase().indexOf("webkit")&&!ki("Edge");function cl(){var n=Dt.document;return n?n.documentMode:void 0}e:{var Zi="",Gu=(n=Ki(),Lo?/rv:([^\);]+)(\)|;)/.exec(n):Ef?/Edge\/([\d\.]+)/.exec(n):Hu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ea?/WebKit\/(\S+)/.exec(n):If?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gu&&(Zi=Gu?Gu[1]:""),Hu){var Yi=cl();if(null!=Yi&&Yi>parseFloat(Zi)){Da=String(Yi);break e}}Da=Zi}var Zd=Dt.document&&Hu&&(cl()||parseInt(Da,10))||void 0;function to(n,e){if(tr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Lo){e:{try{$u(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Yd[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&to.$.h.call(this)}}Cn(to,tr);var Yd={2:"touch",3:"pen",4:"mouse"};to.prototype.h=function(){to.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fo="closure_listenable_"+(1e6*Math.random()|0),v=0;function T(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=a,this.key=++v,this.fa=this.ia=!1}function A(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function P(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function z(n){const e={};for(const t in n)e[t]=n[t];return e}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ue(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let c=0;c<re.length;c++)t=re[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Me(n){this.src=n,this.g={},this.h=0}function We(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],a=sl(r,e);(c=0<=a)&&Array.prototype.splice.call(r,a,1),c&&(A(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function st(n,e,t,r){for(var a=0;a<n.length;++a){var c=n[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==r)return a}return-1}Me.prototype.add=function(n,e,t,r,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=st(n,e,r,a);return-1<h?(e=n[h],t||(e.ia=!1)):((e=new T(e,this.src,c,!!r,a)).ia=t,n.push(e)),e};var bt="closure_lm_"+(1e6*Math.random()|0),ur={};function nr(n,e,t,r,a){if(r&&r.once)return Ps(n,e,t,r,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)nr(n,e[c],t,r,a);return null}return t=Ku(t),n&&n[Fo]?n.O(e,t,Ia(r)?!!r.capture:!!r,a):Vo(n,e,t,!1,r,a)}function Vo(n,e,t,r,a,c){if(!e)throw Error("Invalid event type");var h=Ia(a)?!!a.capture:!!a,y=Wu(n);if(y||(n[bt]=y=new Me(n)),(t=y.add(e,t,r,h,c)).proxy)return t;if(r=function zu(){const e=ig;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)al||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(Bo(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ps(n,e,t,r,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Ps(n,e[c],t,r,a);return null}return t=Ku(t),n&&n[Fo]?n.P(e,t,Ia(r)?!!r.capture:!!r,a):Vo(n,e,t,!0,r,a)}function ii(n,e,t,r,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)ii(n,e[c],t,r,a);else r=Ia(r)?!!r.capture:!!r,t=Ku(t),n&&n[Fo]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=st(c=n.g[e],t,r,a))&&(A(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Wu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=st(e,t,r,a)),(t=-1<n?e[n]:null)&&gs(t))}function gs(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Fo])We(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Bo(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Wu(e))?(We(t,n),0==t.h&&(t.src=null,e[bt]=null)):A(n)}}}function Bo(n){return n in ur?ur[n]:ur[n]="on"+n}function ig(n,e){if(n.fa)n=!0;else{e=new to(e,this);var t=n.listener,r=n.la||n.src;n.ia&&gs(n),n=t.call(r,e)}return n}function Wu(n){return(n=n[bt])instanceof Me?n:null}var qu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ku(n){return"function"==typeof n?n:(n[qu]||(n[qu]=function(e){return n.handleEvent(e)}),n[qu])}function Ir(){qi.call(this),this.i=new Me(this),this.S=this,this.J=null}function Er(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new tr(e,n);else if(e instanceof tr)e.target=e.target||n;else{var a=e;Ue(e=new tr(r,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=Qd(h,r,!0,e)&&a}if(a=Qd(h=e.g=n,r,!0,e)&&a,a=Qd(h,r,!1,e)&&a,t)for(c=0;c<t.length;c++)a=Qd(h=e.g=t[c],r,!1,e)&&a}function Qd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.fa&&h.capture==t){var y=h.listener,E=h.la||h.src;h.ia&&We(n.i,h),a=!1!==y.call(E,r)&&a}}return a&&!r.defaultPrevented}Cn(Ir,qi),Ir.prototype[Fo]=!0,Ir.prototype.removeEventListener=function(n,e,t,r){ii(this,n,e,t,r)},Ir.prototype.N=function(){if(Ir.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)A(t[r]);delete n.g[e],n.h--}}this.J=null},Ir.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ir.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ta=Dt.JSON.stringify;function sg(){var n=ll;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bf=new class oy{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Uo,n=>n.reset());class Uo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function c0(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Zu(n){Dt.setTimeout(()=>{throw n},0)}let no,Yu=!1,ll=new class Tf{constructor(){this.h=this.g=null}add(e,t){const r=bf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Jd=()=>{const n=Dt.Promise.resolve(void 0);no=()=>{n.then(ay)}};var ay=()=>{for(var n;n=sg();){try{n.h.call(n.g)}catch(t){Zu(t)}var e=bf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yu=!1};function Qu(n,e){Ir.call(this),this.h=n||1,this.g=e||Dt,this.j=er(this.qb,this),this.l=Date.now()}function Cf(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Sf(n,e,t){if("function"==typeof n)t&&(n=er(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=er(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function Xd(n){n.g=Sf(()=>{n.g=null,n.i&&(n.i=!1,Xd(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Cn(Qu,Ir),(Ye=Qu.prototype).ga=!1,Ye.T=null,Ye.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Er(this,"tick"),this.ga&&(Cf(this),this.start()))}},Ye.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.N=function(){Qu.$.N.call(this),Cf(this),delete this.g};class uy extends qi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xd(this)}N(){super.N(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ju(n){qi.call(this),this.h=n,this.g={}}Cn(Ju,qi);var eh=[];function Af(n,e,t,r){Array.isArray(t)||(t&&(eh[0]=t.toString()),t=eh);for(var a=0;a<t.length;a++){var c=nr(e,t[a],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function th(n){P(n.g,function(e,t){this.g.hasOwnProperty(t)&&gs(e)},n),n.g={}}function dl(){this.g=!0}function ba(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function nh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return Ta(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ju.prototype.N=function(){Ju.$.N.call(this),th(this)},Ju.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dl.prototype.Ea=function(){this.g=!1},dl.prototype.info=function(){};var jo={},ag=null;function Xu(){return ag=ag||new Ir}function hl(n){tr.call(this,jo.Ta,n)}function fl(n){const e=Xu();Er(e,new hl(e))}function Mf(n,e){tr.call(this,jo.STAT_EVENT,n),this.stat=e}function Rr(n){const e=Xu();Er(e,new Mf(e,n))}function Nf(n,e){tr.call(this,jo.Ua,n),this.size=e}function Ca(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}jo.Ta="serverreachability",Cn(hl,tr),jo.STAT_EVENT="statevent",Cn(Mf,tr),jo.Ua="timingevent",Cn(Nf,tr);var pl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gl={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Rs(){}function ml(){}Rs.prototype.h=null;var Rf,Sa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yl(){tr.call(this,"d")}function Aa(){tr.call(this,"c")}function ec(){}function xa(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ju(this),this.P=kf,this.V=new Qu(n=ul?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rh}function rh(){this.i=null,this.g="",this.h=!1}Cn(yl,tr),Cn(Aa,tr),Cn(ec,Rs),ec.prototype.g=function(){return new XMLHttpRequest},ec.prototype.i=function(){return{}},Rf=new ec;var kf=45e3,_l={},io={};function vl(n,e,t){n.L=1,n.v=wl(ms(e)),n.s=t,n.S=!0,rr(n,null)}function rr(n,e){n.G=Date.now(),Ma(n),n.A=ms(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),M(t.i,"t",r),n.C=0,t=n.l.J,n.h=new rh,n.g=Iy(n.l,t?e:null,!n.s),0<n.O&&(n.M=new uy(er(n.Pa,n,n.g),n.O)),Af(n.U,n.g,"readystatechange",n.nb),e=n.I?z(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),fl(),function xf(n,e,t,r,a,c){n.info(function(){if(n.g)if(c)for(var h="",y=c.split("&"),E=0;E<y.length;E++){var C=y[E].split("=");if(1<C.length){var x=C[0];C=C[1];var k=x.split("_");h=2<=k.length&&"type"==k[1]?h+(x+"=")+C+"&":h+(x+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.W,n.s)}function tc(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Of(n,e,t){let a,r=!0;for(;!n.J&&n.C<t.length;){if(a=l0(n,t),a==io){4==e&&(n.o=4,Rr(14),r=!1),ba(n.j,n.m,null,"[Incomplete Response]");break}if(a==_l){n.o=4,Rr(15),ba(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ba(n.j,n.m,a,null),Qi(n,a)}tc(n)&&a!=io&&a!=_l&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Rr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),vy(e),e.M=!0,Rr(11))):(ba(n.j,n.m,t,"[Invalid Chunked Response]"),ks(n),Na(n))}function l0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?io:(t=Number(e.substring(t,r)),isNaN(t)?_l:(r+=1)+t>e.length?io:(e=e.slice(r,r+t),n.C=r+t,e))}function Ma(n){n.Y=Date.now()+n.P,nc(n,n.P)}function nc(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ca(er(n.lb,n),e)}function ih(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function Na(n){0==n.l.H||n.J||Sl(n.l,n)}function ks(n){ih(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Cf(n.V),th(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Qi(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||si(t.i,n)))if(!n.K&&si(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Cl(t),yy(t)}dh(t),Rr(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Ca(er(t.ib,t),6e3));if(1>=In(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Pa(t,11)}else if((n.K||t.g==n)&&Cl(t),!Ns(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let C=a[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const x=C[3];null!=x&&(t.ra=x,t.l.info("VER="+t.ra));const k=C[4];null!=k&&(t.Ga=k,t.l.info("SVER="+t.Ga));const W=C[5];null!=W&&"number"==typeof W&&0<W&&(t.L=r=1.5*W,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const te=n.g;if(te){const Ie=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ie){var c=r.i;c.g||-1==Ie.indexOf("spdy")&&-1==Ie.indexOf("quic")&&-1==Ie.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(El(c,c.h),c.h=null))}if(r.F){const Be=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(r.Da=Be,Jt(r.I,r.F,Be))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var h=n;if((r=t).wa=v0(r,r.J?r.pa:null,r.Y),h.K){hg(r.i,h);var y=h,E=r.L;E&&y.setTimeout(E),y.B&&(ih(y),Ma(y)),r.g=h}else mg(r);0<t.j.length&&lh(t)}else"stop"!=C[0]&&"close"!=C[0]||Pa(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Pa(t,7):jf(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}fl()}catch{}}function Ff(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ms(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ug(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ms(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Lf(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ms(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),a=r.length,c=0;c<a;c++)e.call(void 0,r[c],t&&t[c],n)}(Ye=xa.prototype).setTimeout=function(n){this.P=n},Ye.nb=function(n){n=n.target;const e=this.M;e&&3==so(n)?e.l():this.Pa(n)},Ye.Pa=function(n){try{if(n==this.g)e:{const x=so(this.g);var e=this.g.Ia();if(this.g.da(),!(3>x)&&(3!=x||ul||this.g&&(this.h.h||this.g.ja()||fy(this.g)))){this.J||4!=x||7==e||fl(),ih(this);var t=this.g.da();this.ca=t;t:if(tc(this)){var r=fy(this.g);n="";var a=r.length,c=4==so(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ks(this),Na(this);var h="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ja();if(this.i=200==t,function og(n,e,t,r,a,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.W,x,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var y,E=this.g;if((y=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ns(y)){var C=y;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Rr(12),ks(this),Na(this);break e}ba(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qi(this,t)}this.S?(Of(this,x,h),ul&&this.i&&3==x&&(Af(this.U,this.V,"tick",this.mb),this.V.start())):(ba(this.j,this.m,h,null),Qi(this,h)),4==x&&ks(this),this.i&&!this.J&&(4==x?Sl(this.l,this):(this.i=!1,Ma(this)))}else(function p0(n){const e={};n=(n.g&&2<=so(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Ns(n[r]))continue;var t=c0(n[r]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[a]||[];e[a]=c,c.push(t)}!function U(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Rr(12)):(this.o=0,Rr(13)),ks(this),Na(this)}}}catch{}},Ye.mb=function(){if(this.g){var n=so(this.g),e=this.g.ja();this.C<e.length&&(ih(this),Of(this,n,e),this.i&&4!=n&&Ma(this))}},Ye.cancel=function(){this.J=!0,ks(this)},Ye.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ro(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(fl(),Rr(17)),ks(this),this.o=2,Na(this)):nc(this,this.Y-n)};var Vf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ir(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ir){this.h=n.h,rc(this,n.j),this.s=n.s,this.g=n.g,sh(this,n.m),this.l=n.l;var e=n.i,t=new d;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),kr(this,t),this.o=n.o}else n&&(e=String(n).match(Vf))?(this.h=!1,rc(this,e[1]||"",!0),this.s=Il(e[2]||""),this.g=Il(e[3]||"",!0),sh(this,e[4]),this.l=Il(e[5]||"",!0),kr(this,e[6]||"",!0),this.o=Il(e[7]||"")):(this.h=!1,this.i=new d(null,this.h))}function ms(n){return new ir(n)}function rc(n,e,t){n.j=t?Il(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function sh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function kr(n,e,t){e instanceof d?(n.i=e,function q(n,e){e&&!n.j&&(f(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(_(this,r),M(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=oh(e,ly)),n.i=new d(e,n.h))}function Jt(n,e,t){n.i.set(e,t)}function wl(n){return Jt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Il(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function oh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,lg),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function lg(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ir.prototype.toString=function(){var n=[],e=this.j;e&&n.push(oh(e,cy,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(oh(e,cy,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(oh(t,"/"==t.charAt(0)?dg:d0,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",oh(t,g)),n.join("")};var cy=/[#\/\?@]/g,d0=/[#\?:]/g,dg=/[#\?]/g,ly=/[#\?@]/g,g=/#/g;function d(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function f(n){n.g||(n.g=new Map,n.h=0,n.i&&function cg(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var c=n[t].substring(0,r);a=n[t].substring(r+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function _(n,e){f(n),e=V(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function b(n,e){return f(n),e=V(n,e),n.g.has(e)}function M(n,e,t){_(n,e),0<t.length&&(n.i=null,n.g.set(V(n,e),ol(t)),n.h+=t.length)}function V(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function je(n){this.l=n||Xe,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ka&&Dt.g.Ka()&&Dt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=d.prototype).add=function(n,e){f(this),this.i=null,n=V(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){f(this),this.g.forEach(function(t,r){t.forEach(function(a){n.call(e,a,r,this)},this)},this)},Ye.ta=function(){f(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const a=n[r];for(let c=0;c<a.length;c++)t.push(e[r])}return t},Ye.Z=function(n){f(this);let e=[];if("string"==typeof n)b(this,n)&&(e=e.concat(this.g.get(V(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ye.set=function(n,e){return f(this),this.i=null,b(this,n=V(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const c=encodeURIComponent(String(r)),h=this.Z(r);for(r=0;r<h.length;r++){var a=c;""!==h[r]&&(a+="="+encodeURIComponent(String(h[r]))),n.push(a)}}return this.i=n.join("&")};var Xe=10;function tt(n){return!!n.h||!!n.g&&n.g.size>=n.j}function In(n){return n.h?1:n.g?n.g.size:0}function si(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function El(n,e){n.g?n.g.add(e):n.h=e}function hg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Dl(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return ol(n.i)}function pg(){this.g=new class{stringify(n){return Dt.JSON.stringify(n,void 0)}parse(n){return Dt.JSON.parse(n,void 0)}}}function Bf(n,e,t){const r=t||"";try{Ff(n,function(a,c){let h=a;Ia(a)&&(h=Ta(a)),e.push(r+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function ic(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch{}}function Os(n){this.l=n.fc||null,this.j=n.ob||!1}function Tl(n,e){Ir.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=bl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}je.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Cn(Os,Rs),Os.prototype.g=function(){return new Tl(this.l,this.j)},Os.prototype.i=function(n){return function(){return n}}({}),Cn(Tl,Ir);var bl=0;function ah(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Nn(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Uf(n)}function Uf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=Tl.prototype).open=function(n,e){if(this.readyState!=bl)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Uf(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Dt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nn(this)),this.readyState=bl},Ye.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Uf(this)),this.g&&(this.readyState=3,Uf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Dt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ah(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ye.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Nn(this):Uf(this),3==this.readyState&&ah(this)}},Ye.Za=function(n){this.g&&(this.response=this.responseText=n,Nn(this))},Ye.Ya=function(n){this.g&&(this.response=n,Nn(this))},Ye.ka=function(){this.g&&Nn(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Tl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pE=Dt.JSON.parse;function Wn(n){Ir.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dy,this.L=this.M=!1}Cn(Wn,Ir);var dy="",gE=/^https?$/i,mE=["POST","PUT"];function h0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,f0(n),hy(n)}function f0(n){n.F||(n.F=!0,Er(n,"complete"),Er(n,"error"))}function _E(n){if(n.h&&typeof rl<"u"&&(!n.C[1]||4!=so(n)||2!=n.da()))if(n.v&&4==so(n))Sf(n.La,0,n);else if(Er(n,"readystatechange"),4==so(n)){n.h=!1;try{const h=n.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var a=String(n.I).match(Vf)[1]||null;!a&&Dt.self&&Dt.self.location&&(a=Dt.self.location.protocol.slice(0,-1)),r=!gE.test(a?a.toLowerCase():"")}t=r}if(t)Er(n,"complete"),Er(n,"success");else{n.m=6;try{var c=2<so(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.da()+"]",f0(n)}}finally{hy(n)}}}function hy(n,e){if(n.g){uh(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Er(n,"ready");try{t.onreadystatechange=r}catch{}}}function uh(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function so(n){return n.g?n.g.readyState:0}function fy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case dy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function py(n){let e="";return P(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function gy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=py(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Jt(n,e,t))}function ch(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function my(n){this.Ga=0,this.j=[],this.l=new dl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ch("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ch("baseRetryDelayMs",5e3,n),this.hb=ch("retryDelaySeedMs",1e4,n),this.eb=ch("forwardChannelMaxRetries",2,n),this.xa=ch("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new je(n&&n.concurrentRequestLimit),this.Ja=new pg,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function jf(n){if(g0(n),3==n.H){var e=n.W++,t=ms(n.I);if(Jt(t,"SID",n.K),Jt(t,"RID",e),Jt(t,"TYPE","terminate"),oo(n,t),(e=new xa(n,n.l,e)).L=2,e.v=wl(ms(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon)try{t=Dt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Iy(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ma(e)}_0(n)}function yy(n){n.g&&(vy(n),n.g.cancel(),n.g=null)}function g0(n){yy(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),Cl(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function lh(n){if(!tt(n.i)&&!n.m){n.m=!0;var e=n.Na;no||Jd(),Yu||(no(),Yu=!0),ll.add(e,n),n.C=0}}function _y(n,e){var t;t=e?e.m:n.W++;const r=ms(n.I);Jt(r,"SID",n.K),Jt(r,"RID",t),Jt(r,"AID",n.V),oo(n,r),n.o&&n.s&&gy(r,n.o,n.s),t=new xa(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=y0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),El(n.i,t),vl(t,r,e)}function oo(n,e){n.na&&P(n.na,function(t,r){Jt(e,r,t)}),n.h&&Ff({},function(t,r){Jt(e,r,t)})}function y0(n,e,t){t=Math.min(n.j.length,t);var r=n.h?er(n.h.Va,n.h,n):null;e:{var a=n.j;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].g,h.push("ofs="+c)):c=0:h.push("ofs="+c);let y=!0;for(let E=0;E<t;E++){let C=a[E].g;const x=a[E].map;if(C-=c,0>C)c=Math.max(0,a[E].g-100),y=!1;else try{Bf(x,h,"req"+C+"_")}catch{r&&r(x)}}if(y){r=h.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function mg(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;no||Jd(),Yu||(no(),Yu=!0),ll.add(e,n),n.A=0}}function dh(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Ca(er(n.Ma,n),wy(n,n.A)),n.A++,0))}function vy(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function yg(n){n.g=new xa(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ms(n.wa);Jt(e,"RID","rpc"),Jt(e,"SID",n.K),Jt(e,"AID",n.V),Jt(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Jt(e,"TO",n.qa),Jt(e,"TYPE","xmlhttp"),oo(n,e),n.o&&n.s&&gy(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=wl(ms(e)),t.s=null,t.S=!0,rr(t,n)}function Cl(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function Sl(n,e){var t=null;if(n.g==e){Cl(n),vy(n),n.g=null;var r=2}else{if(!si(n.i,e))return;t=e.F,hg(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=n.C;Er(r=Xu(),new Nf(r,t)),lh(n)}else mg(n);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==r&&function m0(n,e){return!(In(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Ca(er(n.Na,n,e),wy(n,n.C)),n.C++,0)))}(n,e)||2==r&&dh(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:Pa(n,5);break;case 4:Pa(n,10);break;case 3:Pa(n,6);break;default:Pa(n,2)}}function wy(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Pa(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=er(n.pb,n);t||(t=new ir("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||rc(t,"https"),wl(t)),function gg(n,e){const t=new dl;if(Dt.Image){const r=new Image;r.onload=eo(ic,t,r,"TestLoadImage: loaded",!0,e),r.onerror=eo(ic,t,r,"TestLoadImage: error",!1,e),r.onabort=eo(ic,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=eo(ic,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Rr(2);n.H=0,n.h&&n.h.za(e),_0(n),g0(n)}function _0(n){if(n.H=0,n.ma=[],n.h){const e=Dl(n.i);(0!=e.length||0!=n.j.length)&&(Oo(n.ma,e),Oo(n.ma,n.j),n.i.i.length=0,ol(n.j),n.j.length=0),n.h.ya()}}function v0(n,e,t){var r=t instanceof ir?ms(t):new ir(t);if(""!=r.g)e&&(r.g=e+"."+r.g),sh(r,r.m);else{var a=Dt.location;r=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new ir(null);r&&rc(c,r),e&&(c.g=e),a&&sh(c,a),t&&(c.l=t),r=c}return e=n.Da,(t=n.F)&&e&&Jt(r,t,e),Jt(r,"VER",n.ra),oo(n,r),r}function Iy(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wn(t&&n.Ha&&!n.va?new Os({ob:!0}):n.va)).Oa(n.J),e}function Al(){}function _g(){if(Hu&&!(10<=Number(Zd)))throw Error("Environmental error: no available transport.")}function ys(n,e){Ir.call(this),this.g=new my(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Ns(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ns(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new sc(this)}function w0(n){yl.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function I0(){Aa.call(this),this.status=1}function sc(n){this.g=n}function Ls(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ey(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)r[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)r[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=n.g[3],h=(e=n.g[0])+(c^(t=n.g[1])&((a=n.g[2])^c))+r[0]+3614090360&4294967295;h=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(h<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+r[1]+3905402710&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+r[3]+3250441966&4294967295)<<22&4294967295|h>>>10))+((h=e+(c^t&(a^c))+r[4]+4118548399&4294967295)<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+r[5]+1200080426&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+r[7]+4249261313&4294967295)<<22&4294967295|h>>>10))+((h=e+(c^t&(a^c))+r[8]+1770035416&4294967295)<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+r[9]+2336552879&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+r[11]+2304563134&4294967295)<<22&4294967295|h>>>10))+((h=e+(c^t&(a^c))+r[12]+1804603682&4294967295)<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+r[13]+4254626195&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+r[15]+1236535329&4294967295)<<22&4294967295|h>>>10))+((h=e+(a^c&(t^a))+r[1]+4129170786&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+r[11]+643717713&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+r[0]+3921069994&4294967295)<<20&4294967295|h>>>12))+((h=e+(a^c&(t^a))+r[5]+3593408605&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+r[15]+3634488961&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+r[4]+3889429448&4294967295)<<20&4294967295|h>>>12))+((h=e+(a^c&(t^a))+r[9]+568446438&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+r[3]+4107603335&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+r[8]+1163531501&4294967295)<<20&4294967295|h>>>12))+((h=e+(a^c&(t^a))+r[13]+2850285829&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+r[7]+1735328473&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+r[12]+2368359562&4294967295)<<20&4294967295|h>>>12))+((h=e+(t^a^c)+r[5]+4294588738&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+r[8]+2272392833&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+r[14]+4259657740&4294967295)<<23&4294967295|h>>>9))+((h=e+(t^a^c)+r[1]+2763975236&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+r[4]+1272893353&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+r[10]+3200236656&4294967295)<<23&4294967295|h>>>9))+((h=e+(t^a^c)+r[13]+681279174&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+r[0]+3936430074&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+r[6]+76029189&4294967295)<<23&4294967295|h>>>9))+((h=e+(t^a^c)+r[9]+3654602809&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+r[12]+3873151461&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+r[15]+530742520&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+r[2]+3299628645&4294967295)<<23&4294967295|h>>>9))+((h=e+(a^(t|~c))+r[0]+4096336452&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+r[7]+1126891415&4294967295)<<10&4294967295|h>>>22))+((h=a+(e^(c|~t))+r[14]+2878612391&4294967295)<<15&4294967295|h>>>17))+((h=t+(c^(a|~e))+r[5]+4237533241&4294967295)<<21&4294967295|h>>>11))+((h=e+(a^(t|~c))+r[12]+1700485571&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+r[3]+2399980690&4294967295)<<10&4294967295|h>>>22))+((h=a+(e^(c|~t))+r[10]+4293915773&4294967295)<<15&4294967295|h>>>17))+((h=t+(c^(a|~e))+r[1]+2240044497&4294967295)<<21&4294967295|h>>>11))+((h=e+(a^(t|~c))+r[8]+1873313359&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+r[15]+4264355552&4294967295)<<10&4294967295|h>>>22))+((h=a+(e^(c|~t))+r[6]+2734768916&4294967295)<<15&4294967295|h>>>17))+((h=t+(c^(a|~e))+r[13]+1309151649&4294967295)<<21&4294967295|h>>>11))+((c=(e=t+((h=e+(a^(t|~c))+r[4]+4149444226&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+r[11]+3174756917&4294967295)<<10&4294967295|h>>>22))^((a=c+((h=a+(e^(c|~t))+r[2]+718787259&4294967295)<<15&4294967295|h>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(a+(h<<21&4294967295|h>>>11))&4294967295,n.g[2]=n.g[2]+a&4294967295,n.g[3]=n.g[3]+c&4294967295}function pn(n,e){this.h=e;for(var t=[],r=!0,a=n.length-1;0<=a;a--){var c=0|n[a];r&&c==e||(t[a]=c,r=!1)}this.g=t}(Ye=Wn.prototype).Oa=function(n){this.M=n},Ye.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Rf.g(),this.C=function Pf(n){return n.h||(n.h=n.i())}(this.u?this.u:Rf),this.g.onreadystatechange=er(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(c){return void h0(this,c)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)t.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())t.set(c,r.get(c))}r=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=Dt.FormData&&n instanceof Dt.FormData,!(0<=sl(mE,e))||r||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,h]of t)this.g.setRequestHeader(c,h);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{uh(this),0<this.B&&((this.L=function yE(n){return Hu&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=er(this.ua,this)):this.A=Sf(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){h0(this,c)}},Ye.ua=function(){typeof rl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Er(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Er(this,"complete"),Er(this,"abort"),hy(this))},Ye.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hy(this,!0)),Wn.$.N.call(this)},Ye.La=function(){this.s||(this.G||this.v||this.l?_E(this):this.kb())},Ye.kb=function(){_E(this)},Ye.isActive=function(){return!!this.g},Ye.da=function(){try{return 2<so(this)?this.g.status:-1}catch{return-1}},Ye.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ye.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pE(e)}},Ye.Ia=function(){return this.m},Ye.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=my.prototype).ra=8,Ye.H=1,Ye.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const a=new xa(this,this.l,n);let c=this.s;if(this.U&&(c?(c=z(c),Ue(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=y0(this,a,e),Jt(t=ms(this.I),"RID",n),Jt(t,"CVER",22),this.F&&Jt(t,"X-HTTP-Session-Id",this.F),oo(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(py(c)))+"&"+e:this.o&&gy(t,this.o,c)),El(this.i,a),this.bb&&Jt(t,"TYPE","init"),this.P?(Jt(t,"$req",e),Jt(t,"SID","null"),a.aa=!0,vl(a,t,null)):vl(a,t,e),this.H=2}}else 3==this.H&&(n?_y(this,n):0==this.j.length||tt(this.i)||_y(this))},Ye.Ma=function(){if(this.u=null,yg(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Ca(er(this.jb,this),n)}},Ye.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Rr(10),yy(this),yg(this))},Ye.ib=function(){null!=this.v&&(this.v=null,yy(this),dh(this),Rr(19))},Ye.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Rr(2)):(this.l.info("Failed to ping google.com"),Rr(1))},Ye.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ye=Al.prototype).Ba=function(){},Ye.Aa=function(){},Ye.za=function(){},Ye.ya=function(){},Ye.isActive=function(){return!0},Ye.Va=function(){},_g.prototype.g=function(n,e){return new ys(n,e)},Cn(ys,Ir),ys.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Rr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=v0(n,null,n.Y),lh(n)},ys.prototype.close=function(){jf(this.g)},ys.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Ta(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&lh(e)},ys.prototype.N=function(){this.g.h=null,delete this.j,jf(this.g),delete this.g,ys.$.N.call(this)},Cn(w0,yl),Cn(I0,Aa),Cn(sc,Al),sc.prototype.Ba=function(){Er(this.g,"a")},sc.prototype.Aa=function(n){Er(this.g,new w0(n))},sc.prototype.za=function(n){Er(this.g,new I0)},sc.prototype.ya=function(){Er(this.g,"b")},Cn(Ls,function vE(){this.blockSize=-1}),Ls.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ls.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)Ey(this,n,c),c+=this.blockSize;if("string"==typeof n){for(;c<e;)if(r[a++]=n.charCodeAt(c++),a==this.blockSize){Ey(this,r),a=0;break}}else for(;c<e;)if(r[a++]=n[c++],a==this.blockSize){Ey(this,r),a=0;break}}this.h=a,this.i+=e},Ls.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var YT={};function Dy(n){return-128<=n&&128>n?function Kd(n,e){var t=YT;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new pn([0|e],0>e?-1:0)}):new pn([0|n],0>n?-1:0)}function _s(n){if(isNaN(n)||!isFinite(n))return $o;if(0>n)return oi(_s(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=oc;return new pn(e,0)}var oc=4294967296,$o=Dy(0),Ty=Dy(1),wE=Dy(16777216);function Ho(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Fs(n){return-1==n.h}function oi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new pn(t,~n.h).add(Ty)}function vg(n,e){return n.add(oi(e))}function $f(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function hh(n,e){this.g=n,this.h=e}function fh(n,e){if(Ho(e))throw Error("division by zero");if(Ho(n))return new hh($o,$o);if(Fs(n))return e=fh(oi(n),e),new hh(oi(e.g),oi(e.h));if(Fs(e))return e=fh(n,oi(e)),new hh(oi(e.g),e.h);if(30<n.g.length){if(Fs(n)||Fs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Ty,r=e;0>=r.X(n);)t=wg(t),r=wg(r);var a=ph(t,1),c=ph(r,1);for(r=ph(r,2),t=ph(t,2);!Ho(r);){var h=c.add(r);0>=h.X(n)&&(a=a.add(t),c=h),r=ph(r,1),t=ph(t,1)}return e=vg(n,a.R(e)),new hh(a,e)}for(a=$o;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),h=(c=_s(t)).R(e);Fs(h)||0<h.X(n);)h=(c=_s(t-=r)).R(e);Ho(c)&&(c=Ty),a=a.add(c),n=vg(n,h)}return new hh(a,n)}function wg(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new pn(t,n.h)}function ph(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,a=[],c=0;c<r;c++)a[c]=0<e?n.D(c+t)>>>e|n.D(c+t+1)<<32-e:n.D(c+t);return new pn(a,n.h)}(Ye=pn.prototype).ea=function(){if(Fs(this))return-oi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:oc+r)*e,e*=oc}return n},Ye.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ho(this))return"0";if(Fs(this))return"-"+oi(this).toString(n);for(var e=_s(Math.pow(n,6)),t=this,r="";;){var a=fh(t,e).g,c=((0<(t=vg(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ho(t=a))return c+r;for(;6>c.length;)c="0"+c;r=c+r}},Ye.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ye.X=function(n){return Fs(n=vg(this,n))?-1:Ho(n)?0:1},Ye.abs=function(){return Fs(this)?oi(this):this},Ye.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,a=0;a<=e;a++){var c=r+(65535&this.D(a))+(65535&n.D(a)),h=(c>>>16)+(this.D(a)>>>16)+(n.D(a)>>>16);r=h>>>16,t[a]=(h&=65535)<<16|(c&=65535)}return new pn(t,-2147483648&t[t.length-1]?-1:0)},Ye.R=function(n){if(Ho(this)||Ho(n))return $o;if(Fs(this))return Fs(n)?oi(this).R(oi(n)):oi(oi(this).R(n));if(Fs(n))return oi(this.R(oi(n)));if(0>this.X(wE)&&0>n.X(wE))return _s(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var a=0;a<n.g.length;a++){var c=this.D(r)>>>16,h=65535&this.D(r),y=n.D(a)>>>16,E=65535&n.D(a);t[2*r+2*a]+=h*E,$f(t,2*r+2*a),t[2*r+2*a+1]+=c*E,$f(t,2*r+2*a+1),t[2*r+2*a+1]+=h*y,$f(t,2*r+2*a+1),t[2*r+2*a+2]+=c*y,$f(t,2*r+2*a+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new pn(t,0)},Ye.gb=function(n){return fh(this,n).h},Ye.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new pn(t,this.h&n.h)},Ye.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new pn(t,this.h|n.h)},Ye.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new pn(t,this.h^n.h)},_g.prototype.createWebChannel=_g.prototype.g,ys.prototype.send=ys.prototype.u,ys.prototype.open=ys.prototype.m,ys.prototype.close=ys.prototype.close,pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,gl.COMPLETE="complete",ml.EventType=Sa,Sa.OPEN="a",Sa.CLOSE="b",Sa.ERROR="c",Sa.MESSAGE="d",Ir.prototype.listen=Ir.prototype.O,Wn.prototype.listenOnce=Wn.prototype.P,Wn.prototype.getLastError=Wn.prototype.Sa,Wn.prototype.getLastErrorCode=Wn.prototype.Ia,Wn.prototype.getStatus=Wn.prototype.da,Wn.prototype.getResponseJson=Wn.prototype.Wa,Wn.prototype.getResponseText=Wn.prototype.ja,Wn.prototype.send=Wn.prototype.ha,Wn.prototype.setWithCredentials=Wn.prototype.Oa,Ls.prototype.digest=Ls.prototype.l,Ls.prototype.reset=Ls.prototype.reset,Ls.prototype.update=Ls.prototype.j,pn.prototype.add=pn.prototype.add,pn.prototype.multiply=pn.prototype.R,pn.prototype.modulo=pn.prototype.gb,pn.prototype.compare=pn.prototype.X,pn.prototype.toNumber=pn.prototype.ea,pn.prototype.toString=pn.prototype.toString,pn.prototype.getBits=pn.prototype.D,pn.fromNumber=_s,pn.fromString=function E0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return oi(E0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=_s(Math.pow(e,8)),r=$o,a=0;a<n.length;a+=8){var c=Math.min(8,n.length-a),h=parseInt(n.substring(a,a+c),e);8>c?(c=_s(Math.pow(e,c)),r=r.R(c).add(_s(h))):r=(r=r.R(t)).add(_s(h))}return r};var by=Hr.createWebChannelTransport=function(){return new _g},Hf=Hr.getStatEventTarget=function(){return Xu()},Cy=Hr.ErrorCode=pl,IE=Hr.EventType=gl,EE=Hr.Event=jo,D0=Hr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},DE=Hr.FetchXmlHttpFactory=Os,Ig=Hr.WebChannel=ml,TE=Hr.XhrIo=Wn,gh=Hr.Md5=Ls,Ji=Hr.Integer=pn;const T0="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let Gf="9.22.1";const xl=new xs.Yd("@firebase/firestore");function Eg(){return xl.logLevel}function ke(n,...e){if(xl.logLevel<=xs.in.DEBUG){const t=e.map(Sy);xl.debug(`Firestore (${Gf}): ${n}`,...t)}}function Dr(n,...e){if(xl.logLevel<=xs.in.ERROR){const t=e.map(Sy);xl.error(`Firestore (${Gf}): ${n}`,...t)}}function vs(n,...e){if(xl.logLevel<=xs.in.WARN){const t=e.map(Sy);xl.warn(`Firestore (${Gf}): ${n}`,...t)}}function Sy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Gf}) INTERNAL ASSERTION FAILED: `+n;throw Dr(e),new Error(e)}function yt(n,e){n||nt()}function Ge(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class b0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class SE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class C0{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const c=C=>this.i!==a?(a=this.i,t(C)):Promise.resolve();let h=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Or,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const C=h;e.enqueueRetryable((0,le.Z)(function*(){yield C.promise,yield c(r.currentUser)}))},E=C=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Or)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt("string"==typeof r.accessToken),new b0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new Gr(e)}}class AE{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class xE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new AE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class S0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vt{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=c=>{null!=c.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.T;return this.T=c.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const a=c=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?a(c):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt("string"==typeof t.token),this.T=t.token,new S0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function A0(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ay{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=A0(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function mh(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function xy(n){return n+"\0"}class Un{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Un.fromMillis(Date.now())}static fromDate(e){return Un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Un(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Un(0,0))}static max(){return new _t(new Un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class zf{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===zf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends zf{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const JT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qn extends zf{construct(e,t,r){return new qn(e,t,r)}static isValidIdentifier(e){return JT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(0===r.length)throw new be(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new be(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[a+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new be(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,a+=2}else"`"===y?(h=!h,a++):"."!==y||h?(r+=y,a++):(c(),a++)}if(c(),h)throw new be(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qn(t)}static emptyPath(){return new qn([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(nn.fromString(e))}static fromName(e){return new Qe(nn.fromString(e).popFirst(5))}static empty(){return new Qe(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new nn(e.slice()))}}class Go{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function My(n){return n.fields.find(e=>2===e.kind)}function Ra(n){return n.fields.filter(e=>2!==e.kind)}Go.UNKNOWN_ID=-1;class Dg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Tg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Tg(0,Xi.min())}}function NE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=_t.fromTimestamp(1e9===r?new Un(t+1,0):new Un(t,r));return new Xi(a,Qe.empty(),e)}function x0(n){return new Xi(n.readTime,n.key,-1)}class Xi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xi(_t.min(),Qe.empty(),-1)}static max(){return new Xi(_t.max(),Qe.empty(),-1)}}function M0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const N0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ml{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ac(n){return bg.apply(this,arguments)}function bg(){return bg=(0,le.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==N0)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),bg.apply(this,arguments)}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,r)=>{t(e)})}static reject(e){return new X((t,r)=>{r(e)})}static waitFor(e){return new X((t,r)=>{let a=0,c=0,h=!1;e.forEach(y=>{++a,y.next(()=>{++c,h&&c===a&&t()},E=>r(E))}),h=!0,c===a&&t()})}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next(a=>a?X.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,c)=>{r.push(t.call(this,a,c))}),this.waitFor(r)}static mapArray(e,t){return new X((r,a)=>{const c=e.length,h=new Array(c);let y=0;for(let E=0;E<c;E++){const C=E;t(e[C]).next(x=>{h[C]=x,++y,y===c&&r(h)},x=>a(x))}})}static doWhile(e,t){return new X((r,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):r()};c()})}}class Cg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Or,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Wf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const a=Ry(r.target.error);this.v.reject(new Wf(e,a))}}static open(e,t,r,a){try{return new Cg(t,e.transaction(a,r))}catch(c){throw new Wf(t,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new RE(t)}}class Vs{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Vs.S((0,Ht.z$)())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Nl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ht.hl)())return!1;if(Vs.C())return!0;const e=(0,Ht.z$)(),t=Vs.S(e),r=0<t&&t<10,a=Vs.N(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,le.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{a(new Wf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const y=h.target.error;a("VersionError"===y.name?new be(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new be(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Wf(e,y))},c.onupgradeneeded=h=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.V.O(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var c=this;return(0,le.Z)(function*(){const h="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.$(e);const E=Cg.open(c.db,e,h?"readonly":"readwrite",r),C=a(E).next(x=>(E.P(),x)).catch(x=>(E.abort(x),X.reject(x))).toPromise();return C.catch(()=>{}),yield E.R,C}catch(E){const C=E,x="FirebaseError"!==C.name&&y<3;if(ke("SimpleDb","Transaction failed with error:",C.message,"Retrying:",x),c.close(),!x)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class PE{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Nl(this.L.delete())}}class Wf extends be{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function uc(n){return"IndexedDbTransactionError"===n.name}class RE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nl(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Nl(this.store.add(e))}get(e){return Nl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Nl(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Nl(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),c=[];return this.W(a,(h,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(r.range);return new X((c,h)=>{a.onerror=y=>{h(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new X((a,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}J(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.W(a,(c,h,y)=>y.delete())}X(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.W(a,t)}Z(e){const t=this.cursor({});return new X((r,a)=>{t.onerror=c=>{const h=Ry(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(y=>{y?h.continue():r()}):r()}})}W(e,t){const r=[];return new X((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const y=h.target.result;if(!y)return void a();const E=new PE(y),C=t(y.primaryKey,y.value,E);if(C instanceof X){const x=C.catch(k=>(E.done(),X.reject(k)));r.push(x)}E.isDone?a():null===E.K?y.continue():y.continue(E.K)}}).next(()=>X.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Nl(n){return new X((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=Ry(r.target.error);t(a)}})}let Py=!1;function Ry(n){const e=Vs.S((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Py||(Py=!0,setTimeout(()=>{throw r},0)),r}}return n}class P0{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,le.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){uc(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ac(r)}yield t.et(6e4)}))}}class R0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let a=t,c=!0;return X.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return ke("IndexBackiller",`Processing collection: ${h}`),this.it(e,h,a).next(y=>{a-=y,r.add(h)});c=!1})).next(()=>t-a)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(c=>{const h=c.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.rt(a,c)).next(y=>(ke("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>h.size)}))}rt(e,t){let r=e;return t.changes.forEach((a,c)=>{const h=x0(c);M0(h,r)>0&&(r=h)}),new Xi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Li=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>r.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Sg(n){return null==n}function Pl(n){return 0===n&&1/n==-1/0}function k0(n){return"number"==typeof n&&Number.isInteger(n)&&!Pl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Fi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=O0(e)),e=yh(n.get(t),e);return O0(e)}function yh(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function O0(n){return n+"\x01\x01"}function ao(n){const e=n.length;if(yt(e>=2),2===e)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&nt(),n.charAt(h+1)){case"\x01":const y=n.substring(c,h);let E;0===a.length?E=y:(a+=y,E=a,a=""),r.push(E);break;case"\x10":a+=n.substring(c,h),a+="\0";break;case"\x11":a+=n.substring(c,h+1);break;default:nt()}c=h+2}return new nn(r)}const qf=["userId","batchId"];function es(n,e){return[n,Fi(e)]}function ky(n,e,t){return[n,Fi(e),t]}const kE={},Oy=["prefixPath","collectionGroup","readTime","documentId"],ka=["prefixPath","collectionGroup","documentId"],Ly=["collectionGroup","readTime","prefixPath","documentId"],L0=["canonicalId","targetId"],Fy=["targetId","path"],eb=["path","targetId"],F0=["collectionId","parent"],tb=["indexId","uid"],Ag=["uid","sequenceNumber"],xg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vy=["indexId","uid","orderedDocumentKey"],By=["userId","collectionPath","documentId"],Uy=["userId","collectionPath","largestBatchId"],nb=["userId","collectionGroup","largestBatchId"],V0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OE=[...V0,"documentOverlays"],B0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],U0=B0,j0=[...U0,"indexConfiguration","indexState","indexEntries"];class $0 extends Ml{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function zr(n,e){const t=Ge(n);return Vs.M(t.ht,e)}function LE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pn{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _h(this.root,e,this.comparator,!1)}getReverseIterator(){return new _h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _h(this.root,e,this.comparator,!0)}}class _h{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pi{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=r??pi.RED,this.left=a??pi.EMPTY,this.right=c??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new pi(e??this.key,t??this.value,r??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return pi.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1,pi.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,a){return this}insert(n,e,t){return new pi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FE(this.data.getIterator())}getIteratorFrom(e){return new FE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class FE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kf(n){return n.hasNext()?n.getNext():void 0}class ws{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new ws([])}unionWith(e){let t=new jn(qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class VE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new VE("Invalid base64 string: "+a):a}}(e);return new Wr(t)}static fromUint8Array(e){const t=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const ib=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rl(n){if(yt(!!n),"string"==typeof n){let e=0;const t=ib.exec(n);if(yt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(n.seconds),nanos:yn(n.nanos)}}function yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function uo(n){return"string"==typeof n?Wr.fromBase64String(n):Wr.fromUint8Array(n)}function Mg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Zf(n){const e=n.mapValue.fields.__previous_value__;return Mg(e)?Zf(e):e}function kl(n){const e=Rl(n.mapValue.fields.__local_write_time__.timestampValue);return new Un(e.seconds,e.nanos)}class H0{constructor(e,t,r,a,c,h,y,E,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.longPollingOptions=E,this.useFetchStreams=C}}class zo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zo&&e.projectId===this.projectId&&e.database===this.database}}const cc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},co={nullValue:"NULL_VALUE"};function La(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mg(n)?4:Ng(n)?9007199254740991:10:nt()}function Wo(n,e){if(n===e)return!0;const t=La(n);if(t!==La(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kl(n).isEqual(kl(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Rl(r.timestampValue),h=Rl(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,uo(n.bytesValue).isEqual(uo(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return yn(r.geoPointValue.latitude)===yn(a.geoPointValue.latitude)&&yn(r.geoPointValue.longitude)===yn(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return yn(r.integerValue)===yn(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=yn(r.doubleValue),h=yn(a.doubleValue);return c===h?Pl(c)===Pl(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return mh(n.arrayValue.values||[],e.arrayValue.values||[],Wo);case 10:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(LE(c)!==LE(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===h[y]||!Wo(c[y],h[y])))return!1;return!0}(n,e);default:return nt()}var a}function Yf(n,e){return void 0!==(n.values||[]).find(t=>Wo(t,e))}function Fa(n,e){if(n===e)return 0;const t=La(n),r=La(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=yn(a.integerValue||a.doubleValue),y=yn(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1}(n,e);case 3:return G0(n.timestampValue,e.timestampValue);case 4:return G0(kl(n),kl(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(a,c){const h=uo(a),y=uo(c);return h.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),y=c.split("/");for(let E=0;E<h.length&&E<y.length;E++){const C=Lt(h[E],y[E]);if(0!==C)return C}return Lt(h.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Lt(yn(a.latitude),yn(c.latitude));return 0!==h?h:Lt(yn(a.longitude),yn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const h=a.values||[],y=c.values||[];for(let E=0;E<h.length&&E<y.length;++E){const C=Fa(h[E],y[E]);if(C)return C}return Lt(h.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===cc.mapValue&&c===cc.mapValue)return 0;if(a===cc.mapValue)return 1;if(c===cc.mapValue)return-1;const h=a.fields||{},y=Object.keys(h),E=c.fields||{},C=Object.keys(E);y.sort(),C.sort();for(let x=0;x<y.length&&x<C.length;++x){const k=Lt(y[x],C[x]);if(0!==k)return k;const W=Fa(h[y[x]],E[C[x]]);if(0!==W)return W}return Lt(y.length,C.length)}(n.mapValue,e.mapValue);default:throw nt()}}function G0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=Rl(n),r=Rl(e),a=Lt(t.seconds,r.seconds);return 0!==a?a:Lt(t.nanos,r.nanos)}function vh(n){return wh(n)}function wh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=Rl(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?uo(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",c=!0;for(const h of r.values||[])c?c=!1:a+=",",a+=wh(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const y of a)h?h=!1:c+=",",c+=`${y}:${wh(r.fields[y])}`;return c+"}"}(n.mapValue):nt();var e}function Ba(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lc(n){return!!n&&"integerValue"in n}function Ol(n){return!!n&&"arrayValue"in n}function Qf(n){return!!n&&"nullValue"in n}function $y(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jf(n){return!!n&&"mapValue"in n}function Ll(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Oa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ll(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ll(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ng(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function z0(n){return"nullValue"in n?co:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ba(zo.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function Hy(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ba(zo.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?cc:nt()}function W0(n,e){const t=Fa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function BE(n,e){const t=Fa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(t)}setAll(e){let t=qn.emptyPath(),r={},a=[];e.forEach((h,y)=>{if(!t.isImmediateParentOf(y)){const E=this.getFieldsMap(t);this.applyChanges(E,r,a),r={},a=[],t=y.popLast()}h?r[y.lastSegment()]=Ll(h):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());Jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Jf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Oa(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new ai(Ll(this.value))}}function Gy(n){const e=[];return Oa(n.fields,(t,r)=>{const a=new qn([t]);if(Jf(r)){const c=Gy(r.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new ws(e)}class Ln{constructor(e,t,r,a,c,h,y){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=c,this.data=h,this.documentState=y}static newInvalidDocument(e){return new Ln(e,0,_t.min(),_t.min(),_t.min(),ai.empty(),0)}static newFoundDocument(e,t,r,a){return new Ln(e,1,t,_t.min(),r,a,0)}static newNoDocument(e,t){return new Ln(e,2,t,_t.min(),_t.min(),ai.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,_t.min(),_t.min(),ai.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ua{constructor(e,t){this.position=e,this.inclusive=t}}function zy(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(r=c.field.isKeyField()?Qe.comparator(Qe.fromName(h.referenceValue),t.key):Fa(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function q0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wo(n.position[t],e.position[t]))return!1;return!0}class qr{constructor(e,t="asc"){this.field=e,this.dir=t}}function K0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Z0{}class Xt extends Z0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new UE(e,t,r):"array-contains"===t?new $E(e,r):"in"===t?new lo(e,r):"not-in"===t?new Qy(e,r):"array-contains-any"===t?new HE(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new jE(e,r):new J0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fa(t,this.value)):null!==t&&La(this.value)===La(t)&&this.matchesComparison(Fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _n extends Z0{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new _n(e,t)}matches(e){return dc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dc(n){return"and"===n.op}function Pg(n){return"or"===n.op}function Wy(n){return Y0(n)&&dc(n)}function Y0(n){for(const e of n.filters)if(e instanceof _n)return!1;return!0}function qy(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+vh(n.value);if(Wy(n))return n.filters.map(e=>qy(e)).join(",");{const e=n.filters.map(t=>qy(t)).join(",");return`${n.op}(${e})`}}function Ky(n,e){return n instanceof Xt?(t=n,(r=e)instanceof Xt&&t.op===r.op&&t.field.isEqual(r.field)&&Wo(t.value,r.value)):n instanceof _n?function(t,r){return r instanceof _n&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((a,c,h)=>a&&Ky(c,r.filters[h]),!0)}(n,e):void nt();var t,r}function Q0(n,e){const t=n.filters.concat(e);return _n.create(t,n.op)}function Zy(n){return n instanceof Xt?`${(e=n).field.canonicalString()} ${e.op} ${vh(e.value)}`:n instanceof _n?function(e){return e.op.toString()+" {"+e.getFilters().map(Zy).join(" ,")+"}"}(n):"Filter";var e}class UE extends Xt{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class jE extends Xt{constructor(e,t){super(e,"in",t),this.keys=Yy(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class J0 extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=Yy(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Yy(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class $E extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ol(t)&&Yf(t.arrayValue,this.value)}}class lo extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yf(this.value.arrayValue,t)}}class Qy extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yf(this.value.arrayValue,t)}}class HE extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ol(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yf(this.value.arrayValue,r))}}class GE{constructor(e,t=null,r=[],a=[],c=null,h=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=h,this.endAt=y,this.dt=null}}function X0(n,e=null,t=[],r=[],a=null,c=null,h=null){return new GE(n,e,t,r,a,c,h)}function hc(n){const e=Ge(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>qy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),Sg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vh(r)).join(",")),e.dt=t}return e.dt}function Xf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!K0(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ky(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!q0(n.startAt,e.startAt)&&q0(n.endAt,e.endAt)}function Rg(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function kg(n,e){return n.filters.filter(t=>t instanceof Xt&&t.field.isEqual(e))}function Og(n,e,t){let r=co,a=!0;for(const c of kg(n,e)){let h=co,y=!0;switch(c.op){case"<":case"<=":h=z0(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,y=!1;break;case"!=":case"not-in":h=co}W0({value:r,inclusive:a},{value:h,inclusive:y})<0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];W0({value:r,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}function ew(n,e,t){let r=cc,a=!0;for(const c of kg(n,e)){let h=cc,y=!0;switch(c.op){case">=":case">":h=Hy(c.value),y=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,y=!1;break;case"!=":case"not-in":h=cc}BE({value:r,inclusive:a},{value:h,inclusive:y})>0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];BE({value:r,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}class ja{constructor(e,t=null,r=[],a=[],c=null,h="F",y=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=h,this.startAt=y,this.endAt=E,this.wt=null,this._t=null}}function ep(n,e,t,r,a,c,h,y){return new ja(n,e,t,r,a,c,h,y)}function fc(n){return new ja(n)}function tp(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function tw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ih(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function nw(n){return null!==n.collectionGroup}function pc(n){const e=Ge(n);if(null===e.wt){e.wt=[];const t=Ih(e),r=tw(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new qr(t)),e.wt.push(new qr(qn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new qr(qn.keyField(),c))}}}return e.wt}function gi(n){const e=Ge(n);if(!e._t)if("F"===e.limitType)e._t=X0(e.path,e.collectionGroup,pc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of pc(e))t.push(new qr(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Ua(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Ua(e.startAt.position,e.startAt.inclusive):null;e._t=X0(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e._t}function Lg(n,e){e.getFirstInequalityField(),Ih(n);const t=n.filters.concat([e]);return new ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function np(n,e,t){return new ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fl(n,e){return Xf(gi(n),gi(e))&&n.limitType===e.limitType}function qo(n){return`${hc(gi(n))}|lt:${n.limitType}`}function Eh(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Zy(r)).join(", ")}]`),Sg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vh(r)).join(",")),`Target(${t})`}(gi(n))}; limitType=${n.limitType})`}function gc(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Qe.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of pc(t))if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,c,h){const y=zy(a,c,h);return a.inclusive?y<=0:y<0}(t.startAt,pc(t),r)||t.endAt&&!function(a,c,h){const y=zy(a,c,h);return a.inclusive?y>=0:y>0}(t.endAt,pc(t),r)));var t,r}function Dh(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rw(n){return(e,t)=>{let r=!1;for(const a of pc(n)){const c=Jy(a,e,t);if(0!==c)return c;r=r||a.field.isKeyField()}return 0}}function Jy(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(a,c,h){const y=c.data.field(a),E=h.data.field(a);return null!==y&&null!==E?Fa(y,E):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,c]of r)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Oa(this.inner,(t,r)=>{for(const[a,c]of r)e(a,c)})}isEmpty(){return jy(this.inner)}size(){return this.innerSize}}const zE=new Pn(Qe.comparator);function ts(){return zE}const Th=new Pn(Qe.comparator);function rp(...n){let e=Th;for(const t of n)e=e.insert(t.key,t);return e}function WE(n){let e=Th;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zo(){return ip()}function qE(){return ip()}function ip(){return new Ko(n=>n.toString(),(n,e)=>n.isEqual(e))}const KE=new Pn(Qe.comparator),ZE=new jn(Qe.comparator);function $t(...n){let e=ZE;for(const t of n)e=e.add(t);return e}const iw=new jn(Lt);function Xy(){return iw}function Fg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pl(e)?"-0":e}}function sw(n){return{integerValue:""+n}}function ow(n,e){return k0(e)?sw(e):Fg(n,e)}class Vg{constructor(){this._=void 0}}function YE(n,e,t){return n instanceof $a?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Mg(a)&&(a=Zf(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Is?JE(n,e):n instanceof ho?uw(n,e):function(r,a){const c=aw(r,a),h=Bg(c)+Bg(r.gt);return lc(c)&&lc(r.gt)?sw(h):Fg(r.serializer,h)}(n,e)}function QE(n,e,t){return n instanceof Is?JE(n,e):n instanceof ho?uw(n,e):t}function aw(n,e){return n instanceof bh?lc(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $a extends Vg{}class Is extends Vg{constructor(e){super(),this.elements=e}}function JE(n,e){const t=cw(e);for(const r of n.elements)t.some(a=>Wo(a,r))||t.push(r);return{arrayValue:{values:t}}}class ho extends Vg{constructor(e){super(),this.elements=e}}function uw(n,e){let t=cw(e);for(const r of n.elements)t=t.filter(a=>!Wo(a,r));return{arrayValue:{values:t}}}class bh extends Vg{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Bg(n){return yn(n.integerValue||n.doubleValue)}function cw(n){return Ol(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ns{constructor(e,t){this.field=e,this.transform=t}}class mi{constructor(e,t){this.version=e,this.transformResults=t}}class gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vl(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Vi{}function e_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hl(n.key,gn.none()):new fo(n.key,n.data,gn.none());{const t=n.data,r=ai.empty();let a=new jn(qn.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);null===h&&c.length>1&&(c=c.popLast(),h=t.field(c)),null===h?r.delete(c):r.set(c,h),a=a.add(c)}return new rs(n.key,r,new ws(a.toArray()),gn.none())}}function Ch(n,e,t){n instanceof fo?function(r,a,c){const h=r.value.clone(),y=jl(r.fieldTransforms,a,c.transformResults);h.setAll(y),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof rs?function(r,a,c){if(!Vl(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=jl(r.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(Ul(r)),y.setAll(h),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yo(n,e,t,r){return n instanceof fo?function(a,c,h,y){if(!Vl(a.precondition,c))return h;const E=a.value.clone(),C=$l(a.fieldTransforms,y,c);return E.setAll(C),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof rs?function(a,c,h,y){if(!Vl(a.precondition,c))return h;const E=$l(a.fieldTransforms,y,c),C=c.data;return C.setAll(Ul(a)),C.setAll(E),c.convertToFoundDocument(c.version,C).setHasLocalMutations(),null===h?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(n,e,t,r):(h=t,Vl(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h);var c,h}function Sh(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=aw(r.transform,a||null);null!=c&&(null===t&&(t=ai.empty()),t.set(r.field,c))}return t||null}function Bl(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&mh(t,r,(a,c)=>function sp(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Is&&r instanceof Is||t instanceof ho&&r instanceof ho?mh(t.elements,r.elements,Wo):t instanceof bh&&r instanceof bh?Wo(t.gt,r.gt):t instanceof $a&&r instanceof $a);var t,r}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class fo extends Vi{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class rs extends Vi{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ul(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jl(n,e,t){const r=new Map;yt(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,y=e.data.field(c.field);r.set(c.field,QE(h,y,t[a]))}return r}function $l(n,e,t){const r=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);r.set(a.field,YE(c,h,e))}return r}class Hl extends Vi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ug extends Vi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jg{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Ch(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yo(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qE();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let y=this.applyToLocalView(h,c.mutatedFields);y=t.has(a.key)?null:y;const E=e_(h,y);null!==E&&r.set(a.key,E),h.isValidDocument()||h.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$t())}isEqual(e){return this.batchId===e.batchId&&mh(this.mutations,e.mutations,(t,r)=>Bl(t,r))&&mh(this.baseMutations,e.baseMutations,(t,r)=>Bl(t,r))}}class $g{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){yt(e.mutations.length===r.length);let a=KE;const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,r[h].version);return new $g(e,t,r,a)}}class Hg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dw{constructor(e,t){this.count=e,this.unchangedNames=t}}var cr,en;function hw(n){switch(n){default:return nt();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function fw(n){if(void 0===n)return Dr("GRPC error has no .code"),oe.UNKNOWN;switch(n){case cr.OK:return oe.OK;case cr.CANCELLED:return oe.CANCELLED;case cr.UNKNOWN:return oe.UNKNOWN;case cr.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case cr.INTERNAL:return oe.INTERNAL;case cr.UNAVAILABLE:return oe.UNAVAILABLE;case cr.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case cr.NOT_FOUND:return oe.NOT_FOUND;case cr.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case cr.ABORTED:return oe.ABORTED;case cr.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case cr.DATA_LOSS:return oe.DATA_LOSS;default:return nt()}}(en=cr||(cr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class Gg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return zg}static getOrCreateInstance(){return null===zg&&(zg=new Gg),zg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let zg=null;function t_(){return new TextEncoder}const n_=new Ji([4294967295,4294967295],0);function Wg(n){const e=t_().encode(n),t=new gh;return t.update(e),new Uint8Array(t.digest())}function pw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ji([t,r],0),new Ji([a,c],0)]}class Ah{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mc(`Invalid padding: ${t}`);if(r<0)throw new mc(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new mc(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new mc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ji.fromNumber(this.It)}Et(e,t,r){let a=e.add(t.multiply(Ji.fromNumber(r)));return 1===a.compare(n_)&&(a=new Ji([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Wg(e),[r,a]=pw(t);for(let c=0;c<this.hashCount;c++){const h=this.Et(r,a,c);if(!this.At(h))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Ah(c,a,t);return r.forEach(y=>h.insert(y)),h}insert(e){if(0===this.It)return;const t=Wg(e),[r,a]=pw(t);for(let c=0;c<this.hashCount;c++){const h=this.Et(r,a,c);this.Rt(h)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gl{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,op.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gl(_t.min(),a,new Pn(Lt),ts(),$t())}}class op{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new op(r,t,$t(),$t(),$t())}}class xh{constructor(e,t,r,a){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=a}}class qg{constructor(e,t){this.targetId=e,this.Vt=t}}class r_{constructor(e,t,r=Wr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class i_{constructor(){this.St=0,this.Dt=gw(),this.Ct=Wr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=$t(),t=$t(),r=$t();return this.Dt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:nt()}}),new op(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=gw()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class s_{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ts(),this.zt=o_(),this.Wt=new Pn(Lt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,a)=>{this.te(a)&&t(a)})}ne(e){var t;const r=e.targetId,a=e.Vt.count,c=this.se(r);if(c){const h=c.target;if(Rg(h))if(0===a){const y=new Qe(h.path);this.Yt(r,y,Ln.newNoDocument(y,_t.min()))}else yt(1===a);else{const y=this.ie(r);if(y!==a){const E=this.re(e,y);0!==E&&(this.ee(r),this.Wt=this.Wt.insert(r,2===E?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Gg.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(C,x,k){var W,te,Ie,Be,$e,Ct;const Ft={localCacheCount:x,existenceFilterCount:k.count},Nt=k.unchangedNames;return Nt&&(Ft.bloomFilter={applied:0===C,hashCount:null!==(W=Nt?.hashCount)&&void 0!==W?W:0,bitmapLength:null!==(Be=null===(Ie=null===(te=Nt?.bits)||void 0===te?void 0:te.bitmap)||void 0===Ie?void 0:Ie.length)&&void 0!==Be?Be:0,padding:null!==(Ct=null===($e=Nt?.bits)||void 0===$e?void 0:$e.padding)&&void 0!==Ct?Ct:0}),Ft}(E,y,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:a}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:c="",padding:h=0},hashCount:y=0}=r;let E,C;try{E=uo(c).toUint8Array()}catch(x){if(x instanceof VE)return vs("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw x}try{C=new Ah(E,h,y)}catch(x){return vs(x instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",x),1}return 0===C.It?1:a!==t-this.oe(e.targetId,C)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let a=0;return r.forEach(c=>{const h=this.Gt.ue(),y=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;t.vt(y)||(this.Yt(e,c,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((c,h)=>{const y=this.se(h);if(y){if(c.current&&Rg(y.target)){const E=new Qe(y.target.path);null!==this.jt.get(E)||this.ae(h,E)||this.Yt(h,E,Ln.newNoDocument(E,e))}c.Mt&&(t.set(h,c.Ot()),c.Ft())}});let r=$t();this.zt.forEach((c,h)=>{let y=!0;h.forEachWhile(E=>{const C=this.se(E);return!C||"TargetPurposeLimboResolution"===C.purpose||(y=!1,!1)}),y&&(r=r.add(c))}),this.jt.forEach((c,h)=>h.setReadTime(e));const a=new Gl(e,t,this.Wt,this.jt,r);return this.jt=ts(),this.zt=o_(),this.Wt=new Pn(Lt),a}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new i_,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new jn(Lt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new i_),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function o_(){return new Pn(Qe.comparator)}function gw(){return new Pn(Qe.comparator)}const a_={asc:"ASCENDING",desc:"DESCENDING"},mw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XE={and:"AND",or:"OR"};class yw{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kg(n,e){return n.useProto3Json||Sg(e)?e:{value:e}}function zl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eD(n,e){return zl(n,e.toTimestamp())}function lr(n){return yt(!!n),_t.fromTimestamp(function(e){const t=Rl(e);return new Un(t.seconds,t.nanos)}(n))}function c_(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function l_(n){const e=nn.fromString(n);return yt(y_(e)),e}function Wl(n,e){return c_(n.databaseId,e.path)}function po(n,e){const t=l_(e);if(t.get(1)!==n.databaseId.projectId)throw new be(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(h_(t))}function Zg(n,e){return c_(n.databaseId,e)}function d_(n){const e=l_(n);return 4===e.length?nn.emptyPath():h_(e)}function Mh(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function h_(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function f_(n,e,t){return{name:Wl(n,e),fields:t.value.mapValue.fields}}function p_(n,e,t){const r=po(n,e.name),a=lr(e.updateTime),c=e.createTime?lr(e.createTime):_t.min(),h=new ai({mapValue:{fields:e.fields}}),y=Ln.newFoundDocument(r,a,c,h);return t&&y.setHasCommittedMutations(),t?y.setHasCommittedMutations():y}function ap(n,e){let t;if(e instanceof fo)t={update:f_(n,e.key,e.value)};else if(e instanceof Hl)t={delete:Wl(n,e.key)};else if(e instanceof rs)t={update:f_(n,e.key,e.data),updateMask:rD(e.fieldMask)};else{if(!(e instanceof Ug))return nt();t={verify:Wl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof $a)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Is)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ho)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof bh)return{fieldPath:c.field.canonicalString(),increment:h.gt};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:eD(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:nt()),t;var a}function g_(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?gn.updateTime(lr(a.updateTime)):void 0!==a.exists?gn.exists(a.exists):gn.none():gn.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,h){let y=null;"setToServerValue"in h?(yt("REQUEST_TIME"===h.setToServerValue),y=new $a):"appendMissingElements"in h?y=new Is(h.appendMissingElements.values||[]):"removeAllFromArray"in h?y=new ho(h.removeAllFromArray.values||[]):"increment"in h?y=new bh(c,h.increment):nt();const E=qn.fromServerFormat(h.fieldPath);return new ns(E,y)}(n,a)):[];var a;if(e.update){const a=po(n,e.update.name),c=new ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new ws((e.updateMask.fieldPaths||[]).map(C=>qn.fromServerFormat(C)));return new rs(a,c,h,t,r)}return new fo(a,c,t,r)}if(e.delete){const a=po(n,e.delete);return new Hl(a,t)}if(e.verify){const a=po(n,e.verify);return new Ug(a,t)}return nt()}function ww(n,e){return{documents:[Zg(n,e.path)]}}function dr(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Zg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Zg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(E){if(0!==E.length)return Tw(_n.create(E,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(E){if(0!==E.length)return E.map(C=>{return{field:Ha((x=C).field),direction:Ew(x.dir)};var x})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Kg(n,e.limit);var y,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function m_(n){let e=d_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){yt(1===r);const x=t.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let c=[];t.where&&(c=function(x){const k=Iw(x);return k instanceof _n&&Wy(k)?k.getFilters():[k]}(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(x=>{return new qr(go((k=x).field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let y=null;t.limit&&(y=function(x){let k;return k="object"==typeof x?x.value:x,Sg(k)?null:k}(t.limit));let E=null;var x;t.startAt&&(E=new Ua((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new Ua(x.values||[],!x.before)}(t.endAt)),ep(e,a,h,c,y,"F",E,C)}function Iw(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=go(e.unaryFilter.field);return Xt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=go(e.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=go(e.unaryFilter.field);return Xt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=go(e.unaryFilter.field);return Xt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}(n):void 0!==n.fieldFilter?Xt.create(go((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return _n.create(e.compositeFilter.filters.map(t=>Iw(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return nt()}}(e.compositeFilter.op))}(n):nt();var e}function Ew(n){return a_[n]}function nD(n){return mw[n]}function Dw(n){return XE[n]}function Ha(n){return{fieldPath:n.canonicalString()}}function go(n){return qn.fromServerFormat(n.fieldPath)}function Tw(n){return n instanceof Xt?function(e){if("=="===e.op){if($y(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NAN"}};if(Qf(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($y(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NOT_NAN"}};if(Qf(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(e.field),op:nD(e.op),value:e.value}}}(n):n instanceof _n?function(e){const t=e.getFilters().map(r=>Tw(r));return 1===t.length?t[0]:{compositeFilter:{op:Dw(e.op),filters:t}}}(n):nt()}function rD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function y_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ga{constructor(e,t,r,a,c=_t.min(),h=_t.min(),y=Wr.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y,this.expectedCount=E}withSequenceNumber(e){return new Ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class __{constructor(e){this.fe=e}}function v_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:up(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Wl(a=n.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:zl(a,c.version.toTimestamp()),createTime:zl(a,c.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yi(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:yi(e.version)}}var a,c;return r}function up(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function yi(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ql(n){const e=new Un(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Kl(n,e){const t=(e.baseMutations||[]).map(c=>g_(n.fe,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>g_(n.fe,c)),a=Un.fromMillis(e.localWriteTimeMs);return new jg(e.batchId,a,t,r)}function is(n){const e=ql(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ql(n.lastLimboFreeSnapshotVersion):_t.min();let r;var a;return void 0!==n.query.documents?(yt(1===(a=n.query).documents.length),r=gi(fc(d_(a.documents[0])))):r=gi(m_(n.query)),new Ga(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Wr.fromBase64String(n.resumeToken))}function Bs(n,e){const t=yi(e.snapshotVersion),r=yi(e.lastLimboFreeSnapshotVersion);let a;a=Rg(e.target)?ww(n.fe,e.target):dr(n.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hc(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Es(n){const e=m_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?np(e,e.limit,"L"):e}function Yg(n,e){return new Hg(e.largestBatchId,g_(n.fe,e.overlayMutation))}function w_(n,e){const t=e.path.lastSegment();return[n,Fi(e.path.popLast()),t]}function bw(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:yi(r.readTime),documentKey:Fi(r.documentKey.path),largestBatchId:r.largestBatchId}}class iD{getBundleMetadata(e,t){return Cw(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:ql(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Cw(e).put({bundleId:(r=t).id,createTime:yi(lr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Sw(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:Es(a.bundledQuery),readTime:ql(a.readTime)};var a})}saveNamedQuery(e,t){return Sw(e).put({name:(r=t).name,readTime:yi(lr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Cw(n){return zr(n,"bundles")}function Sw(n){return zr(n,"namedQueries")}class Nh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Nh(e,t.uid||"")}getOverlay(e,t){return za(e).get(w_(this.userId,t)).next(r=>r?Yg(this.serializer,r):null)}getOverlays(e,t){const r=Zo();return X.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((c,h)=>{const y=new Hg(t,h);a.push(this.we(e,y))}),X.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(h=>a.add(Fi(h.getCollectionPath())));const c=[];return a.forEach(h=>{const y=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);c.push(za(e).J("collectionPathOverlayIndex",y))}),X.waitFor(c)}getOverlaysForCollection(e,t,r){const a=Zo(),c=Fi(t),h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return za(e).j("collectionPathOverlayIndex",h).next(y=>{for(const E of y){const C=Yg(this.serializer,E);a.set(C.getKey(),C)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const c=Zo();let h;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return za(e).X({index:"collectionGroupOverlayIndex",range:y},(E,C,x)=>{const k=Yg(this.serializer,C);c.size()<a||k.largestBatchId===h?(c.set(k.getKey(),k),h=k.largestBatchId):x.done()}).next(()=>c)}we(e,t){return za(e).put(function(r,a,c){const[h,y,E]=w_(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:E,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:ap(r.fe,c.mutation)}}(this.serializer,this.userId,t))}}function za(n){return zr(n,"documentOverlays")}class Zl{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(yn(e.integerValue));else if("doubleValue"in e){const r=yn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Pl(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(uo(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Ng(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):nt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const a of Object.keys(r))this.Te(a,t),this.me(r[a],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const a of r)this.me(a,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Aw(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xw(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const c=Aw(255&t[a]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}Zl.Ve=new Zl;class Mw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),r=xw(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),r=xw(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class Nw{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Qg{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class cp{constructor(){this.je=new Mw,this.ze=new Nw(this.je),this.We=new Qg(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class yc{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new yc(this.indexId,this.documentKey,this.arrayValue,r)}}function Wa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=I_(n.arrayValue,e.arrayValue),0!==t?t:(t=I_(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function I_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Jg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){yt(e.collectionGroup===this.collectionId);const t=My(e);if(void 0!==t&&!this.en(t))return!1;const r=Ra(e);let a=0,c=0;for(;a<r.length&&this.en(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.Ze){const h=r[a];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[c++],h))return!1;++a}for(;a<r.length;++a){const h=r[a];if(c>=this.Ye.length||!this.sn(this.Ye[c++],h))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function E_(n){var e,t;if(yt(n instanceof Xt||n instanceof _n),n instanceof Xt){if(n instanceof lo){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>Xt.create(n.field,"==",c)))||[];return _n.create(a,"or")}return n}const r=n.filters.map(a=>E_(a));return _n.create(r,n.op)}function Pw(n){if(0===n.getFilters().length)return[];const e=tm(E_(n));return yt(D_(e)),Xg(e)||em(e)?[e]:e.getFilters()}function Xg(n){return n instanceof Xt}function em(n){return n instanceof _n&&Wy(n)}function D_(n){return Xg(n)||em(n)||function(e){if(e instanceof _n&&Pg(e)){for(const t of e.getFilters())if(!Xg(t)&&!em(t))return!1;return!0}return!1}(n)}function tm(n){if(yt(n instanceof Xt||n instanceof _n),n instanceof Xt)return n;if(1===n.filters.length)return tm(n.filters[0]);const e=n.filters.map(r=>tm(r));let t=_n.create(e,n.op);return t=rm(t),D_(t)?t:(yt(t instanceof _n),yt(dc(t)),yt(t.filters.length>1),t.filters.reduce((r,a)=>nm(r,a)))}function nm(n,e){let t;return yt(n instanceof Xt||n instanceof _n),yt(e instanceof Xt||e instanceof _n),t=n instanceof Xt?e instanceof Xt?_n.create([n,e],"and"):T_(n,e):e instanceof Xt?T_(e,n):function(r,a){if(yt(r.filters.length>0&&a.filters.length>0),dc(r)&&dc(a))return Q0(r,a.getFilters());const c=Pg(r)?r:a,h=Pg(r)?a:r,y=c.filters.map(E=>nm(E,h));return _n.create(y,"or")}(n,e),rm(t)}function T_(n,e){if(dc(e))return Q0(e,n.getFilters());{const t=e.filters.map(r=>nm(n,r));return _n.create(t,"or")}}function rm(n){if(yt(n instanceof Xt||n instanceof _n),n instanceof Xt)return n;const e=n.getFilters();if(1===e.length)return rm(e[0]);if(Y0(n))return n;const t=e.map(a=>rm(a)),r=[];return t.forEach(a=>{a instanceof Xt?r.push(a):a instanceof _n&&(a.op===n.op?r.push(...a.filters):r.push(a))}),1===r.length?r[0]:_n.create(r,n.op)}class sD{constructor(){this.rn=new b_}addToCollectionParentIndex(e,t){return this.rn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Xi.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class b_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new jn(nn.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new jn(nn.comparator)).toArray()}}const im=new Uint8Array(0);class oD{constructor(e,t){this.user=e,this.databaseId=t,this.on=new b_,this.un=new Ko(r=>hc(r),(r,a)=>Xf(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const c={collectionId:r,parent:Fi(a)};return Rw(e).put(c)}return X.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[xy(t),""],!1,!0);return Rw(e).j(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(ao(h.parent))}return r})}addFieldIndex(e,t){const r=sm(e),a={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var h;delete a.indexId;const c=r.add(a);if(t.indexState){const h=dp(e);return c.next(y=>{h.put(bw(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=sm(e),a=dp(e),c=lp(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=lp(e);let a=!0;const c=new Map;return X.forEach(this.cn(t),h=>this.an(e,h).next(y=>{a&&(a=!!y),c.set(h,y)})).next(()=>{if(a){let h=$t();const y=[];return X.forEach(c,(E,C)=>{var x;ke("IndexedDbIndexManager",`Using index ${x=E,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Nt=>`${Nt.fieldPath}:${Nt.kind}`).join(",")}`} to execute ${hc(t)}`);const k=function(Nt,Bt){const Wt=My(Bt);if(void 0===Wt)return null;for(const sn of kg(Nt,Wt.fieldPath))switch(sn.op){case"array-contains-any":return sn.value.arrayValue.values||[];case"array-contains":return[sn.value]}return null}(C,E),W=function(Nt,Bt){const Wt=new Map;for(const sn of Ra(Bt))for(const os of kg(Nt,sn.fieldPath))switch(os.op){case"==":case"in":Wt.set(sn.fieldPath.canonicalString(),os.value);break;case"not-in":case"!=":return Wt.set(sn.fieldPath.canonicalString(),os.value),Array.from(Wt.values())}return null}(C,E),te=function(Nt,Bt){const Wt=[];let sn=!0;for(const os of Ra(Bt)){const zp=0===os.kind?Og(Nt,os.fieldPath,Nt.startAt):ew(Nt,os.fieldPath,Nt.startAt);Wt.push(zp.value),sn&&(sn=zp.inclusive)}return new Ua(Wt,sn)}(C,E),Ie=function(Nt,Bt){const Wt=[];let sn=!0;for(const os of Ra(Bt)){const zp=0===os.kind?ew(Nt,os.fieldPath,Nt.endAt):Og(Nt,os.fieldPath,Nt.endAt);Wt.push(zp.value),sn&&(sn=zp.inclusive)}return new Ua(Wt,sn)}(C,E),Be=this.hn(E,C,te),$e=this.hn(E,C,Ie),Ct=this.ln(E,C,W),Ft=this.fn(E.indexId,k,Be,te.inclusive,$e,Ie.inclusive,Ct);return X.forEach(Ft,Nt=>r.H(Nt,t.limit).next(Bt=>{Bt.forEach(Wt=>{const sn=Qe.fromSegments(Wt.documentKey);h.has(sn)||(h=h.add(sn),y.push(sn))})}))}).next(()=>y)}return X.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Pw(_n.create(e.filters,"and")).map(r=>X0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,a,c,h,y){const E=(null!=t?t.length:1)*Math.max(r.length,c.length),C=E/(null!=t?t.length:1),x=[];for(let k=0;k<E;++k){const W=t?this.dn(t[k/C]):im,te=this.wn(e,W,r[k%C],a),Ie=this._n(e,W,c[k%C],h),Be=y.map($e=>this.wn(e,W,$e,!0));x.push(...this.createRange(te,Ie,Be))}return x}wn(e,t,r,a){const c=new yc(e,Qe.empty(),t,r);return a?c:c.Je()}_n(e,t,r,a){const c=new yc(e,Qe.empty(),t,r);return a?c.Je():c}an(e,t){const r=new Jg(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let h=null;for(const y of c)r.tn(y)&&(!h||y.fields.length>h.fields.length)&&(h=y);return h})}getIndexType(e,t){let r=2;const a=this.cn(t);return X.forEach(a,c=>this.an(e,c).next(h=>{h?0!==r&&h.fields.length<function(y){let E=new jn(qn.comparator),C=!1;for(const x of y.filters)for(const k of x.getFlattenedFilters())k.field.isKeyField()||("array-contains"===k.op||"array-contains-any"===k.op?C=!0:E=E.add(k.field));for(const x of y.orderBy)x.field.isKeyField()||(E=E.add(x.field));return E.size+(C?1:0)}(c)&&(r=1):r=0})).next(()=>null!==t.limit&&a.length>1&&2===r?1:r)}mn(e,t){const r=new cp;for(const a of Ra(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const h=r.He(a.kind);Zl.Ve._e(c,h)}return r.Qe()}dn(e){const t=new cp;return Zl.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new cp;return Zl.Ve._e(Ba(this.databaseId,t),r.He(function(a){const c=Ra(a);return 0===c.length?0:c[c.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let a=[];a.push(new cp);let c=0;for(const h of Ra(e)){const y=r[c++];for(const E of a)if(this.yn(t,h.fieldPath)&&Ol(y))a=this.pn(a,h,y);else{const C=E.He(h.kind);Zl.Ve._e(y,C)}}return this.In(a)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const a=[...e],c=[];for(const h of r.arrayValue.values||[])for(const y of a){const E=new cp;E.seed(y.Qe()),Zl.Ve._e(h,E.He(t.kind)),c.push(E)}return c}yn(e,t){return!!e.filters.find(r=>r instanceof Xt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=sm(e),a=dp(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(c=>{const h=[];return X.forEach(c,y=>a.get([y.indexId,this.uid]).next(E=>{h.push(function(C,x){const k=x?new Tg(x.sequenceNumber,new Xi(ql(x.readTime),new Qe(ao(x.documentKey)),x.largestBatchId)):Tg.empty(),W=C.fields.map(([te,Ie])=>new Dg(qn.fromServerFormat(te),Ie));return new Go(C.indexId,C.collectionGroup,W,k)}(y,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const c=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Lt(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=sm(e),c=dp(e);return this.Tn(e).next(h=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>X.forEach(y,E=>c.put(bw(E.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return X.forEach(t,(a,c)=>{const h=r.get(a.collectionGroup);return(h?X.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(r.set(a.collectionGroup,y),X.forEach(y,E=>this.En(e,a,E).next(C=>{const x=this.An(c,E);return C.isEqual(x)?X.resolve():this.vn(e,c,E,C,x)}))))})}Rn(e,t,r,a){return lp(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,a){return lp(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const a=lp(e);let c=new jn(Wa);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(h,y)=>{c=c.add(new yc(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}An(e,t){let r=new jn(Wa);const a=this.mn(t,e);if(null==a)return r;const c=My(t);if(null!=c){const h=e.data.field(c.fieldPath);if(Ol(h))for(const y of h.arrayValue.values||[])r=r.add(new yc(t.indexId,e.key,this.dn(y),a))}else r=r.add(new yc(t.indexId,e.key,im,a));return r}vn(e,t,r,a,c){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(y,E,C,x,k){const W=y.getIterator(),te=E.getIterator();let Ie=Kf(W),Be=Kf(te);for(;Ie||Be;){let $e=!1,Ct=!1;if(Ie&&Be){const Ft=C(Ie,Be);Ft<0?Ct=!0:Ft>0&&($e=!0)}else null!=Ie?Ct=!0:$e=!0;$e?(x(Be),Be=Kf(te)):Ct?(k(Ie),Ie=Kf(W)):(Ie=Kf(W),Be=Kf(te))}}(a,c,Wa,y=>{h.push(this.Rn(e,t,r,y))},y=>{h.push(this.Pn(e,t,r,y))}),X.waitFor(h)}Tn(e){let t=1;return dp(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,y)=>Wa(h,y)).filter((h,y,E)=>!y||0!==Wa(h,E[y-1]));const a=[];a.push(e);for(const h of r){const y=Wa(h,e),E=Wa(h,t);if(0===y)a[0]=e.Je();else if(y>0&&E<0)a.push(h),a.push(h.Je());else if(E>0)break}a.push(t);const c=[];for(let h=0;h<a.length;h+=2){if(this.bn(a[h],a[h+1]))return[];c.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,im,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,im,[]]))}return c}bn(e,t){return Wa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kw)}getMinOffset(e,t){return X.mapArray(this.cn(t),r=>this.an(e,r).next(a=>a||nt())).next(kw)}}function Rw(n){return zr(n,"collectionParents")}function lp(n){return zr(n,"indexEntries")}function sm(n){return zr(n,"indexConfiguration")}function dp(n){return zr(n,"indexState")}function kw(n){yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;M0(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Xi(e.readTime,e.documentKey,t)}const Ow={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _i{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new _i(e,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Lw(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),c=[],h=IDBKeyRange.only(t.batchId);let y=0;const E=r.X({range:h},(x,k,W)=>(y++,W.delete()));c.push(E.next(()=>{yt(1===y)}));const C=[];for(const x of t.mutations){const k=ky(e,x.key.path,t.batchId);c.push(a.delete(k)),C.push(x.key)}return X.waitFor(c).next(()=>C)}function om(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}_i.DEFAULT_COLLECTION_PERCENTILE=10,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_i.DEFAULT=new _i(41943040,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_i.DISABLED=new _i(-1,0,0);class am{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Vn={}}static de(e,t,r,a){yt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new am(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).X({index:"userMutationsIndex",range:r},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const c=Ph(e),h=_c(e);return h.add({}).next(y=>{yt("number"==typeof y);const E=new jg(y,t,r,a),C=function(W,te,Ie){const Be=Ie.baseMutations.map(Ct=>ap(W.fe,Ct)),$e=Ie.mutations.map(Ct=>ap(W.fe,Ct));return{userId:te,batchId:Ie.batchId,localWriteTimeMs:Ie.localWriteTime.toMillis(),baseMutations:Be,mutations:$e}}(this.serializer,this.userId,E),x=[];let k=new jn((W,te)=>Lt(W.canonicalString(),te.canonicalString()));for(const W of a){const te=ky(this.userId,W.key.path,y);k=k.add(W.key.path.popLast()),x.push(h.put(C)),x.push(c.put(te,kE))}return k.forEach(W=>{x.push(this.indexManager.addToCollectionParentIndex(e,W))}),e.addOnCommittedListener(()=>{this.Vn[y]=E.keys()}),X.waitFor(x).next(()=>E)})}lookupMutationBatch(e,t){return _c(e).get(t).next(r=>r?(yt(r.userId===this.userId),Kl(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?X.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return _c(e).X({index:"userMutationsIndex",range:a},(h,y,E)=>{y.userId===this.userId&&(yt(y.batchId>=r),c=Kl(this.serializer,y)),E.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return _c(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).j("userMutationsIndex",t).next(r=>r.map(a=>Kl(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=es(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return Ph(e).X({range:a},(h,y,E)=>{const[C,x,k]=h,W=ao(x);if(C===this.userId&&t.path.isEqual(W))return _c(e).get(k).next(te=>{if(!te)throw nt();yt(te.userId===this.userId),c.push(Kl(this.serializer,te))});E.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Lt);const a=[];return t.forEach(c=>{const h=es(this.userId,c.path),y=IDBKeyRange.lowerBound(h),E=Ph(e).X({range:y},(C,x,k)=>{const[W,te,Ie]=C,Be=ao(te);W===this.userId&&c.path.isEqual(Be)?r=r.add(Ie):k.done()});a.push(E)}),X.waitFor(a).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=es(this.userId,r),h=IDBKeyRange.lowerBound(c);let y=new jn(Lt);return Ph(e).X({range:h},(E,C,x)=>{const[k,W,te]=E,Ie=ao(W);k===this.userId&&r.isPrefixOf(Ie)?Ie.length===a&&(y=y.add(te)):x.done()}).next(()=>this.Dn(e,y))}Dn(e,t){const r=[],a=[];return t.forEach(c=>{a.push(_c(e).get(c).next(h=>{if(null===h)throw nt();yt(h.userId===this.userId),r.push(Kl(this.serializer,h))}))}),X.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return Lw(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),X.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return X.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return Ph(e).X({range:r},(c,h,y)=>{if(c[0]===this.userId){const E=ao(c[1]);a.push(E)}else y.done()}).next(()=>{yt(0===a.length)})})}containsKey(e,t){return Fw(e,this.userId,t)}xn(e){return C_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Fw(n,e,t){const r=es(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return Ph(n).X({range:c,Y:!0},(y,E,C)=>{const[x,k,W]=y;x===e&&k===a&&(h=!0),C.done()}).next(()=>h)}function _c(n){return zr(n,"mutations")}function Ph(n){return zr(n,"documentMutations")}function C_(n){return zr(n,"mutationQueues")}class vc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new vc(0)}static Mn(){return new vc(-1)}}class Vw{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new vc(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>_t.fromTimestamp(new Un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yl(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(yt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let a=0;const c=[];return Yl(e).X((h,y)=>{const E=is(y);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(a++,c.push(this.removeTargetData(e,E)))}).next(()=>X.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Yl(e).X((r,a)=>{const c=is(a);t(c)})}$n(e){return S_(e).get("targetGlobalKey").next(t=>(yt(null!==t),t))}On(e,t){return S_(e).put("targetGlobalKey",t)}Fn(e,t){return Yl(e).put(Bs(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=hc(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Yl(e).X({range:a,index:"queryTargetsIndex"},(h,y,E)=>{const C=is(y);Xf(t,C.target)&&(c=C,E.done())}).next(()=>c)}addMatchingKeys(e,t,r){const a=[],c=qa(e);return t.forEach(h=>{const y=Fi(h.path);a.push(c.put({targetId:r,path:y})),a.push(this.referenceDelegate.addReference(e,r,h))}),X.waitFor(a)}removeMatchingKeys(e,t,r){const a=qa(e);return X.forEach(t,c=>{const h=Fi(c.path);return X.waitFor([a.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=qa(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=qa(e);let c=$t();return a.X({range:r,Y:!0},(h,y,E)=>{const C=ao(h[1]),x=new Qe(C);c=c.add(x)}).next(()=>c)}containsKey(e,t){const r=Fi(t.path),a=IDBKeyRange.bound([r],[xy(r)],!1,!0);let c=0;return qa(e).X({index:"documentTargetsIndex",Y:!0,range:a},([h,y],E,C)=>{0!==h&&(c++,C.done())}).next(()=>c>0)}le(e,t){return Yl(e).get(t).next(r=>r?is(r):null)}}function Yl(n){return zr(n,"targets")}function S_(n){return zr(n,"targetGlobal")}function qa(n){return zr(n,"targetDocuments")}function A_([n,e],[t,r]){const a=Lt(n,t);return 0===a?Lt(e,r):a}class Bw{constructor(e){this.Ln=e,this.buffer=new jn(A_),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();A_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class x_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,le.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){uc(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ac(r)}yield t.Qn(3e5)}))}}class Uw{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return X.resolve(Li.ct);const r=new Bw(t);return this.jn.forEachTarget(e,a=>r.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>r.Kn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Ow)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ow):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,a,c,h,y,E,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),a=this.params.maximumSequenceNumbersToCollect):a=k,h=Date.now(),this.nthSequenceNumber(e,a))).next(k=>(r=k,y=Date.now(),this.removeTargets(e,r,t))).next(k=>(c=k,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(C=Date.now(),Eg()<=xs.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-x}ms\n\tDetermined least recently used ${a} in `+(y-h)+`ms\n\tRemoved ${c} targets in `+(E-y)+`ms\n\tRemoved ${k} documents in `+(C-E)+`ms\nTotal Duration: ${C-x}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:k})))}}class Ql{constructor(e,t){this.db=e,this.garbageCollector=function M_(n,e){return new Uw(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,a)=>t(a))}addReference(e,t,r){return um(e,r)}removeReference(e,t,r){return um(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return um(e,t)}Xn(e,t){return function(r,a){let c=!1;return C_(r).Z(h=>Fw(r,h,a).next(y=>(y&&(c=!0),X.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Yn(e,(h,y)=>{if(y<=t){const E=this.Xn(e,h).next(C=>{if(!C)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h,_t.min()),qa(e).delete([0,Fi(h.path)])))});a.push(E)}}).next(()=>X.waitFor(a)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return um(e,t)}Yn(e,t){const r=qa(e);let a,c=Li.ct;return r.X({index:"documentTargetsIndex"},([h,y],{path:E,sequenceNumber:C})=>{0===h?(c!==Li.ct&&t(new Qe(ao(a)),c),c=C,a=E):c=Li.ct}).next(()=>{c!==Li.ct&&t(new Qe(ao(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function um(n,e){return qa(n).put((r=n.currentSequenceNumber,{targetId:0,path:Fi(e.path),sequenceNumber:r}));var r}class jw{constructor(){this.changes=new Ko(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rh{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return wc(e).put(r)}removeEntry(e,t,r){return wc(e).delete(function(a,c){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],up(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Ln.newInvalidDocument(t);return wc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kh(t))},(a,c)=>{r=this.ts(t,c)}).next(()=>r)}es(e,t){let r={size:0,document:Ln.newInvalidDocument(t)};return wc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kh(t))},(a,c)=>{r={document:this.ts(t,c),size:om(c)}}).next(()=>r)}getEntries(e,t){let r=ts();return this.ns(e,t,(a,c)=>{const h=this.ts(a,c);r=r.insert(a,h)}).next(()=>r)}ss(e,t){let r=ts(),a=new Pn(Qe.comparator);return this.ns(e,t,(c,h)=>{const y=this.ts(c,h);r=r.insert(c,y),a=a.insert(c,om(h))}).next(()=>({documents:r,rs:a}))}ns(e,t,r){if(t.isEmpty())return X.resolve();let a=new jn(xt);t.forEach(E=>a=a.add(E));const c=IDBKeyRange.bound(kh(a.first()),kh(a.last())),h=a.getIterator();let y=h.getNext();return wc(e).X({index:"documentKeyIndex",range:c},(E,C,x)=>{const k=Qe.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;y&&xt(y,k)<0;)r(y,null),y=h.getNext();y&&y.isEqual(k)&&(r(y,C),y=h.hasNext()?h.getNext():null),y?x.G(kh(y)):x.done()}).next(()=>{for(;y;)r(y,null),y=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(e,t,r,a){const c=t.path,h=[c.popLast().toArray(),c.lastSegment(),up(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],y=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wc(e).j(IDBKeyRange.bound(h,y,!0)).next(E=>{let C=ts();for(const x of E){const k=this.ts(Qe.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);k.isFoundDocument()&&(gc(t,k)||a.has(k.key))&&(C=C.insert(k.key,k))}return C})}getAllFromCollectionGroup(e,t,r,a){let c=ts();const h=cD(t,r),y=cD(t,Xi.max());return wc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,y,!0)},(E,C,x)=>{const k=this.ts(Qe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);c=c.insert(k.key,k),c.size===a&&x.done()}).next(()=>c)}newChangeBuffer(e){return new N_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return uD(e).get("remoteDocumentGlobalKey").next(t=>(yt(!!t),t))}Zn(e,t){return uD(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function ob(n,e){let t;if(e.document)t=p_(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),a=ql(e.noDocument.readTime);t=Ln.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=Qe.fromSegments(e.unknownDocument.path),a=ql(e.unknownDocument.version);t=Ln.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new Un(r[0],r[1]);return _t.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Ln.newInvalidDocument(e)}}function aD(n){return new Rh(n)}class N_ extends jw{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ko(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new jn((c,h)=>Lt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const y=this.us.get(c);if(t.push(this.os.removeEntry(e,c,y.readTime)),h.isValidDocument()){const E=v_(this.os.serializer,h);a=a.add(c.path.popLast()),r+=om(E)-y.size,t.push(this.os.addEntry(e,c,E))}else if(r-=y.size,this.trackRemovals){const E=v_(this.os.serializer,h.convertToNoDocument(_t.min()));t.push(this.os.addEntry(e,c,E))}}),a.forEach(c=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.os.updateMetadata(e,r)),X.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:a})=>(a.forEach((c,h)=>{this.us.set(c,{size:h,readTime:r.get(c).readTime})}),r))}}function uD(n){return zr(n,"remoteDocumentGlobal")}function wc(n){return zr(n,"remoteDocumentsV14")}function kh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cD(n,e){const t=e.documentKey.path.toArray();return[n,up(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function xt(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(a=Lt(t[c],r[c]),a)return a;return a=Lt(t.length,r.length),a||(a=Lt(t[t.length-2],r[r.length-2]),a||Lt(t[t.length-1],r[r.length-1]))}class lD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $w{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==r&&Yo(r.mutation,a,ws.empty(),Un.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$t()){const a=Zo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(c=>{let h=rp();return c.forEach((y,E)=>{h=h.insert(y,E.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=Zo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$t()))}populateOverlays(e,t,r){const a=[];return r.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,y)=>{t.set(h,y)})})}computeViews(e,t,r,a){let c=ts();const h=ip(),y=ip();return t.forEach((E,C)=>{const x=r.get(C.key);a.has(C.key)&&(void 0===x||x.mutation instanceof rs)?c=c.insert(C.key,C):void 0!==x?(h.set(C.key,x.mutation.getFieldMask()),Yo(x.mutation,C,x.mutation.getFieldMask(),Un.now())):h.set(C.key,ws.empty())}),this.recalculateAndSaveOverlays(e,c).next(E=>(E.forEach((C,x)=>h.set(C,x)),t.forEach((C,x)=>{var k;return y.set(C,new lD(x,null!==(k=h.get(C))&&void 0!==k?k:null))}),y))}recalculateAndSaveOverlays(e,t){const r=ip();let a=new Pn((h,y)=>h-y),c=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const y of h)y.keys().forEach(E=>{const C=t.get(E);if(null===C)return;let x=r.get(E)||ws.empty();x=y.applyToLocalView(C,x),r.set(E,x);const k=(a.get(y.batchId)||$t()).add(E);a=a.insert(y.batchId,k)})}).next(()=>{const h=[],y=a.getReverseIterator();for(;y.hasNext();){const E=y.getNext(),C=E.key,x=E.value,k=qE();x.forEach(W=>{if(!c.has(W)){const te=e_(t.get(W),r.get(W));null!==te&&k.set(W,te),c=c.add(W)}}),h.push(this.documentOverlayCache.saveOverlays(e,C,k))}return X.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):nw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):X.resolve(Zo());let y=-1,E=c;return h.next(C=>X.forEach(C,(x,k)=>(y<k.largestBatchId&&(y=k.largestBatchId),c.get(x)?X.resolve():this.remoteDocumentCache.getEntry(e,x).next(W=>{E=E.insert(x,W)}))).next(()=>this.populateOverlays(e,C,c)).next(()=>this.computeViews(e,E,C,$t())).next(x=>({batchId:y,changes:WE(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let a=rp();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let c=rp();return this.indexManager.getCollectionParents(e,a).next(h=>X.forEach(h,y=>{const E=(C=t,x=y.child(a),new ja(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(C=>{C.forEach((x,k)=>{c=c.insert(x,k)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a))).next(c=>{a.forEach((y,E)=>{const C=E.getKey();null===c.get(C)&&(c=c.insert(C,Ln.newInvalidDocument(C)))});let h=rp();return c.forEach((y,E)=>{const C=a.get(y);void 0!==C&&Yo(C.mutation,E,ws.empty(),Un.now()),gc(t,E)&&(h=h.insert(y,E))}),h})}}class dD{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return X.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:lr(r.createTime)}),X.resolve()}getNamedQuery(e,t){return X.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Es(r.bundledQuery),readTime:lr(r.readTime)}),X.resolve();var r}}class Oh{constructor(){this.overlays=new Pn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zo();return X.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,c)=>{this.we(e,t,c)}),X.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.ls.get(r);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const a=Zo(),c=t.length+1,h=new Qe(t.child("")),y=this.overlays.getIteratorFrom(h);for(;y.hasNext();){const E=y.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===c&&E.largestBatchId>r&&a.set(E.getKey(),E)}return X.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new Pn((C,x)=>C-x);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=c.get(C.largestBatchId);null===x&&(x=Zo(),c=c.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const y=Zo(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,x)=>y.set(C,x)),!(y.size()>=a)););return X.resolve(y)}we(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const h=this.ls.get(a.largestBatchId).delete(r.key);this.ls.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Hg(t,r));let c=this.ls.get(t);void 0===c&&(c=$t(),this.ls.set(t,c)),this.ls.set(t,c.add(r.key))}}class P_{constructor(){this.fs=new jn(hr.ds),this.ws=new jn(hr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new hr(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new hr(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new nn([])),r=new hr(t,e),a=new hr(t,e+1),c=[];return this.ws.forEachInRange([r,a],h=>{this.ys(h),c.push(h.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new nn([])),r=new hr(t,e),a=new hr(t,e+1);let c=$t();return this.ws.forEachInRange([r,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new hr(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||Lt(e.As,t.As)}static _s(e,t){return Lt(e.As,t.As)||Qe.comparator(e.key,t.key)}}class cm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new jn(hr.ds)}checkEmpty(e){return X.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const c=this.vs;this.vs++;const h=new jg(c,t,r,a);this.mutationQueue.push(h);for(const y of a)this.Rs=this.Rs.add(new hr(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return X.resolve(h)}lookupMutationBatch(e,t){return X.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),c=a<0?0:a;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hr(t,0),a=new hr(t,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([r,a],h=>{const y=this.Ps(h.As);c.push(y)}),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Lt);return t.forEach(a=>{const c=new hr(a,0),h=new hr(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,h],y=>{r=r.add(y.As)})}),X.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;Qe.isDocumentKey(c)||(c=c.child(""));const h=new hr(new Qe(c),0);let y=new jn(Lt);return this.Rs.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===a&&(y=y.add(E.As)),!0)},h),X.resolve(this.Vs(y))}Vs(e){const t=[];return e.forEach(r=>{const a=this.Ps(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){yt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return X.forEach(t.mutations,a=>{const c=new hr(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new hr(t,0),a=this.Rs.firstAfterOrEqual(r);return X.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return X.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sr{constructor(e){this.Ds=e,this.docs=new Pn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,h=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=ts();return t.forEach(a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():Ln.newInvalidDocument(a))}),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let c=ts();const h=t.path,y=new Qe(h.child("")),E=this.docs.getIteratorFrom(y);for(;E.hasNext();){const{key:C,value:{document:x}}=E.getNext();if(!h.isPrefixOf(C.path))break;C.path.length>h.length+1||M0(x0(x),r)<=0||(a.has(x.key)||gc(t,x))&&(c=c.insert(x.key,x.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(e,t,r,a){nt()}Cs(e,t){return X.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ab(this)}getSize(e){return X.resolve(this.size)}}class ab extends jw{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(r)}),X.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Hw{constructor(e){this.persistence=e,this.xs=new Ko(t=>hc(t),Xf),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Ns=0,this.ks=new P_,this.targetCount=0,this.Ms=vc.kn()}forEachTarget(e,t){return this.xs.forEach((r,a)=>t(a)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),X.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new vc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Fn(t),X.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.xs.forEach((h,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.xs.delete(h),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),X.waitFor(c).next(()=>a)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),X.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.ks.containsKey(t))}}class lm{constructor(e,t){this.$s={},this.overlays={},this.Os=new Li(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Hw(this),this.indexManager=new sD,this.remoteDocumentCache=new sr(r=>this.referenceDelegate.Ls(r)),this.serializer=new __(t),this.qs=new dD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new cm(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const a=new hD(this.Os.next());return this.referenceDelegate.Us(),r(a).next(c=>this.referenceDelegate.Ks(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gs(e,t){return X.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class hD extends Ml{constructor(e){super(),this.currentSequenceNumber=e}}class hp{constructor(e){this.persistence=e,this.Qs=new P_,this.js=null}static zs(e){return new hp(e)}get Ws(){if(this.js)return this.js;throw nt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),X.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ws.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Ws,r=>{const a=Qe.fromPath(r);return this.Hs(e,a).next(c=>{c||t.removeEntry(a,_t.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return X.or([()=>X.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Gw{constructor(e){this.serializer=e}O(e,t,r,a){const c=new Cg("createOrUpgrade",t);var y;r<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qf,{unique:!0}),y.createObjectStore("documentMutations"),R_(e),function(y){y.createObjectStore("remoteDocuments")}(e));let h=X.resolve();return r<3&&a>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),R_(e)),h=h.next(()=>function(y){const E=y.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(c))),r<4&&a>=4&&(0!==r&&(h=h.next(()=>function(y,E){return E.store("mutations").j().next(C=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qf,{unique:!0});const x=E.store("mutations"),k=C.map(W=>x.put(W));return X.waitFor(k)})}(e,c))),h=h.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(h=h.next(()=>this.Ys(c))),r<6&&a>=6&&(h=h.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),r<7&&a>=7&&(h=h.next(()=>this.Zs(c))),r<8&&a>=8&&(h=h.next(()=>this.ti(e,c))),r<9&&a>=9&&(h=h.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(h=h.next(()=>this.ei(c))),r<11&&a>=11&&(h=h.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(h=h.next(()=>{!function(y){const E=y.createObjectStore("documentOverlays",{keyPath:By});E.createIndex("collectionPathOverlayIndex",Uy,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",nb,{unique:!1})}(e)})),r<13&&a>=13&&(h=h.next(()=>function(y){const E=y.createObjectStore("remoteDocumentsV14",{keyPath:Oy});E.createIndex("documentKeyIndex",ka),E.createIndex("collectionGroupIndex",Ly)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(h=h.next(()=>this.si(e,c))),r<15&&a>=15&&(h=h.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:tb}).createIndex("sequenceNumberIndex",Ag,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:xg}).createIndex("documentKeyIndex",Vy,{unique:!1})}(e))),h}Xs(e){let t=0;return e.store("remoteDocuments").X((r,a)=>{t+=om(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(a=>X.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",h).next(y=>X.forEach(y,E=>{yt(E.userId===c.userId);const C=Kl(this.serializer,E);return Lw(e,c.userId,C).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return r.X((h,y)=>{const E=new nn(h),C=[0,Fi(E)];c.push(t.get(C).next(x=>x?X.resolve():t.put({targetId:0,path:Fi(E),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>X.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:F0});const r=t.store("collectionParents"),a=new b_,c=h=>{if(a.add(h)){const y=h.lastSegment(),E=h.popLast();return r.put({collectionId:y,parent:Fi(E)})}};return t.store("remoteDocuments").X({Y:!0},(h,y)=>{const E=new nn(h);return c(E.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([h,y,E],C)=>{const x=ao(y);return c(x.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,a)=>{const c=is(a),h=Bs(this.serializer,c);return t.put(h)})}ni(e,t){const r=t.store("remoteDocuments"),a=[];return r.X((c,h)=>{const y=t.store("remoteDocumentsV14"),E=(C=h,C.document?new Qe(nn.fromString(C.document.name).popFirst(5)):C.noDocument?Qe.fromSegments(C.noDocument.path):C.unknownDocument?Qe.fromSegments(C.unknownDocument.path):nt()).path.toArray();var C;const x={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};a.push(y.put(x))}).next(()=>X.waitFor(a))}si(e,t){const r=t.store("mutations"),a=aD(this.serializer),c=new lm(hp.zs,this.serializer.fe);return r.j().next(h=>{const y=new Map;return h.forEach(E=>{var C;let x=null!==(C=y.get(E.userId))&&void 0!==C?C:$t();Kl(this.serializer,E).keys().forEach(k=>x=x.add(k)),y.set(E.userId,x)}),X.forEach(y,(E,C)=>{const x=new Gr(C),k=Nh.de(this.serializer,x),W=c.getIndexManager(x),te=am.de(x,this.serializer,W,c.referenceDelegate);return new $w(a,te,k,W).recalculateAndSaveOverlaysForDocumentKeys(new $0(t,Li.ct),E).next()})})}}function R_(n){n.createObjectStore("targetDocuments",{keyPath:Fy}).createIndex("documentTargetsIndex",eb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",L0,{unique:!0}),n.createObjectStore("targetGlobal")}const k_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class O_{constructor(e,t,r,a,c,h,y,E,C,x,k=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=c,this.window=h,this.document=y,this.ri=C,this.oi=x,this.ui=k,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=W=>Promise.resolve(),!O_.D())throw new be(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ql(this,a),this.di=t+"main",this.serializer=new __(E),this.wi=new Vs(this.di,this.ui,new Gw(this.serializer)),this.Bs=new Vw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=aD(this.serializer),this.qs=new iD,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===x&&Dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(oe.FAILED_PRECONDITION,k_);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Li(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,le.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,le.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,le.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ic(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(uc(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return pp(e).get("owner").next(t=>X.resolve(this.Ri(t)))}Pi(e){return Ic(e).delete(this.clientId)}bi(){var e=this;return(0,le.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=zr(r,"clientMetadata");return a.j().next(c=>{const h=e.Si(c,18e5),y=c.filter(E=>-1===h.indexOf(E));return X.forEach(y,E=>a.delete(E.clientId)).next(()=>y)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?X.resolve(!0):pp(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new be(oe.FAILED_PRECONDITION,k_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ic(e).j().next(r=>void 0===this.Si(r,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,le.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new $0(t,Li.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Ic(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return am.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oD(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Nh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(h=this.ui)?j0:14===h?U0:13===h?B0:12===h?OE:11===h?V0:void nt();var h;let y;return this.wi.runTransaction(e,a,c,E=>(y=new $0(E,this.Os?this.Os.next():Li.ct),"readwrite-primary"===t?this.Ti(y).next(C=>!!C||this.Ei(y)).next(C=>{if(!C)throw Dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new be(oe.FAILED_PRECONDITION,N0);return r(y)}).next(C=>this.vi(y).next(()=>C)):this.Oi(y).next(()=>r(y)))).then(E=>(y.raiseOnCommittedEvent(),E))}Oi(e){return pp(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(oe.FAILED_PRECONDITION,k_)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pp(e).put("owner",t)}static D(){return Vs.D()}Ai(e){const t=pp(e);return t.get("owner").next(r=>this.Ri(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):X.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Ht.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Dr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pp(n){return zr(n,"owner")}function Ic(n){return zr(n,"clientMetadata")}function L_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class F_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=a}static Li(e,t){let r=$t(),a=$t();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new F_(e,t.fromCache,r,a)}}class zw{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,a){return this.Ki(e,t).next(c=>c||this.Gi(e,t,a,r)).next(c=>c||this.Qi(e,t))}Ki(e,t){if(tp(t))return X.resolve(null);let r=gi(t);return this.indexManager.getIndexType(e,r).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=np(t,null,"F"),r=gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const h=$t(...c);return this.Ui.getDocuments(e,h).next(y=>this.indexManager.getMinOffset(e,r).next(E=>{const C=this.ji(t,y);return this.zi(t,C,h,E.readTime)?this.Ki(e,np(t,null,"F")):this.Wi(e,C,t,E)}))})))}Gi(e,t,r,a){return tp(t)||a.isEqual(_t.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(c=>{const h=this.ji(t,c);return this.zi(t,h,r,a)?this.Qi(e,t):(Eg()<=xs.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Eh(t)),this.Wi(e,h,t,NE(a,-1)))})}ji(e,t){let r=new jn(rw(e));return t.forEach((a,c)=>{gc(e,c)&&(r=r.add(c))}),r}zi(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Qi(e,t){return Eg()<=xs.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Eh(t)),this.Ui.getDocumentsMatchingQuery(e,t,Xi.min())}Wi(e,t,r,a){return this.Ui.getDocumentsMatchingQuery(e,r,a).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}class dm{constructor(e,t,r,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Pn(Lt),this.Yi=new Ko(c=>hc(c),Xf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $w(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function V_(n,e,t,r){return new dm(n,e,t,r)}function B_(n,e){return hm.apply(this,arguments)}function hm(){return hm=(0,le.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(c=>(a=c,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const h=[],y=[];let E=$t();for(const C of a){h.push(C.batchId);for(const x of C.mutations)E=E.add(x.key)}for(const C of c){y.push(C.batchId);for(const x of C.mutations)E=E.add(x.key)}return t.localDocuments.getDocuments(r,E).next(C=>({er:C,removedBatchIds:h,addedBatchIds:y}))})})}),hm.apply(this,arguments)}function fD(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),c=t.Zi.newChangeBuffer({trackRemovals:!0});return function(h,y,E,C){const x=E.batch,k=x.keys();let W=X.resolve();return k.forEach(te=>{W=W.next(()=>C.getEntry(y,te)).next(Ie=>{const Be=E.docVersions.get(te);yt(null!==Be),Ie.version.compareTo(Be)<0&&(x.applyToRemoteDocument(Ie,E),Ie.isValidDocument()&&(Ie.setReadTime(E.commitVersion),C.addEntry(Ie)))})}),W.next(()=>h.mutationQueue.removeMutationBatch(y,x))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let y=$t();for(let E=0;E<h.mutationResults.length;++E)h.mutationResults[E].transformResults.length>0&&(y=y.add(h.batch.mutations[E].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function Lh(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function gp(n,e){const t=Ge(n),r=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const y=[];e.targetChanges.forEach((x,k)=>{const W=a.get(k);if(!W)return;y.push(t.Bs.removeMatchingKeys(c,x.removedDocuments,k).next(()=>t.Bs.addMatchingKeys(c,x.addedDocuments,k)));let te=W.withSequenceNumber(c.currentSequenceNumber);var Ie,Be,$e;null!==e.targetMismatches.get(k)?te=te.withResumeToken(Wr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):x.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(x.resumeToken,r)),a=a.insert(k,te),Be=te,$e=x,(0===(Ie=W).resumeToken.approximateByteSize()||Be.snapshotVersion.toMicroseconds()-Ie.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&y.push(t.Bs.updateTargetData(c,te))});let E=ts(),C=$t();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,x))}),y.push(Ww(c,h,e.documentUpdates).next(x=>{E=x.nr,C=x.sr})),!r.isEqual(_t.min())){const x=t.Bs.getLastRemoteSnapshotVersion(c).next(k=>t.Bs.setTargetsMetadata(c,c.currentSequenceNumber,r));y.push(x)}return X.waitFor(y).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,E,C)).next(()=>E)}).then(c=>(t.Ji=a,c))}function Ww(n,e,t){let r=$t(),a=$t();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let h=ts();return t.forEach((y,E)=>{const C=c.get(y);E.isFoundDocument()!==C.isFoundDocument()&&(a=a.add(y)),E.isNoDocument()&&E.version.isEqual(_t.min())?(e.removeEntry(y,E.readTime),h=h.insert(y,E)):!C.isValidDocument()||E.version.compareTo(C.version)>0||0===E.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(E),h=h.insert(y,E)):ke("LocalStore","Ignoring outdated watch update for ",y,". Current version:",C.version," Watch version:",E.version)}),{nr:h,sr:a}})}function pD(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fh(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Bs.getTargetData(r,e).next(c=>c?(a=c,X.resolve(a)):t.Bs.allocateTargetId(r).next(h=>(a=new Ga(e,h,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ji.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Jl(n,e,t){return fm.apply(this,arguments)}function fm(){return fm=(0,le.Z)(function*(n,e,t){const r=Ge(n),a=r.Ji.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!uc(h))throw h;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(a.target)}),fm.apply(this,arguments)}function mp(n,e,t){const r=Ge(n);let a=_t.min(),c=$t();return r.persistence.runTransaction("Execute query","readonly",h=>function(y,E,C){const x=Ge(y),k=x.Yi.get(C);return void 0!==k?X.resolve(x.Ji.get(k)):x.Bs.getTargetData(E,C)}(r,h,gi(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(h,y.targetId).next(E=>{c=E})}).next(()=>r.Hi.getDocumentsMatchingQuery(h,e,t?a:_t.min(),t?c:$t())).next(y=>(Kw(r,Dh(e),y),{documents:y,ir:c})))}function qw(n,e){const t=Ge(n),r=Ge(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>r.le(c,e).next(h=>h?h.target:null))}function U_(n,e){const t=Ge(n),r=t.Xi.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,NE(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Kw(t,e,a),a))}function Kw(n,e,t){let r=n.Xi.get(e)||_t.min();t.forEach((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Xi.set(e,r)}function Zw(){return Zw=(0,le.Z)(function*(n,e,t,r){const a=Ge(n);let c=$t(),h=ts();for(const C of t){const x=e.rr(C.metadata.name);C.document&&(c=c.add(x));const k=e.ur(C);k.setReadTime(e.cr(C.metadata.readTime)),h=h.insert(x,k)}const y=a.Zi.newChangeBuffer({trackRemovals:!0}),E=yield Fh(a,(C=r,gi(fc(nn.fromString(`__bundle__/docs/${C}`)))));var C;return a.persistence.runTransaction("Apply bundle documents","readwrite",C=>Ww(C,y,h).next(x=>(y.apply(C),x)).next(x=>a.Bs.removeMatchingKeysForTargetId(C,E.targetId).next(()=>a.Bs.addMatchingKeys(C,c,E.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(C,x.nr,x.sr)).next(()=>x.nr)))}),Zw.apply(this,arguments)}function ub(n,e){return Yw.apply(this,arguments)}function Yw(){return Yw=(0,le.Z)(function*(n,e,t=$t()){const r=yield Fh(n,gi(Es(e.bundledQuery))),a=Ge(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=lr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return a.qs.saveNamedQuery(c,e);const y=r.withResumeToken(Wr.EMPTY_BYTE_STRING,h);return a.Ji=a.Ji.insert(y.targetId,y),a.Bs.updateTargetData(c,y).next(()=>a.Bs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>a.Bs.addMatchingKeys(c,t,r.targetId)).next(()=>a.qs.saveNamedQuery(c,e))})}),Yw.apply(this,arguments)}function mD(n,e){return`firestore_clients_${n}_${e}`}function j_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Vh(n,e){return`firestore_targets_${n}_${e}`}class pm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static ar(e,t,r){const a=JSON.parse(r);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new be(a.error.code,a.error.message))),h?new pm(e,t,a.state,c):(Dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let a,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(a=new be(r.error.code,r.error.message))),c?new yp(e,r.state,a):(Dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _p{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,c=Xy();for(let h=0;a&&h<r.activeTargetIds.length;++h)a=k0(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return a?new _p(e,c):(Dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Xl{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Xl(t.clientId,t.onlineState):(Dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $_{constructor(){this.activeTargetIds=Xy()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H_{constructor(e,t,r,a,c){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pn(Lt),this.started=!1,this.yr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=mD(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new $_),this.Tr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,le.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const c=e.getItem(mD(e.persistenceKey,a));if(c){const h=_p.ar(a,c);h&&(e.gr=e.gr.insert(h.clientId,h))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const a=e.br(r);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Vh(this.persistenceKey,e));if(r){const a=yp.ar(e,r);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vh(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,le.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const a=t.Or(r.key);return t.Fr(a,null)}{const a=t.Br(r.key,r.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const a=t.Lr(r.key,r.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const a=t.Ur(r.key,r.newValue);if(a)return t.Kr(a)}}else if(r.key===t.vr){if(null!==r.newValue){const a=t.br(r.newValue);if(a)return t.Vr(a)}}else if(r.key===t.Ir){const a=function(c){let h=Li.ct;if(null!=c)try{const y=JSON.parse(c);yt("number"==typeof y),h=y}catch(y){Dr("SharedClientState","Failed to read sequence number from WebStorage",y)}return h}(r.newValue);a!==Li.ct&&t.sequenceNumberHandler(a)}else if(r.key===t.Rr){const a=t.Gr(r.newValue);yield Promise.all(a.map(c=>t.syncEngine.Qr(c)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const a=new pm(this.currentUser,e,t,r),c=j_(this.persistenceKey,this.currentUser,e);this.setItem(c,a.hr())}Cr(e){const t=j_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const a=Vh(this.persistenceKey,e),c=new yp(e,t,r);this.setItem(a,c.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return _p.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),a=Number(r[1]);return pm.ar(new Gr(void 0!==r[2]?r[2]:null),a,t)}Ur(e,t){const r=this.Ar.exec(e),a=Number(r[1]);return yp.ar(a,t)}br(e){return Xl.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),c=this.Sr(r),h=[],y=[];return c.forEach(E=>{a.has(E)||h.push(E)}),a.forEach(E=>{c.has(E)||y.push(E)}),this.syncEngine.Wr(h,y).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Xy();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Qw{constructor(){this.Hr=new $_,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new $_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yD{Yr(e){}shutdown(){}}class Jw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vp=null;function G_(){return null===vp?vp=268435456+Math.round(2147483648*Math.random()):vp++,"0x"+vp.toString(16)}const _D={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wp{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const vi="WebChannelConnection";class Xw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,a,c){const h=G_(),y=this.To(e,t);ke("RestConnection",`Sending RPC '${e}' ${h}:`,y,r);const E={};return this.Eo(E,a,c),this.Ao(e,y,E,r).then(C=>(ke("RestConnection",`Received RPC '${e}' ${h}: `,C),C),C=>{throw vs("RestConnection",`RPC '${e}' ${h} failed with error: `,C,"url: ",y,"request:",r),C})}vo(e,t,r,a,c,h){return this.Io(e,t,r,a,c)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),r&&r.headers.forEach((a,c)=>e[c]=a)}To(e,t){return`${this.mo}/v1/${t}:${_D[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,a){const c=G_();return new Promise((h,y)=>{const E=new TE;E.setWithCredentials(!0),E.listenOnce(IE.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case Cy.NO_ERROR:const x=E.getResponseJson();ke(vi,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),h(x);break;case Cy.TIMEOUT:ke(vi,`RPC '${e}' ${c} timed out`),y(new be(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Cy.HTTP_ERROR:const k=E.getStatus();if(ke(vi,`RPC '${e}' ${c} failed with status:`,k,"response text:",E.getResponseText()),k>0){let W=E.getResponseJson();Array.isArray(W)&&(W=W[0]);const te=W?.error;if(te&&te.status&&te.message){const Ie=function(Be){const $e=Be.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf($e)>=0?$e:oe.UNKNOWN}(te.status);y(new be(Ie,te.message))}else y(new be(oe.UNKNOWN,"Server responded with status "+E.getStatus()))}else y(new be(oe.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{ke(vi,`RPC '${e}' ${c} completed.`)}});const C=JSON.stringify(a);ke(vi,`RPC '${e}' ${c} sending request:`,a),E.send(t,"POST",C,r,15)})}Ro(e,t,r){const a=G_(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=by(),y=Hf(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(E.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(E.xmlHttpFactory=new DE({})),this.Eo(E.initMessageHeaders,t,r),E.encodeInitMessageHeaders=!0;const x=c.join("");ke(vi,`Creating RPC '${e}' stream ${a}: ${x}`,E);const k=h.createWebChannel(x,E);let W=!1,te=!1;const Ie=new wp({ro:$e=>{te?ke(vi,`Not sending because RPC '${e}' stream ${a} is closed:`,$e):(W||(ke(vi,`Opening RPC '${e}' stream ${a} transport.`),k.open(),W=!0),ke(vi,`RPC '${e}' stream ${a} sending:`,$e),k.send($e))},oo:()=>k.close()}),Be=($e,Ct,Ft)=>{$e.listen(Ct,Nt=>{try{Ft(Nt)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return Be(k,Ig.EventType.OPEN,()=>{te||ke(vi,`RPC '${e}' stream ${a} transport opened.`)}),Be(k,Ig.EventType.CLOSE,()=>{te||(te=!0,ke(vi,`RPC '${e}' stream ${a} transport closed`),Ie.wo())}),Be(k,Ig.EventType.ERROR,$e=>{te||(te=!0,vs(vi,`RPC '${e}' stream ${a} transport errored:`,$e),Ie.wo(new be(oe.UNAVAILABLE,"The operation could not be completed")))}),Be(k,Ig.EventType.MESSAGE,$e=>{var Ct;if(!te){const Ft=$e.data[0];yt(!!Ft);const Nt=Ft,Bt=Nt.error||(null===(Ct=Nt[0])||void 0===Ct?void 0:Ct.error);if(Bt){ke(vi,`RPC '${e}' stream ${a} received error:`,Bt);const Wt=Bt.status;let sn=function(zp){const AC=cr[zp];if(void 0!==AC)return fw(AC)}(Wt),os=Bt.message;void 0===sn&&(sn=oe.INTERNAL,os="Unknown error status: "+Wt+" with message "+Bt.message),te=!0,Ie.wo(new be(sn,os)),k.close()}else ke(vi,`RPC '${e}' stream ${a} received:`,Ft),Ie._o(Ft)}}),Be(y,EE.STAT_EVENT,$e=>{$e.stat===D0.PROXY?ke(vi,`RPC '${e}' stream ${a} detected buffering proxy`):$e.stat===D0.NOPROXY&&ke(vi,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Ie.fo()},0),Ie}}function eI(){return typeof window<"u"?window:null}function Ip(){return typeof document<"u"?document:null}function Ep(n){return new yw(n,!0)}class gm{constructor(e,t,r=1e3,a=1.5,c=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=a,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-r);a>0&&ke("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class tI{constructor(e,t,r,a,c,h,y,E){this.ii=e,this.$o=r,this.Oo=a,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=E,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new gm(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,le.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,le.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,le.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Fo===t&&this.Zo(r,a)},r=>{e(()=>{const a=new be(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(a)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{r(()=>this.tu(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,le.Z)(function*(){e.state=0,e.start()}))}tu(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z_ extends tI{constructor(e,t,r,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,h),this.serializer=c}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function sb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:nt(),a=e.targetChange.targetIds||[],c=function(E,C){return E.useProto3Json?(yt(void 0===C||"string"==typeof C),Wr.fromBase64String(C||"")):(yt(void 0===C||C instanceof Uint8Array),Wr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&function(E){const C=void 0===E.code?oe.UNKNOWN:fw(E.code);return new be(C,E.message||"")}(h);t=new r_(r,a,c,y||null)}else if("documentChange"in e){const r=e.documentChange,a=po(n,r.document.name),c=lr(r.document.updateTime),h=r.document.createTime?lr(r.document.createTime):_t.min(),y=new ai({mapValue:{fields:r.document.fields}}),E=Ln.newFoundDocument(a,c,h,y);t=new xh(r.targetIds||[],r.removedTargetIds||[],E.key,E)}else if("documentDelete"in e){const r=e.documentDelete,a=po(n,r.document),c=r.readTime?lr(r.readTime):_t.min(),h=Ln.newNoDocument(a,c);t=new xh([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,a=po(n,r.document);t=new xh([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return nt();{const r=e.filter,{count:a=0,unchangedNames:c}=r,h=new dw(a,c);t=new qg(r.targetId,h)}}var E;return t}(this.serializer,e),r=function(a){if(!("targetChange"in a))return _t.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?_t.min():c.readTime?lr(c.readTime):_t.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Mh(this.serializer),t.addTarget=function(a,c){let h;const y=c.target;if(h=Rg(y)?{documents:ww(a,y)}:{query:dr(a,y)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=u_(a,c.resumeToken);const E=Kg(a,c.expectedCount);null!==E&&(h.expectedCount=E)}else if(c.snapshotVersion.compareTo(_t.min())>0){h.readTime=zl(a,c.snapshotVersion.toTimestamp());const E=Kg(a,c.expectedCount);null!==E&&(h.expectedCount=E)}return h}(this.serializer,e);const r=function tD(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Mh(this.serializer),t.removeTarget=e,this.Wo(t)}}class vD extends tI{constructor(e,t,r,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,h),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function vw(n,e){return n&&n.length>0?(yt(void 0!==e),n.map(t=>function(r,a){let c=lr(r.updateTime?r.updateTime:a);return c.isEqual(_t.min())&&(c=lr(a)),new mi(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.cu(r,t)}return yt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Mh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ap(this.serializer,r))};this.Wo(t)}}class nI extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new be(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Io(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(oe.UNKNOWN,a.toString())})}vo(e,t,r,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.vo(e,t,r,c,h,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(oe.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class wD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Dr(t),this.mu=!1):ke("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ID{constructor(e,t,r,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(y=>{r.enqueueAndForget((0,le.Z)(function*(){var E;Ec(h)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,le.Z)(function*(C){const x=Ge(C);x.vu.add(4),yield td(x),x.bu.set("Unknown"),x.vu.delete(4),yield ed(x)}),function(C){return E.apply(this,arguments)})(h))}))}),this.bu=new wD(r,a)}}function ed(n){return q_.apply(this,arguments)}function q_(){return q_=(0,le.Z)(function*(n){if(Ec(n))for(const e of n.Ru)yield e(!0)}),q_.apply(this,arguments)}function td(n){return K_.apply(this,arguments)}function K_(){return K_=(0,le.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),K_.apply(this,arguments)}function mm(n,e){const t=Ge(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Q_(t)?Y_(t):rd(t).Ko()&&Z_(t,e))}function Dp(n,e){const t=Ge(n),r=rd(t);t.Au.delete(e),r.Ko()&&iI(t,e),0===t.Au.size&&(r.Ko()?r.jo():Ec(t)&&t.bu.set("Unknown"))}function Z_(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rd(n).su(e)}function iI(n,e){n.Vu.qt(e),rd(n).iu(e)}function Y_(n){n.Vu=new s_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),rd(n).start(),n.bu.gu()}function Q_(n){return Ec(n)&&!rd(n).Uo()&&n.Au.size>0}function Ec(n){return 0===Ge(n).vu.size}function J_(n){n.Vu=void 0}function sI(n){return X_.apply(this,arguments)}function X_(){return X_=(0,le.Z)(function*(n){n.Au.forEach((e,t)=>{Z_(n,e)})}),X_.apply(this,arguments)}function ED(n,e){return ym.apply(this,arguments)}function ym(){return ym=(0,le.Z)(function*(n,e){J_(n),Q_(n)?(n.bu.Iu(e),Y_(n)):n.bu.set("Unknown")}),ym.apply(this,arguments)}function DD(n,e,t){return ev.apply(this,arguments)}function ev(){return ev=(0,le.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof r_&&2===e.state&&e.cause)try{yield(r=(0,le.Z)(function*(a,c){const h=c.cause;for(const y of c.targetIds)a.Au.has(y)&&(yield a.remoteSyncer.rejectListen(y,h),a.Au.delete(y),a.Vu.removeTarget(y))}),function(a,c){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _m(n,r)}else if(e instanceof xh?n.Vu.Ht(e):e instanceof qg?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(_t.min()))try{const r=yield Lh(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const h=a.Vu.ce(c);return h.targetChanges.forEach((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const C=a.Au.get(E);C&&a.Au.set(E,C.withResumeToken(y.resumeToken,c))}}),h.targetMismatches.forEach((y,E)=>{const C=a.Au.get(y);if(!C)return;a.Au.set(y,C.withResumeToken(Wr.EMPTY_BYTE_STRING,C.snapshotVersion)),iI(a,y);const x=new Ga(C.target,y,E,C.sequenceNumber);Z_(a,x)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield _m(n,r)}var r}),ev.apply(this,arguments)}function _m(n,e,t){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,le.Z)(function*(n,e,t){if(!uc(e))throw e;n.vu.add(1),yield td(n),n.bu.set("Offline"),t||(t=()=>Lh(n.localStore)),n.asyncQueue.enqueueRetryable((0,le.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield ed(n)}))}),Tp.apply(this,arguments)}function vm(n,e){return e().catch(t=>_m(n,t,e))}function nd(n){return bp.apply(this,arguments)}function bp(){return bp=(0,le.Z)(function*(n){const e=Ge(n),t=Ka(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;TD(e);)try{const a=yield pD(e.localStore,r);if(null===a){0===e.Eu.length&&t.jo();break}r=a.batchId,bD(e,a)}catch(a){yield _m(e,a)}wm(e)&&oI(e)}),bp.apply(this,arguments)}function TD(n){return Ec(n)&&n.Eu.length<10}function bD(n,e){n.Eu.push(e);const t=Ka(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function wm(n){return Ec(n)&&!Ka(n).Uo()&&n.Eu.length>0}function oI(n){Ka(n).start()}function CD(n){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,le.Z)(function*(n){Ka(n).hu()}),Dc.apply(this,arguments)}function SD(n){return tv.apply(this,arguments)}function tv(){return tv=(0,le.Z)(function*(n){const e=Ka(n);for(const t of n.Eu)e.uu(t.mutations)}),tv.apply(this,arguments)}function cb(n,e,t){return Im.apply(this,arguments)}function Im(){return Im=(0,le.Z)(function*(n,e,t){const r=n.Eu.shift(),a=$g.from(r,e,t);yield vm(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield nd(n)}),Im.apply(this,arguments)}function nv(n,e){return rv.apply(this,arguments)}function rv(){return rv=(0,le.Z)(function*(n,e){var t;e&&Ka(n).ou&&(yield(t=(0,le.Z)(function*(r,a){if(hw(c=a.code)&&c!==oe.ABORTED){const h=r.Eu.shift();Ka(r).Qo(),yield vm(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield nd(r)}var c}),function(r,a){return t.apply(this,arguments)})(n,e)),wm(n)&&oI(n)}),rv.apply(this,arguments)}function iv(n,e){return sv.apply(this,arguments)}function sv(){return sv=(0,le.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Ec(t);t.vu.add(3),yield td(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield ed(t)}),sv.apply(this,arguments)}function ov(n,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,le.Z)(function*(n,e){const t=Ge(n);e?(t.vu.delete(2),yield ed(t)):e||(t.vu.add(2),yield td(t),t.bu.set("Unknown"))}),Cp.apply(this,arguments)}function rd(n){return n.Su||(n.Su=function(e,t,r){const a=Ge(e);return a.fu(),new z_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{uo:sI.bind(null,n),ao:ED.bind(null,n),nu:DD.bind(null,n)}),n.Ru.push(function(){var e=(0,le.Z)(function*(t){t?(n.Su.Qo(),Q_(n)?Y_(n):n.bu.set("Unknown")):(yield n.Su.stop(),J_(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Ka(n){return n.Du||(n.Du=function(e,t,r){const a=Ge(e);return a.fu(),new vD(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{uo:CD.bind(null,n),ao:nv.bind(null,n),au:SD.bind(null,n),cu:cb.bind(null,n)}),n.Ru.push(function(){var e=(0,le.Z)(function*(t){t?(n.Du.Qo(),yield nd(n)):(yield n.Du.stop(),n.Eu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Em{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,a,c){const h=Date.now()+r,y=new Em(e,t,h,a,c);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function id(n,e){if(Dr("AsyncQueue",`${e}: ${n}`),uc(n))return new be(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class Bh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=rp(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new Bh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Bh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class aI{constructor(){this.Cu=new Pn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):nt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Uh{constructor(e,t,r,a,c,h,y,E,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=E,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,a,c){const h=[];return t.forEach(y=>{h.push({type:0,doc:y})}),new Uh(e,t,Bh.emptySet(t),h,r,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class AD{constructor(){this.Nu=void 0,this.listeners=[]}}class uI{constructor(){this.queries=new Ko(e=>qo(e),Fl),this.onlineState="Unknown",this.ku=new Set}}function cI(n,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,le.Z)(function*(n,e){const t=Ge(n),r=e.query;let a=!1,c=t.queries.get(r);if(c||(a=!0,c=new AD),a)try{c.Nu=yield t.onListen(r)}catch(h){const y=id(h,`Initialization of query '${Eh(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,c),c.listeners.push(e),e.Mu(t.onlineState),c.Nu&&e.$u(c.Nu)&&cv(t)}),Dm.apply(this,arguments)}function av(n,e){return uv.apply(this,arguments)}function uv(){return uv=(0,le.Z)(function*(n,e){const t=Ge(n),r=e.query;let a=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),a=0===c.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)}),uv.apply(this,arguments)}function lb(n,e){const t=Ge(n);let r=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const y of h.listeners)y.$u(a)&&(r=!0);h.Nu=a}}r&&cv(t)}function db(n,e,t){const r=Ge(n),a=r.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);r.queries.delete(e)}function cv(n){n.ku.forEach(e=>{e.next()})}class lv{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new Uh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Uh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class xD{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class lI{constructor(e){this.serializer=e}rr(e){return po(this.serializer,e)}ur(e){return e.metadata.exists?p_(this.serializer,e.document,!1):Ln.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return lr(e)}}class MD{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dI(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=nn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new lI(this.serializer);for(const a of e)if(a.metadata.queries){const c=r.rr(a.metadata.name);for(const h of a.metadata.queries){const y=(t.get(h)||$t()).add(c);t.set(h,y)}}return t}complete(){var e=this;return(0,le.Z)(function*(){const t=yield function gD(n,e,t,r){return Zw.apply(this,arguments)}(e.localStore,new lI(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const a of e.queries)yield ub(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function dI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class hI{constructor(e){this.key=e}}class fI{constructor(e){this.key=e}}class pI{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=$t(),this.mutatedKeys=$t(),this.tc=rw(e),this.ec=new Bh(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new aI,a=t?t.ec:this.ec;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,y=!1;const E="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,C="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((x,k)=>{const W=a.get(x),te=gc(this.query,k)?k:null,Ie=!!W&&this.mutatedKeys.has(W.key),Be=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let $e=!1;W&&te?W.data.isEqual(te.data)?Ie!==Be&&(r.track({type:3,doc:te}),$e=!0):this.rc(W,te)||(r.track({type:2,doc:te}),$e=!0,(E&&this.tc(te,E)>0||C&&this.tc(te,C)<0)&&(y=!0)):!W&&te?(r.track({type:0,doc:te}),$e=!0):W&&!te&&(r.track({type:1,doc:W}),$e=!0,(E||C)&&(y=!0)),$e&&(te?(h=h.add(te),c=Be?c.add(x):c.delete(x)):(h=h.delete(x),c=c.delete(x)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const x="F"===this.query.limitType?h.last():h.first();h=h.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{ec:h,ic:r,zi:y,mutatedKeys:c}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((C,x)=>function(k,W){const te=Ie=>{switch(Ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return te(k)-te(W)}(C.type,x.type)||this.tc(C.doc,x.doc)),this.oc(r);const h=t?this.uc():[],y=0===this.Zu.size&&this.current?1:0,E=y!==this.Xu;return this.Xu=y,0!==c.length||E?{snapshot:new Uh(this.query,e.ec,a,c,e.mutatedKeys,0===y,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:h}:{cc:h}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new aI,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=$t(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new fI(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new hI(r))}),t}hc(e){this.Yu=e.ir,this.Zu=$t();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Uh.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class ND{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PD{constructor(e){this.key=e,this.fc=!1}}class RD{constructor(e,t,r,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.dc={},this.wc=new Ko(y=>qo(y),Fl),this._c=new Map,this.mc=new Set,this.gc=new Pn(Qe.comparator),this.yc=new Map,this.Ic=new P_,this.Tc={},this.Ec=new Map,this.Ac=vc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Sp(n,e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,le.Z)(function*(n,e){const t=Dv(n);let r,a;const c=t.wc.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),a=c.view.lc();else{const h=yield Fh(t.localStore,gi(e)),y=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,a=yield bm(t,e,r,"current"===y,h.resumeToken),t.isPrimaryClient&&mm(t.remoteStore,h)}return a}),Tm.apply(this,arguments)}function bm(n,e,t,r,a){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,le.Z)(function*(n,e,t,r,a){n.Rc=(k,W,te)=>{return(Ie=(0,le.Z)(function*(Be,$e,Ct,Ft){let Nt=$e.view.sc(Ct);Nt.zi&&(Nt=yield mp(Be.localStore,$e.query,!1).then(({documents:sn})=>$e.view.sc(sn,Nt)));const Bt=Ft&&Ft.targetChanges.get($e.targetId),Wt=$e.view.applyChanges(Nt,Be.isPrimaryClient,Bt);return gv(Be,$e.targetId,Wt.cc),Wt.snapshot}),function(Be,$e,Ct,Ft){return Ie.apply(this,arguments)})(n,k,W,te);var Ie};const c=yield mp(n.localStore,e,!0),h=new pI(e,c.ir),y=h.sc(c.documents),E=op.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,a),C=h.applyChanges(y,n.isPrimaryClient,E);gv(n,t,C.cc);const x=new ND(e,t,h);return n.wc.set(e,x),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),C.snapshot}),Cm.apply(this,arguments)}function gI(n,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,le.Z)(function*(n,e){const t=Ge(n),r=t.wc.get(e),a=t._c.get(r.targetId);if(a.length>1)return t._c.set(r.targetId,a.filter(c=>!Fl(c,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Dp(t.remoteStore,r.targetId),jh(t,r.targetId)}).catch(ac))):(jh(t,r.targetId),yield Jl(t.localStore,r.targetId,!0))}),Sm.apply(this,arguments)}function dv(){return dv=(0,le.Z)(function*(n,e,t){const r=Tv(n);try{const a=yield function(c,h){const y=Ge(c),E=Un.now(),C=h.reduce((W,te)=>W.add(te.key),$t());let x,k;return y.persistence.runTransaction("Locally write mutations","readwrite",W=>{let te=ts(),Ie=$t();return y.Zi.getEntries(W,C).next(Be=>{te=Be,te.forEach(($e,Ct)=>{Ct.isValidDocument()||(Ie=Ie.add($e))})}).next(()=>y.localDocuments.getOverlayedDocuments(W,te)).next(Be=>{x=Be;const $e=[];for(const Ct of h){const Ft=Sh(Ct,x.get(Ct.key).overlayedDocument);null!=Ft&&$e.push(new rs(Ct.key,Ft,Gy(Ft.value.mapValue),gn.exists(!0)))}return y.mutationQueue.addMutationBatch(W,E,$e,h)}).next(Be=>{k=Be;const $e=Be.applyToLocalDocumentSet(x,Ie);return y.documentOverlayCache.saveOverlays(W,Be.batchId,$e)})}).then(()=>({batchId:k.batchId,changes:WE(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,h,y){let E=c.Tc[c.currentUser.toKey()];E||(E=new Pn(Lt)),E=E.insert(h,y),c.Tc[c.currentUser.toKey()]=E}(r,a.batchId,t),yield Ya(r,a.changes),yield nd(r.remoteStore)}catch(a){const c=id(a,"Failed to persist write");t.reject(c)}}),dv.apply(this,arguments)}function OD(n,e){return hv.apply(this,arguments)}function hv(){return hv=(0,le.Z)(function*(n,e){const t=Ge(n);try{const r=yield gp(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.yc.get(c);h&&(yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.fc=!0:a.modifiedDocuments.size>0?yt(h.fc):a.removedDocuments.size>0&&(yt(h.fc),h.fc=!1))}),yield Ya(t,r,e)}catch(r){yield ac(r)}}),hv.apply(this,arguments)}function mI(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.wc.forEach((c,h)=>{const y=h.view.Mu(e);y.snapshot&&a.push(y.snapshot)}),function(c,h){const y=Ge(c);y.onlineState=h;let E=!1;y.queries.forEach((C,x)=>{for(const k of x.listeners)k.Mu(h)&&(E=!0)}),E&&cv(y)}(r.eventManager,e),a.length&&r.dc.nu(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function LD(n,e,t){return fv.apply(this,arguments)}function fv(){return fv=(0,le.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.yc.get(e),c=a&&a.key;if(c){let h=new Pn(Qe.comparator);h=h.insert(c,Ln.newNoDocument(c,_t.min()));const y=$t().add(c),E=new Gl(_t.min(),new Map,new Pn(Lt),h,y);yield OD(r,E),r.gc=r.gc.remove(c),r.yc.delete(e),$h(r)}else yield Jl(r.localStore,e,!1).then(()=>jh(r,e,t)).catch(ac)}),fv.apply(this,arguments)}function FD(n,e){return sd.apply(this,arguments)}function sd(){return sd=(0,le.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const a=yield fD(t.localStore,e);od(t,r,null),xp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ya(t,a)}catch(a){yield ac(a)}}),sd.apply(this,arguments)}function VD(n,e,t){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,le.Z)(function*(n,e,t){const r=Ge(n);try{const a=yield function(c,h){const y=Ge(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return y.mutationQueue.lookupMutationBatch(E,h).next(x=>(yt(null!==x),C=x.keys(),y.mutationQueue.removeMutationBatch(E,x))).next(()=>y.mutationQueue.performConsistencyCheck(E)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(E,C,h)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,C)).next(()=>y.localDocuments.getDocuments(E,C))})}(r.localStore,e);od(r,e,t),xp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ya(r,a)}catch(a){yield ac(a)}}),Ap.apply(this,arguments)}function pv(){return pv=(0,le.Z)(function*(n,e){const t=Ge(n);Ec(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=Ge(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>h.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const a=t.Ec.get(r)||[];a.push(e),t.Ec.set(r,a)}catch(r){const a=id(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),pv.apply(this,arguments)}function xp(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function od(n,e,t){const r=Ge(n);let a=r.Tc[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.Tc[r.currentUser.toKey()]=a}}function jh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||yI(n,r)})}function yI(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Dp(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),$h(n))}function gv(n,e,t){for(const r of t)r instanceof hI?(n.Ic.addReference(r.key,e),Am(n,r)):r instanceof fI?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||yI(n,r.key)):nt()}function Am(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.mc.add(r),$h(n))}function $h(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(nn.fromString(e)),r=n.Ac.next();n.yc.set(r,new PD(t)),n.gc=n.gc.insert(t,r),mm(n.remoteStore,new Ga(gi(fc(t.path)),r,"TargetPurposeLimboResolution",Li.ct))}}function Ya(n,e,t){return mv.apply(this,arguments)}function mv(){return mv=(0,le.Z)(function*(n,e,t){const r=Ge(n),a=[],c=[],h=[];var y;r.wc.isEmpty()||(r.wc.forEach((y,E)=>{h.push(r.Rc(E,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C?.fromCache?"not-current":"current"),C){a.push(C);const x=F_.Li(E.targetId,C);c.push(x)}}))}),yield Promise.all(h),r.dc.nu(a),yield(y=(0,le.Z)(function*(E,C){const x=Ge(E);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>X.forEach(C,W=>X.forEach(W.Fi,te=>x.persistence.referenceDelegate.addReference(k,W.targetId,te)).next(()=>X.forEach(W.Bi,te=>x.persistence.referenceDelegate.removeReference(k,W.targetId,te)))))}catch(k){if(!uc(k))throw k;ke("LocalStore","Failed to update sequence numbers: "+k)}for(const k of C){const W=k.targetId;if(!k.fromCache){const te=x.Ji.get(W),Be=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);x.Ji=x.Ji.insert(W,Be)}}}),function(E,C){return y.apply(this,arguments)})(r.localStore,c))}),mv.apply(this,arguments)}function _I(n,e){return xm.apply(this,arguments)}function xm(){return xm=(0,le.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield B_(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(h=>{h.forEach(y=>{y.reject(new be(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ya(t,r.er)}var a}),xm.apply(this,arguments)}function yv(n,e){const t=Ge(n),r=t.yc.get(e);if(r&&r.fc)return $t().add(r.key);{let a=$t();const c=t._c.get(e);if(!c)return a;for(const h of c){const y=t.wc.get(h);a=a.unionWith(y.view.nc)}return a}}function vI(n,e){return _v.apply(this,arguments)}function _v(){return _v=(0,le.Z)(function*(n,e){const t=Ge(n),r=yield mp(t.localStore,e.query,!0),a=e.view.hc(r);return t.isPrimaryClient&&gv(t,e.targetId,a.cc),a}),_v.apply(this,arguments)}function BD(n,e){return wI.apply(this,arguments)}function wI(){return wI=(0,le.Z)(function*(n,e){const t=Ge(n);return U_(t.localStore,e).then(r=>Ya(t,r))}),wI.apply(this,arguments)}function vv(n,e,t,r){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,le.Z)(function*(n,e,t,r){const a=Ge(n),c=yield function(h,y){const E=Ge(h),C=Ge(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.Sn(x,y).next(k=>k?E.localDocuments.getDocuments(x,k):X.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield nd(a.remoteStore):"acknowledged"===t||"rejected"===t?(od(a,e,r||null),xp(a,e),y=e,Ge(Ge(a.localStore).mutationQueue).Cn(y)):nt(),yield Ya(a,c)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Mp.apply(this,arguments)}function Np(){return Np=(0,le.Z)(function*(n,e){const t=Ge(n);if(Dv(t),Tv(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield Mm(t,r.toArray());t.vc=!0,yield ov(t.remoteStore,!0);for(const c of a)mm(t.remoteStore,c)}else if(!1===e&&!1!==t.vc){const r=[];let a=Promise.resolve();t._c.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):a=a.then(()=>(jh(t,h),Jl(t.localStore,h,!0))),Dp(t.remoteStore,h)}),yield a,yield Mm(t,r),function(c){const h=Ge(c);h.yc.forEach((y,E)=>{Dp(h.remoteStore,E)}),h.Ic.Ts(),h.yc=new Map,h.gc=new Pn(Qe.comparator)}(t),t.vc=!1,yield ov(t.remoteStore,!1)}}),Np.apply(this,arguments)}function Mm(n,e,t){return wv.apply(this,arguments)}function wv(){return wv=(0,le.Z)(function*(n,e,t){const r=Ge(n),a=[],c=[];for(const h of e){let y;const E=r._c.get(h);if(E&&0!==E.length){y=yield Fh(r.localStore,gi(E[0]));for(const C of E){const x=r.wc.get(C),k=yield vI(r,x);k.snapshot&&c.push(k.snapshot)}}else{const C=yield qw(r.localStore,h);y=yield Fh(r.localStore,C),yield bm(r,EI(C),h,!1,y.resumeToken)}a.push(y)}return r.dc.nu(c),a}),wv.apply(this,arguments)}function EI(n){return ep(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function UD(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).$i()}function jD(n,e,t,r){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,le.Z)(function*(n,e,t,r){const a=Ge(n);if(a.vc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const c=a._c.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const h=yield U_(a.localStore,Dh(c[0])),y=Gl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Wr.EMPTY_BYTE_STRING);yield Ya(a,h,y);break}case"rejected":yield Jl(a.localStore,e,!0),jh(a,e,r);break;default:nt()}}),Nm.apply(this,arguments)}function Iv(n,e,t){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,le.Z)(function*(n,e,t){const r=Dv(n);if(r.vc){for(const a of e){if(r._c.has(a)){ke("SyncEngine","Adding an already active target "+a);continue}const c=yield qw(r.localStore,a),h=yield Fh(r.localStore,c);yield bm(r,EI(c),h.targetId,!1,h.resumeToken),mm(r.remoteStore,h)}for(const a of t)r._c.has(a)&&(yield Jl(r.localStore,a,!1).then(()=>{Dp(r.remoteStore,a),jh(r,a)}).catch(ac))}}),Ev.apply(this,arguments)}function Dv(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LD.bind(null,e),e.dc.nu=lb.bind(null,e.eventManager),e.dc.Pc=db.bind(null,e.eventManager),e}function Tv(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VD.bind(null,e),e}class Pp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,le.Z)(function*(){t.serializer=Ep(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return V_(this.persistence,new zw,e.initialUser,this.serializer)}createPersistence(e){return new lm(hp.zs,this.serializer)}createSharedClientState(e){return new Qw}terminate(){var e=this;return(0,le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Pm extends Pp{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Tv(r.Vc.syncEngine),yield nd(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return V_(this.persistence,new zw,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new x_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new R0(t,this.persistence);return new P0(e.asyncQueue,r)}createPersistence(e){const t=L_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?_i.withCacheSize(this.cacheSizeBytes):_i.DEFAULT;return new O_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eI(),Ip(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Qw}}class TI extends Pm{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e);const a=r.Vc.syncEngine;r.sharedClientState instanceof H_&&(r.sharedClientState.syncEngine={jr:vv.bind(null,a),zr:jD.bind(null,a),Wr:Iv.bind(null,a),$i:UD.bind(null,a),Qr:BD.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var c=(0,le.Z)(function*(h){yield function II(n,e){return Np.apply(this,arguments)}(r.Vc.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=eI();if(!H_.D(t))throw new be(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=L_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new H_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ad{initialize(e,t){var r=this;return(0,le.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>mI(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=_I.bind(null,r.syncEngine),yield ov(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new uI}createDatastore(e){const t=Ep(e.databaseInfo.databaseId),r=new Xw(e.databaseInfo);return new nI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,c=y=>mI(this.syncEngine,y,0),h=Jw.D()?new Jw:new yD,new ID(t,r,a,c,h);var t,r,a,c,h}createSyncEngine(e,t){return function(r,a,c,h,y,E,C){const x=new RD(r,a,c,h,y,E);return C&&(x.vc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,le.Z)(function*(t){const r=Ge(t);ke("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield td(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bI(n,e=10240){let t=0;return{read:()=>(0,le.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Kr{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Hh{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Or,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,le.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,le.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,le.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),a=Number(r);isNaN(a)&&e.Mc(`length string (${r}) is not valid number`);const c=yield e.$c(a);return new xD(JSON.parse(c),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,le.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,le.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,le.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class HD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new be(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,le.Z)(function*(c,h){const y=Ge(c),E=Mh(y.serializer)+"/documents",C={documents:h.map(te=>Wl(y.serializer,te))},x=yield y.vo("BatchGetDocuments",E,C,h.length),k=new Map;x.forEach(te=>{const Ie=function _w(n,e){return"found"in e?function(t,r){yt(!!r.found);const a=po(t,r.found.name),c=lr(r.found.updateTime),h=r.found.createTime?lr(r.found.createTime):_t.min(),y=new ai({mapValue:{fields:r.found.fields}});return Ln.newFoundDocument(a,c,h,y)}(n,e):"missing"in e?function(t,r){yt(!!r.missing),yt(!!r.readTime);const a=po(t,r.missing),c=lr(r.readTime);return Ln.newNoDocument(a,c)}(n,e):nt()}(y.serializer,te);k.set(Ie.key.toString(),Ie)});const W=[];return h.forEach(te=>{const Ie=k.get(te.toString());yt(!!Ie),W.push(Ie)}),W}),function(c,h){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const c=Qe.fromPath(a);e.mutations.push(new Ug(c,e.precondition(c)))}),yield(r=(0,le.Z)(function*(a,c){const h=Ge(a),y=Mh(h.serializer)+"/documents",E={writes:c.map(C=>ap(h.serializer,C))};yield h.Io("Commit",y,E)}),function(a,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new be(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_t.min())?gn.exists(!1):gn.updateTime(t):gn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new be(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gn.updateTime(t)}return gn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class GD{constructor(e,t,r,a,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=c,this.Bc=r.maxAttempts,this.qo=new gm(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,le.Z)(function*(){const t=new HD(e.datastore),r=e.qc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Uc(c)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Sg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!hw(t)}return!1}}class hb{constructor(e,t,r,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Gr.UNAUTHENTICATED,this.clientId=Ay.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,le.Z)(function*(y){ke("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(ke("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=id(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function bv(n,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,le.Z)(function*(c){r.isEqual(c)||(yield B_(e.localStore,c),r=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Rm.apply(this,arguments)}function km(n,e){return ud.apply(this,arguments)}function ud(){return ud=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Rp(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>iv(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>iv(e.remoteStore,c)),n._onlineComponents=e}),ud.apply(this,arguments)}function CI(n){return"FirebaseError"===n.name?n.code===oe.FAILED_PRECONDITION||n.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Rp(n){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,le.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!CI(t))throw t;vs("Error using user provided cache. Falling back to memory cache: "+t),yield bv(n,new Pp)}}else ke("FirestoreClient","Using default OfflineComponentProvider"),yield bv(n,new Pp);return n._offlineComponents}),Cv.apply(this,arguments)}function kp(n){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,le.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield km(n,n._uninitializedComponentsProvider._online)):(ke("FirestoreClient","Using default OnlineComponentProvider"),yield km(n,new ad))),n._onlineComponents}),Sv.apply(this,arguments)}function SI(n){return Rp(n).then(e=>e.persistence)}function Om(n){return Rp(n).then(e=>e.localStore)}function Lm(n){return kp(n).then(e=>e.remoteStore)}function Fm(n){return kp(n).then(e=>e.syncEngine)}function Qa(n){return Op.apply(this,arguments)}function Op(){return Op=(0,le.Z)(function*(n){const e=yield kp(n),t=e.eventManager;return t.onListen=Sp.bind(null,e.syncEngine),t.onUnlisten=gI.bind(null,e.syncEngine),t}),Op.apply(this,arguments)}function xv(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(a,c,h,y,E){const C=new Kr({next:k=>{c.enqueueAndForget(()=>av(a,x));const W=k.docs.has(h);!W&&k.fromCache?E.reject(new be(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&k.fromCache&&y&&"server"===y.source?E.reject(new be(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(k)},error:k=>E.reject(k)}),x=new lv(fc(h.path),C,{includeMetadataChanges:!0,Ku:!0});return cI(a,x)}(yield Qa(n),n.asyncQueue,e,t,r)})),r.promise}function xI(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(a,c,h,y,E){const C=new Kr({next:k=>{c.enqueueAndForget(()=>av(a,x)),k.fromCache&&"server"===y.source?E.reject(new be(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(k)},error:k=>E.reject(k)}),x=new lv(h,C,{includeMetadataChanges:!0,Ku:!0});return cI(a,x)}(yield Qa(n),n.asyncQueue,e,t,r)})),r.promise}function qD(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const NI=new Map;function Nv(n,e,t){if(!t)throw new be(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PI(n,e,t,r){if(!0===e&&!0===r)throw new be(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Pv(n){if(!Qe.isDocumentKey(n))throw new be(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Rv(n){if(Qe.isDocumentKey(n))throw new be(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vm(n);throw new be(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kv(n,e){if(e<=0)throw new be(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RI{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new be(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=qD(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new be(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lp{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new CE;switch(t.type){case"firstParty":return new xE(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=NI.get(e);t&&(ke("ComponentProvider","Removing Datastore"),NI.delete(e),t.terminate())}(this),Promise.resolve()}}class Fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class Zr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class mo extends Zr{constructor(e,t,r){super(e,t,fc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new Qe(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function Lv(n,e,...t){if(n=(0,Ht.m9)(n),Nv("collection","path",e),n instanceof Lp){const r=nn.fromString(e,...t);return Rv(r),new mo(n,null,r)}{if(!(n instanceof Fn||n instanceof mo))throw new be(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return Rv(r),new mo(n.firestore,null,r)}}function Bm(n,e,...t){if(n=(0,Ht.m9)(n),1===arguments.length&&(e=Ay.A()),Nv("doc","path",e),n instanceof Lp){const r=nn.fromString(e,...t);return Pv(r),new Fn(n,null,new Qe(r))}{if(!(n instanceof Fn||n instanceof mo))throw new be(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return Pv(r),new Fn(n.firestore,n instanceof mo?n.converter:null,new Qe(r))}}function OI(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),(n instanceof Fn||n instanceof mo)&&(e instanceof Fn||e instanceof mo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LI(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),n instanceof Zr&&e instanceof Zr&&n.firestore===e.firestore&&Fl(n._query,e._query)&&n.converter===e.converter}class FI{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new gm(this,"async_queue_retry"),this.Xc=()=>{const t=Ip();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Ip();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Ip();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Or;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,le.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!uc(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Dr("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=Em.createAndSchedule(this,e,t,r,c=>this.na(c));return this.zc.push(a),a}Zc(){this.Wc&&nt()}verifyOperationInProgress(){}sa(){var e=this;return(0,le.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function VI(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class gb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $n extends Lp{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new FI,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||KD(this),this._firestoreClient.terminate()}}function Tr(n){return n._firestoreClient||KD(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KD(n){var e,t,r;const a=n._freezeSettings(),c=(y=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new H0(n._databaseId,y,n._persistenceKey,(C=a).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,qD(C.experimentalLongPollingOptions),C.useFetchStreams));var y,C;n._firestoreClient=new hb(n._authCredentials,n._appCheckCredentials,n._queue,c),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=a.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Fv(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,le.Z)(function*(){try{yield bv(n,t),yield km(n,e),r.resolve()}catch(a){const c=a;if(!CI(c))throw c;vs("Error enabling indexeddb cache. Falling back to memory cache: "+c),r.reject(c)}})).then(()=>r.promise)}function HI(n){if(n._initialized||n._terminated)throw new be(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ja(Wr.fromBase64String(e))}catch(t){throw new be(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ja(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cd{constructor(e){this._methodName=e}}class Bv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const wb=/^__.*__$/;class Ib{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new fo(e,this.data,t,this.fieldTransforms)}}class GI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new rs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class Hm{constructor(e,t,r,a,c,h){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Hm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:r,la:!1});return a.fa(e),a}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:r,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Bp(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(YD(this.ca)&&wb.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Eb{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ep(e)}ya(e,t,r,a=!1){return new Hm({ca:e,methodName:t,ga:r,path:qn.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ld(n){const e=n._freezeSettings(),t=Ep(n._databaseId);return new Eb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Fp(n,e,t,r,a,c={}){const h=n.ya(c.merge||c.mergeFields?2:0,e,t,a);Wm("Data must be an object, but it was:",h,r);const y=zI(r,h);let E,C;if(c.merge)E=new ws(h.fieldMask),C=h.fieldTransforms;else if(c.mergeFields){const x=[];for(const k of c.mergeFields){const W=Wh(e,k,t);if(!h.contains(W))throw new be(oe.INVALID_ARGUMENT,`Field '${W}' is specified in your field mask but missing from your input data.`);WI(x,W)||x.push(W)}E=new ws(x),C=h.fieldTransforms.filter(k=>E.covers(k.field))}else E=null,C=h.fieldTransforms;return new Ib(new ai(y),E,C)}class zh extends cd{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}function QD(n,e,t){return new Hm({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ds extends cd{_toFieldTransform(e){return new ns(e.path,new $a)}isEqual(e){return e instanceof Ds}}class JD extends cd{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=QD(this,e,!0),r=this.pa.map(c=>dd(c,t)),a=new Is(r);return new ns(e.path,a)}isEqual(e){return this===e}}class Uv extends cd{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=QD(this,e,!0),r=this.pa.map(c=>dd(c,t)),a=new ho(r);return new ns(e.path,a)}isEqual(e){return this===e}}class XD extends cd{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new bh(e.serializer,ow(e.serializer,this.Ia));return new ns(e.path,t)}isEqual(e){return this===e}}function ss(n,e,t,r){const a=n.ya(1,e,t);Wm("Data must be an object, but it was:",a,r);const c=[],h=ai.empty();Oa(r,(E,C)=>{const x=Vp(e,E,t);C=(0,Ht.m9)(C);const k=a.da(x);if(C instanceof zh)c.push(x);else{const W=dd(C,k);null!=W&&(c.push(x),h.set(x,W))}});const y=new ws(c);return new GI(h,y,a.fieldTransforms)}function jv(n,e,t,r,a,c){const h=n.ya(1,e,t),y=[Wh(e,r,t)],E=[a];if(c.length%2!=0)throw new be(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let W=0;W<c.length;W+=2)y.push(Wh(e,c[W])),E.push(c[W+1]);const C=[],x=ai.empty();for(let W=y.length-1;W>=0;--W)if(!WI(C,y[W])){const te=y[W];let Ie=E[W];Ie=(0,Ht.m9)(Ie);const Be=h.da(te);if(Ie instanceof zh)C.push(te);else{const $e=dd(Ie,Be);null!=$e&&(C.push(te),x.set(te,$e))}}const k=new ws(C);return new GI(x,k,h.fieldTransforms)}function Gm(n,e,t,r=!1){return dd(t,n.ya(r?4:3,e))}function dd(n,e){if(zm(n=(0,Ht.m9)(n)))return Wm("Unsupported field value:",e,n),zI(n,e);if(n instanceof cd)return function(t,r){if(!YD(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const a=[];let c=0;for(const h of t){let y=dd(h,r.wa(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ow(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Un.fromDate(t);return{timestampValue:zl(r.serializer,a)}}if(t instanceof Un){const a=new Un(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zl(r.serializer,a)}}if(t instanceof Bv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ja)return{bytesValue:u_(r.serializer,t._byteString)};if(t instanceof Fn){const a=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw r._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:c_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Vm(t)}`)}(n,e)}function zI(n,e){const t={};return jy(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oa(n,(r,a)=>{const c=dd(a,e.ha(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function zm(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Un||n instanceof Bv||n instanceof Ja||n instanceof Fn||n instanceof cd)}function Wm(n,e,t){if(!zm(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Vm(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Wh(n,e,t){if((e=(0,Ht.m9)(e))instanceof Xa)return e._internalPath;if("string"==typeof e)return Vp(n,e);throw Bp("Field path arguments must be of type string or ",n,!1,void 0,t)}const eT=new RegExp("[~\\*/\\[\\]]");function Vp(n,e,t){if(e.search(eT)>=0)throw Bp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xa(...e.split("."))._internalPath}catch{throw Bp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bp(n,e,t,r,a){const c=r&&!r.isEmpty(),h=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let E="";return(c||h)&&(E+=" (found",c&&(E+=` in field ${r}`),h&&(E+=` in document ${a}`),E+=")"),new be(oe.INVALID_ARGUMENT,y+n+E)}function WI(n,e){return n.some(t=>t.isEqual(e))}class qh{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tT extends qh{data(){return super.data()}}function Kh(n,e){return"string"==typeof e?Vp(n,e):e instanceof Xa?e._internalPath:e._delegate._internalPath}function eu(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qm{}class hd extends qm{}function wi(n,e,...t){let r=[];e instanceof qm&&r.push(e),r=r.concat(t),function(a){const c=a.filter(y=>y instanceof Zh).length,h=a.filter(y=>y instanceof Up).length;if(c>1||c>0&&h>0)throw new be(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)n=a._apply(n);return n}class Up extends hd{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Up(e,t,r)}_apply(e){const t=this._parse(e);return Hp(e._query,t),new Zr(e.firestore,e.converter,Lg(e._query,t))}_parse(e){const t=ld(e.firestore);return function(a,c,h,y,E,C,x){let k;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new be(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){Km(x,C);const W=[];for(const te of x)W.push(Wv(y,a,te));k={arrayValue:{values:W}}}else k=Wv(y,a,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||Km(x,C),k=Gm(h,"where",x,"in"===C||"not-in"===C);return Xt.create(E,C,k)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Zh extends qm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:_n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,a){let c=r;const h=a.getFlattenedFilters();for(const y of h)Hp(c,y),c=Lg(c,y)}(e._query,t),new Zr(e.firestore,e.converter,Lg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $v extends hd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $v(e,t)}_apply(e){const t=function(r,a,c){if(null!==r.startAt)throw new be(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new be(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new qr(a,c);return function(y,E){if(null===tw(y)){const C=Ih(y);null!==C&&qv(0,C,E.field)}}(r,h),h}(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,function(r,a){const c=r.explicitOrderBy.concat([a]);return new ja(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Hv extends hd{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Hv(e,t,r)}_apply(e){return new Zr(e.firestore,e.converter,np(e._query,this._limit,this._limitType))}}class jp extends hd{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jp(e,t,r)}_apply(e){const t=zv(e,this.type,this._docOrFields,this._inclusive);return new Zr(e.firestore,e.converter,(a=t,new ja((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class $p extends hd{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $p(e,t,r)}_apply(e){const t=zv(e,this.type,this._docOrFields,this._inclusive);return new Zr(e.firestore,e.converter,(a=t,new ja((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function zv(n,e,t,r){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof qh)return function(a,c,h,y,E){if(!y)throw new be(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const x of pc(a))if(x.field.isKeyField())C.push(Ba(c,y.key));else{const k=y.data.field(x.field);if(Mg(k))throw new be(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const W=x.field.canonicalString();throw new be(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${W}' (used as the orderBy) does not exist.`)}C.push(k)}return new Ua(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=ld(n.firestore);return function(c,h,y,E,C,x){const k=c.explicitOrderBy;if(C.length>k.length)throw new be(oe.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const W=[];for(let te=0;te<C.length;te++){const Ie=C[te];if(k[te].field.isKeyField()){if("string"!=typeof Ie)throw new be(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof Ie}`);if(!nw(c)&&-1!==Ie.indexOf("/"))throw new be(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${Ie}' contains a slash.`);const Be=c.path.child(nn.fromString(Ie));if(!Qe.isDocumentKey(Be))throw new be(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Be}' is not because it contains an odd number of segments.`);const $e=new Qe(Be);W.push(Ba(h,$e))}else{const Be=Gm(y,E,Ie);W.push(Be)}}return new Ua(W,x)}(n._query,n.firestore._databaseId,a,e,t,r)}}function Wv(n,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new be(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nw(e)&&-1!==t.indexOf("/"))throw new be(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!Qe.isDocumentKey(r))throw new be(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ba(n,new Qe(r))}if(t instanceof Fn)return Ba(n,t._key);throw new be(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vm(t)}.`)}function Km(n,e){if(!Array.isArray(n)||0===n.length)throw new be(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hp(n,e){if(e.isInequality()){const r=Ih(n),a=e.field;if(null!==r&&!r.isEqual(a))throw new be(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${a.toString()}'`);const c=tw(n);null!==c&&qv(0,a,c)}const t=function(r,a){for(const c of r)for(const h of c.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new be(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function qv(n,e,t){if(!t.isEqual(e))throw new be(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Zm{convertValue(e,t="none"){switch(La(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Oa(e,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new Bv(yn(e.latitude),yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zf(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(kl(e));default:return null}}convertTimestamp(e){const t=Rl(e);return new Un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);yt(y_(r));const a=new zo(r.get(1),r.get(3)),c=new Qe(r.popFirst(5));return a.isEqual(t)||Dr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Gp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class rT extends Zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ja(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}class fd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tu extends qh{constructor(e,t,r,a,c,h){super(e,t,r,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ym(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Kh("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ym extends tu{data(e={}){return super.data(e)}}class pd{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new fd(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ym(this._firestore,this._userDataWriter,r.key,r,new fd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Ym(r._firestore,r._userDataWriter,h.doc.key,h.doc,new fd(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const y=new Ym(r._firestore,r._userDataWriter,h.doc.key,h.doc,new fd(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==h.type&&(E=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),C=c.indexOf(h.doc.key)),{type:xb(h.type),doc:y,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function sT(n,e){return n instanceof tu&&e instanceof tu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pd&&e instanceof pd&&n._firestore===e._firestore&&LI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Tc extends Zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ja(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}function Kv(n,e,t){n=zt(n,Fn);const r=zt(n.firestore,$n),a=Gp(n.converter,e,t);return nu(r,[Fp(ld(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,gn.none())])}function Jm(n,e,t,...r){n=zt(n,Fn);const a=zt(n.firestore,$n),c=ld(a);let h;return h="string"==typeof(e=(0,Ht.m9)(e))||e instanceof Xa?jv(c,"updateDoc",n._key,e,t,r):ss(c,"updateDoc",n._key,e),nu(a,[h.toMutation(n._key,gn.exists(!0))])}function Xm(n,...e){var t,r,a;n=(0,Ht.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||VI(e[h])||(c=e[h],h++);const y={includeMetadataChanges:c.includeMetadataChanges};if(VI(e[h])){const k=e[h];e[h]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[h+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[h+2]=null===(a=k.complete)||void 0===a?void 0:a.bind(k)}let E,C,x;if(n instanceof Fn)C=zt(n.firestore,$n),x=fc(n._key.path),E={next:k=>{e[h]&&e[h](XI(C,n,k))},error:e[h+1],complete:e[h+2]};else{const k=zt(n,Zr);C=zt(k.firestore,$n),x=k._query;const W=new Tc(C);E={next:te=>{e[h]&&e[h](new pd(C,W,k,te))},error:e[h+1],complete:e[h+2]},eu(n._query)}return function(k,W,te,Ie){const Be=new Kr(Ie),$e=new lv(W,Be,te);return k.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return cI(yield Qa(k),$e)})),()=>{Be.Dc(),k.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return av(yield Qa(k),$e)}))}}(Tr(C),x,y,E)}function nu(n,e){return function(t,r){const a=new Or;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function kD(n,e,t){return dv.apply(this,arguments)}(yield Fm(t),r,a)})),a.promise}(Tr(n),e)}function XI(n,e,t){const r=t.docs.get(e._key),a=new Tc(n);return new tu(n,a,e._key,r,new fd(t.hasPendingWrites,t.fromCache),e.converter)}const Qv={maxAttempts:5};class mT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ld(e)}set(e,t,r){this._verifyNotCommitted();const a=ru(e,this._firestore),c=Gp(a.converter,t,r),h=Fp(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,r);return this._mutations.push(h.toMutation(a._key,gn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=ru(e,this._firestore);let h;return h="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Xa?jv(this._dataReader,"WriteBatch.update",c._key,t,r,a):ss(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,gn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ru(e,this._firestore);return this._mutations=this._mutations.concat(new Hl(t._key,gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ru(n,e){if((n=(0,Ht.m9)(n)).firestore!==e)throw new be(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Jv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ld(e)}get(e){const t=ru(e,this._firestore),r=new rT(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return nt();const c=a[0];if(c.isFoundDocument())return new qh(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new qh(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const a=ru(e,this._firestore),c=Gp(a.converter,t,r),h=Fp(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,r);return this._transaction.set(a._key,h),this}update(e,t,r,...a){const c=ru(e,this._firestore);let h;return h="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Xa?jv(this._dataReader,"Transaction.update",c._key,t,r,a):ss(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=ru(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ru(e,this._firestore),r=new Tc(this._firestore);return super.get(e).then(a=>new tu(this._firestore,r,t._key,a._document,new fd(!1,!1),t.converter))}}function nE(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rE(){if(typeof Uint8Array>"u")throw new be("unimplemented","Uint8Arrays are not available in this environment.")}function ET(){if(!function rb(){return typeof atob<"u"}())throw new be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Gf=Ri.SDK_VERSION,(0,Ri._registerComponent)(new wa.wA("firestore",(t,{instanceIdentifier:r,options:a})=>{const c=t.getProvider("app").getImmediate(),h=new $n(new C0(t.getProvider("auth-internal")),new Vt(t.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new be(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zo(y.options.projectId,E)}(c,r),c);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),(0,Ri.registerVersion)(T0,"3.12.1",n),(0,Ri.registerVersion)(T0,"3.12.1","esm2017")}();class ey{constructor(e){this._delegate=e}static fromBase64String(e){return ET(),new ey(Ja.fromBase64String(e))}static fromUint8Array(e){return rE(),new ey(Ja.fromUint8Array(e))}toBase64(){return ET(),this._delegate.toBase64()}toUint8Array(){return rE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iE(n){return function Bb(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Ub{enableIndexedDbPersistence(e,t){return function Um(n,e){HI(n=zt(n,$n));const t=Tr(n);if(t._uninitializedComponentsProvider)throw new be(oe.FAILED_PRECONDITION,"SDK cache is already specified.");vs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),a=new ad;return Fv(t,a,new Pm(a,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function yb(n){HI(n=zt(n,$n));const e=Tr(n);if(e._uninitializedComponentsProvider)throw new be(oe.FAILED_PRECONDITION,"SDK cache is already specified.");vs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new ad;return Fv(e,r,new TI(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jm(n){if(n._initialized&&!n._terminated)throw new be(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(t=(0,le.Z)(function*(r){if(!Vs.D())return Promise.resolve();const a=r+"main";yield Vs.delete(a)}),function(r){return t.apply(this,arguments)})(L_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class DT{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Ov(n,e,t,r={}){var a;const c=(n=zt(n,Lp))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&vs("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,y;if("string"==typeof r.mockUserToken)h=r.mockUserToken,y=Gr.MOCK_USER;else{h=(0,Ht.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new be(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Gr(E)}n._authCredentials=new SE(new b0(h,y))}}(this._delegate,e,t,r)}enableNetwork(){return function UI(n){return function fb(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield SI(n),t=yield Lm(n);return e.setNetworkEnabled(!0),function(r){const a=Ge(r);return a.vu.delete(0),ed(a)}(t)}))}(Tr(n=zt(n,$n)))}(this._delegate)}disableNetwork(){return function _b(n){return function AI(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield SI(n),t=yield Lm(n);return e.setNetworkEnabled(!1),(r=(0,le.Z)(function*(a){const c=Ge(a);c.vu.add(0),yield td(c),c.bu.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(Tr(n=zt(n,$n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BI(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function Za(n,e){return pv.apply(this,arguments)}(yield Fm(e),t)})),t.promise}(Tr(n=zt(n,$n)))}(this._delegate)}onSnapshotsInSync(e){return function Yv(n,e){return function MI(n,e){const t=new Kr(e);return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Qa(n),a=t,Ge(r).ku.add(a),void a.next();var r,a})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Qa(n),a=t,void Ge(r).ku.delete(a);var r,a}))}}(Tr(n=zt(n,$n)),VI(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pe(this,Lv(this._delegate,e))}catch(t){throw m(t,"collection()","Firestore.collection()")}}doc(e){try{return new p(this,Bm(this._delegate,e))}catch(t){throw m(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new R(this,function kI(n,e){if(n=zt(n,Lp),Nv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zr(n,null,(t=e,new ja(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw m(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function yT(n,e,t){n=zt(n,$n);const r=Object.assign(Object.assign({},Qv),t);return function(a){if(a.maxAttempts<1)throw new be(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,c,h){const y=new Or;return a.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const E=yield function Av(n){return kp(n).then(e=>e.datastore)}(a);new GD(a.asyncQueue,E,h,c,y).run()})),y.promise}(Tr(n),a=>e(new Jv(n,a)),r)}(this._delegate,t=>e(new o(this,t)))}batch(){return Tr(this._delegate),new u(new mT(this._delegate,e=>nu(this._delegate,e)))}loadBundle(e){return function $I(n,e){const t=Tr(n=zt(n,$n)),r=new gb;return function Mv(n,e,t,r){const a=function(c,h){let y;return y="string"==typeof c?t_().encode(c):c,E=function(E,C){if(E instanceof Uint8Array)return bI(E,C);if(E instanceof ArrayBuffer)return bI(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new Hh(E,h);var E}(t,Ep(e));n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function $D(n,e,t){const r=Ge(n);var a;(a=(0,le.Z)(function*(c,h,y){try{const E=yield h.getMetadata();if(yield function(W,te){const Ie=Ge(W),Be=lr(te.createTime);return Ie.persistence.runTransaction("hasNewerBundle","readonly",$e=>Ie.qs.getBundleMetadata($e,te.id)).then($e=>!!$e&&$e.createTime.compareTo(Be)>=0)}(c.localStore,E))return yield h.close(),y._completeWith({taskState:"Success",documentsLoaded:(W=E).totalDocuments,bytesLoaded:W.totalBytes,totalDocuments:W.totalDocuments,totalBytes:W.totalBytes}),Promise.resolve(new Set);y._updateProgress(dI(E));const C=new MD(E,c.localStore,h.serializer);let x=yield h.bc();for(;x;){const W=yield C.zu(x);W&&y._updateProgress(W),x=yield h.bc()}const k=yield C.complete();return yield Ya(c,k.Ju,void 0),yield function(W,te){const Ie=Ge(W);return Ie.persistence.runTransaction("Save bundle","readwrite",Be=>Ie.qs.saveBundleMetadata(Be,te))}(c.localStore,E),y._completeWith(k.progress),Promise.resolve(k.Hu)}catch(E){return vs("SyncEngine",`Loading bundle failed with ${E}`),y._failWith(E),Promise.resolve(new Set)}var W}),function(c,h,y){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield Fm(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ZD(n,e){return function pb(n,e){return n.asyncQueue.enqueue((0,le.Z)(function*(){return function(t,r){const a=Ge(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.qs.getNamedQuery(c,r))}(yield Om(n),e)}))}(Tr(n=zt(n,$n)),e).then(t=>t?new Zr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new R(this,t):null)}}class i extends Zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new ey(new Ja(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return p.forKey(t,this.firestore,null)}}class o{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new i(e)}get(e){const t=Le(e);return this._delegate.get(t).then(r=>new S(this._firestore,new tu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Le(e);return r?(nE("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Le(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Le(e);return this._delegate.delete(t),this}}class u{constructor(e){this._delegate=e}set(e,t,r){const a=Le(e);return r?(nE("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Le(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Le(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class l{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ym(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new N(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=l.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let c=a.get(t);return c||(c=new l(e,new i(e),t),a.set(t,c)),c}}l.INSTANCES=new WeakMap;class p{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new i(e)}static forPath(e,t,r){if(e.length%2!=0)throw new be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new p(t,new Fn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new p(t,new Fn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new pe(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pe(this.firestore,Lv(this._delegate,e))}catch(t){throw m(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Fn&&OI(this._delegate,e)}set(e,t){t=nE("DocumentReference.set",t);try{return t?Kv(this._delegate,e,t):Kv(this._delegate,e)}catch(r){throw m(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Jm(this._delegate,e):Jm(this._delegate,e,t,...r)}catch(a){throw m(a,"updateDoc()","DocumentReference.update()")}}delete(){return function Zv(n){return nu(zt(n.firestore,$n),[new Hl(n._key,gn.none())])}(this._delegate)}onSnapshot(...e){const t=w(e),r=D(e,a=>new S(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Xm(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Qm(n){n=zt(n,Fn);const e=zt(n.firestore,$n),t=Tr(e),r=new Tc(e);return function zD(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(a,c,h){try{const y=yield function(E,C){const x=Ge(E);return x.persistence.runTransaction("read document","readonly",k=>x.localDocuments.getDocument(k,C))}(a,c);y.isFoundDocument()?h.resolve(y):y.isNoDocument()?h.resolve(null):h.reject(new be(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const E=id(y,`Failed to get document '${c} from cache`);h.reject(E)}}),function(a,c,h){return r.apply(this,arguments)})(yield Om(n),e,t);var r})),t.promise}(t,n._key).then(a=>new tu(e,r,n._key,a,new fd(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function oT(n){n=zt(n,Fn);const e=zt(n.firestore,$n);return xv(Tr(e),n._key,{source:"server"}).then(t=>XI(e,n,t))}(this._delegate):function Mb(n){n=zt(n,Fn);const e=zt(n.firestore,$n);return xv(Tr(e),n._key).then(t=>XI(e,n,t))}(this._delegate),t.then(r=>new S(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new p(this.firestore,this._delegate.withConverter(e?l.getInstance(this.firestore,e):null))}}function m(n,e,t){return n.message=n.message.replace(e,t),n}function w(n){for(const e of n)if("object"==typeof e&&!iE(e))return e;return{}}function D(n,e){var t,r;let a;return a=iE(n[0])?n[0]:iE(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class S{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new p(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sT(this._delegate,e._delegate)}}class N extends S{data(e){const t=this._delegate.data(e);return function bE(n,e){n||nt()}(void 0!==t),t}}class R{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new i(e)}where(e,t,r){try{return new R(this.firestore,wi(this._delegate,function Db(n,e,t){const r=e,a=Kh("where",n);return Up._create(a,r,t)}(e,t,r)))}catch(a){throw m(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new R(this.firestore,wi(this._delegate,function qI(n,e="asc"){const t=e,r=Kh("orderBy",n);return $v._create(r,t)}(e,t)))}catch(r){throw m(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new R(this.firestore,wi(this._delegate,function KI(n){return kv("limit",n),Hv._create("limit",n,"F")}(e)))}catch(t){throw m(t,"limit()","Query.limit()")}}limitToLast(e){try{return new R(this.firestore,wi(this._delegate,function nT(n){return kv("limitToLast",n),Hv._create("limitToLast",n,"L")}(e)))}catch(t){throw m(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new R(this.firestore,wi(this._delegate,function bb(...n){return jp._create("startAt",n,!0)}(...e)))}catch(t){throw m(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new R(this.firestore,wi(this._delegate,function Gv(...n){return jp._create("startAfter",n,!1)}(...e)))}catch(t){throw m(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new R(this.firestore,wi(this._delegate,function ZI(...n){return $p._create("endBefore",n,!1)}(...e)))}catch(t){throw m(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new R(this.firestore,wi(this._delegate,function YI(...n){return $p._create("endAt",n,!0)}(...e)))}catch(t){throw m(t,"endAt()","Query.endAt()")}}isEqual(e){return LI(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function JI(n){n=zt(n,Zr);const e=zt(n.firestore,$n),t=Tr(e),r=new Tc(e);return function Gh(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(a,c,h){try{const y=yield mp(a,c,!0),E=new pI(c,y.ir),C=E.sc(y.documents),x=E.applyChanges(C,!1);h.resolve(x.snapshot)}catch(y){const E=id(y,`Failed to execute query '${c} against cache`);h.reject(E)}}),function(a,c,h){return r.apply(this,arguments)})(yield Om(n),e,t);var r})),t.promise}(t,n._query).then(a=>new pd(e,r,n,a))}(this._delegate):"server"===e?.source?function gd(n){n=zt(n,Zr);const e=zt(n.firestore,$n),t=Tr(e),r=new Tc(e);return xI(t,n._query,{source:"server"}).then(a=>new pd(e,r,n,a))}(this._delegate):function aT(n){n=zt(n,Zr);const e=zt(n.firestore,$n),t=Tr(e),r=new Tc(e);return eu(n._query),xI(t,n._query).then(a=>new pd(e,r,n,a))}(this._delegate),t.then(r=>new Y(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=w(e),r=D(e,a=>new Y(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Xm(this._delegate,t,r)}withConverter(e){return new R(this.firestore,this._delegate.withConverter(e?l.getInstance(this.firestore,e):null))}}class ${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new N(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Y{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new R(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new N(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new N(this._firestore,r))})}isEqual(e){return sT(this._delegate,e._delegate)}}class pe extends R{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new p(this.firestore,e):null}doc(e){try{return new p(this.firestore,void 0===e?Bm(this._delegate):Bm(this._delegate,e))}catch(t){throw m(t,"doc()","CollectionReference.doc()")}}add(e){return function uT(n,e){const t=zt(n.firestore,$n),r=Bm(n),a=Gp(n.converter,e);return nu(t,[Fp(ld(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,gn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new p(this.firestore,t))}isEqual(e){return OI(this._delegate,e._delegate)}withConverter(e){return new pe(this.firestore,this._delegate.withConverter(e?l.getInstance(this.firestore,e):null))}}function Le(n){return zt(n,Fn)}class qe{constructor(...e){this._delegate=new Xa(...e)}static documentId(){return new qe(qn.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Xa&&this._delegate._internalPath.isEqual(e._internalPath)}}class rt{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Ob(){return new Ds("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new rt(e)}static delete(){const e=function _T(){return new zh("deleteField")}();return e._methodName="FieldValue.delete",new rt(e)}static arrayUnion(...e){const t=function Lb(...n){return new JD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new rt(t)}static arrayRemove(...e){const t=function vT(...n){return new Uv("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new rt(t)}static increment(e){const t=function wT(n){return new XD("increment",n)}(e);return t._methodName="FieldValue.increment",new rt(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const At={Firestore:DT,GeoPoint:Bv,Timestamp:Un,Blob:ey,Transaction:o,WriteBatch:u,DocumentReference:p,DocumentSnapshot:S,Query:R,QueryDocumentSnapshot:N,QuerySnapshot:Y,CollectionReference:pe,FieldPath:qe,FieldValue:rt,setLogLevel:function s(n){!function QT(n){xl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Pt(n){(function Se(n,e){n.INTERNAL.registerComponent(new wa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},At)))})(n,(e,t)=>new DT(e,t,new Ub)),n.registerVersion("@firebase/firestore-compat","0.3.10")}(Xs.Z);var cn=L(7579),Hn=L(6451),Qo=L(5363),Xv=L(8421);function Jo(n,e){return(0,Pr.e)((t,r)=>{let a=null,c=0,h=!1;const y=()=>h&&!a&&r.complete();t.subscribe((0,Pi.x)(r,E=>{a?.unsubscribe();let C=0;const x=c++;(0,Xv.Xf)(n(E,x)).subscribe(a=(0,Pi.x)(r,k=>r.next(e?e(E,k,x,C++):k),()=>{a=null,y()}))},()=>{h=!0,y()}))})}var e0=L(6063);class t0 extends cn.x{constructor(e=1/0,t=1/0,r=e0.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:h}=this;t||(r.push(e),!a&&r.push(c.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:a}=this,c=a.slice();for(let h=0;h<c.length&&!e.closed;h+=r?1:2)e.next(c[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!a){const h=t.now();let y=0;for(let E=1;E<r.length&&r[E]<=h;E+=2)y=E;y&&r.splice(0,y+1)}}}var n0=L(3099);function ty(n,e,t){let r,a=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):r=n??1/0,(0,n0.B)({connector:()=>new t0(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}const ny=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var s0=L(515);function LC(n){return n<=0?()=>s0.E:(0,Pr.e)((e,t)=>{let r=0;e.subscribe((0,Pi.x)(t,a=>{++r<=n&&(t.next(a),n<=r&&t.complete())}))})}function FC(n){return(0,Pr.e)((e,t)=>{let r=!1;e.subscribe((0,Pi.x)(t,a=>{r=!0,t.next(a)},()=>{r||t.next(n),t.complete()}))})}function VC(n=BC){return(0,Pr.e)((e,t)=>{let r=!1;e.subscribe((0,Pi.x)(t,a=>{r=!0,t.next(a)},()=>r?t.complete():t.error(n())))})}function BC(){return new ny}var jC=L(576);function jb(n,e){return(0,jC.m)(e)?Jo(()=>n,e):Jo(()=>n)}var TT=L(9468);L(259);const CT=new Map,Hb={activated:!1,tokenObservers:[]},WC={initialized:!1,enabled:!1};function br(n){return CT.get(n)||Object.assign({},Hb)}function oE(){return WC}class JC{constructor(e,t,r,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,le.Z)(function*(){t.stop();try{t.pending=new Ht.BH,yield function XC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ht.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Bi=new Ht.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function AT(n){if(!br(n).activated)throw Bi.create("use-before-activation",{appName:n.name})}function cE(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,le.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const k=yield a.getHeartbeatsHeader();k&&(r["X-Firebase-Client"]=k)}const c={method:"POST",body:JSON.stringify(e),headers:r};let h,y;try{h=yield fetch(n,c)}catch(k){throw Bi.create("fetch-network-error",{originalErrorMessage:k?.message})}if(200!==h.status)throw Bi.create("fetch-status-error",{httpStatus:h.status});try{y=yield h.json()}catch(k){throw Bi.create("fetch-parse-error",{originalErrorMessage:k?.message})}const E=y.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Bi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const C=1e3*Number(E[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+C,issuedAtTimeMillis:x}}),MT.apply(this,arguments)}function zb(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const o0="firebase-app-check-store";let lE=null;function qb(){return lE||(lE=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var a;e(Bi.create("storage-open",{originalErrorMessage:null===(a=r.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(o0,{keyPath:"compositeKey"})}}catch(t){e(Bi.create("storage-open",{originalErrorMessage:t?.message}))}}),lE)}function NT(){return NT=(0,le.Z)(function*(n,e){const r=(yield qb()).transaction(o0,"readwrite"),c=r.objectStore(o0).put({compositeKey:n,value:e});return new Promise((h,y)=>{c.onsuccess=E=>{h()},r.onerror=E=>{var C;y(Bi.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})}),NT.apply(this,arguments)}const a0=new xs.Yd("@firebase/app-check");function kT(n,e){return(0,Ht.hl)()?function oS(n,e){return function Kb(n,e){return NT.apply(this,arguments)}(function Yb(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{a0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LT(){return oE().enabled}function FT(){return VT.apply(this,arguments)}function VT(){return VT=(0,le.Z)(function*(){const n=oE();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),VT.apply(this,arguments)}const hS={error:"UNKNOWN_ERROR"};function fS(n){return Ht.US.encodeString(JSON.stringify(n),!1)}function dE(n){return BT.apply(this,arguments)}function BT(){return BT=(0,le.Z)(function*(n,e=!1){const t=n.app;AT(t);const r=br(t);let c,a=r.token;if(a&&!ry(a)&&(r.token=void 0,a=void 0),!a){const E=yield r.cachedTokenPromise;E&&(ry(E)?a=E:yield kT(t,void 0))}if(!e&&a&&ry(a))return{token:a.token};let y,h=!1;if(LT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=cE(zb(t,yield FT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),h=!0);const E=yield r.exchangeTokenPromise;return yield kT(t,E),r.token=E,{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),h=!0),a=yield br(t).exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?a0.warn(E.message):a0.error(E),c=E}return a?c?y=ry(a)?{token:a.token,internalError:c}:eC(c):(y={token:a.token},r.token=a,yield kT(t,a)):y=eC(c),h&&Xb(t,y),y}),BT.apply(this,arguments)}function UT(){return UT=(0,le.Z)(function*(n){const e=n.app;AT(e);const{provider:t}=br(e);if(LT()){const r=yield FT(),{token:a}=yield cE(zb(e,r),n.heartbeatServiceProvider);return{token:a}}{const{token:r}=yield t.getToken();return{token:r}}}),UT.apply(this,arguments)}function $T(n,e){const t=br(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Jb(n){const{app:e}=n,t=br(e);let r=t.tokenRefresher;r||(r=function pS(n){const{app:e}=n;return new JC((0,le.Z)(function*(){let r;if(r=br(e).token?yield dE(n,!0):yield dE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Xb(n,e){const t=br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ry(n){return n.expireTimeMillis-Date.now()>0}function eC(n){return{token:fS(hS),error:n}}class gS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=br(this.app);for(const t of e)$T(this.app,t.next);return Promise.resolve()}}const uC="app-check-internal";!function xS(){(0,Ri._registerComponent)(new wa.wA("app-check",n=>function mS(n,e){return new gS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uC).initialize()})),(0,Ri._registerComponent)(new wa.wA(uC,n=>function yS(n){return{getToken:e=>dE(n,e),getLimitedUseToken:()=>function Qb(n){return UT.apply(this,arguments)}(n),addTokenListener:e=>function jT(n,e,t,r){const{app:a}=n,c=br(a);if(c.tokenObservers=[...c.tokenObservers,{next:t,error:r,type:e}],c.token&&ry(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),Jb(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>Jb(n))}(n,"INTERNAL",e),removeTokenListener:e=>$T(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ri.registerVersion)("@firebase/app-check","0.8.0")}();class WT{constructor(){return(0,Xn.vb)("app-check")}}typeof window<"u"&&window;var kS=L(9260);const lC=new I.OlP("angularfire2.auth.use-emulator"),dC=new I.OlP("angularfire2.auth.settings"),hC=new I.OlP("angularfire2.auth.tenant-id"),fC=new I.OlP("angularfire2.auth.langugage-code"),pC=new I.OlP("angularfire2.auth.use-device-language"),gC=new I.OlP("angularfire.auth.persistence"),mC=(n,e,t,r,a,c,h,y)=>(0,Nr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=a,c&&E.useDeviceLanguage(),h)for(const[C,x]of Object.entries(h))E.settings[C]=x;return y&&E.setPersistence(y),E},[t,r,a,c,h,y]);let yC=(()=>{class n{constructor(t,r,a,c,h,y,E,C,x,k,W,te){const Ie=new cn.x,Be=Bn(void 0).pipe((0,Qo.Q)(h.outsideAngular),Jo(()=>c.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2644)))),(0,$r.U)(()=>(0,Nr.on)(t,c,r)),(0,$r.U)($e=>mC($e,c,y,C,x,k,E,W)),ty({bufferSize:1,refCount:!1}));if(du(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Bn(null);else{Be.pipe(function UC(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Js((a,c)=>n(a,c,r)):As.y,LC(1),t?FC(e):VC(()=>new ny))}()).subscribe();const Ct=Be.pipe(Jo(Bt=>Bt.getRedirectResult().then(Wt=>Wt,()=>null)),Xn.iC,ty({bufferSize:1,refCount:!1})),Ft=Be.pipe(Jo(Bt=>new Fu.y(Wt=>({unsubscribe:c.runOutsideAngular(()=>Bt.onAuthStateChanged(sn=>Wt.next(sn),sn=>Wt.error(sn),()=>Wt.complete()))})))),Nt=Be.pipe(Jo(Bt=>new Fu.y(Wt=>({unsubscribe:c.runOutsideAngular(()=>Bt.onIdTokenChanged(sn=>Wt.next(sn),sn=>Wt.error(sn),()=>Wt.complete()))}))));this.authState=Ct.pipe(jb(Ft),(0,TT.R)(h.outsideAngular),(0,Qo.Q)(h.insideAngular)),this.user=Ct.pipe(jb(Nt),(0,TT.R)(h.outsideAngular),(0,Qo.Q)(h.insideAngular)),this.idToken=this.user.pipe(Jo(Bt=>Bt?(0,Jn.D)(Bt.getIdToken()):Bn(null))),this.idTokenResult=this.user.pipe(Jo(Bt=>Bt?(0,Jn.D)(Bt.getIdTokenResult()):Bn(null))),this.credential=(0,Hn.T)(Ct,Ie,this.authState.pipe(Js(Bt=>!Bt))).pipe((0,$r.U)(Bt=>Bt?.user?Bt:null),(0,TT.R)(h.outsideAngular),(0,Qo.Q)(h.insideAngular))}return(0,Nr.pX)(this,Be,c,{spy:{apply:($e,Ct,Ft)=>{($e.startsWith("signIn")||$e.startsWith("createUser"))&&Ft.then(Nt=>Ie.next(Nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(Nr.Dh),I.LFG(Nr.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(Xn.HU),I.LFG(lC,8),I.LFG(dC,8),I.LFG(hC,8),I.LFG(fC,8),I.LFG(pC,8),I.LFG(gC,8),I.LFG(WT,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function _C(n,e){return function LS(n,e=Ro.z){return new Fu.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function KT(n,e){return _C(n,e).pipe((0,$r.U)(t=>({payload:t,type:"query"})))}function fE(n,e){return KT(n,e).pipe(ar(void 0),bn(),(0,$r.U)(([t,r])=>{const a=r.payload.docChanges(),c=a.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,y)=>{const E=a.find(x=>x.doc.ref.isEqual(h.ref)),C=t?.payload.docs.find(x=>x.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:h}})}),c}))}function vC(n,e,t){return fE(n,t).pipe(Bu((r,a)=>function VS(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function BS(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ZT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ZT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(c=>c.payload),e),[]),function tl(n,e=As.y){return n=n??nl,(0,Pr.e)((t,r)=>{let a,c=!0;t.subscribe((0,Pi.x)(r,h=>{const y=e(h);(c||!n(a,y))&&(c=!1,a=y,r.next(h))}))})}(),(0,$r.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function ZT(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function wC(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class IC{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=fE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,$r.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(ar(void 0),bn(),Js(([r,a])=>a.length>0||!r),(0,$r.U)(([r,a])=>a),Xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wC(e);return vC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}valueChanges(e={}){return KT(this.query,this.afs.schedulers.outsideAngular).pipe((0,$r.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Xn.iC)}get(e){return(0,Jn.D)(this.query.get(e)).pipe(Xn.iC)}add(e){return this.ref.add(e)}doc(e){return new EC(this.ref.doc(e),this.afs)}}class EC{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:c}=bC(r,t);return new IC(a,c,this.afs)}snapshotChanges(){return function FS(n,e){return _C(n,e).pipe(ar(void 0),bn(),(0,$r.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,$r.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jn.D)(this.ref.get(e)).pipe(Xn.iC)}}class US{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?fE(this.query,this.afs.schedulers.outsideAngular).pipe((0,$r.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Js(t=>t.length>0),Xn.iC):fE(this.query,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wC(e);return vC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}valueChanges(e={}){return KT(this.query,this.afs.schedulers.outsideAngular).pipe((0,$r.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Xn.iC)}get(e){return(0,Jn.D)(this.query.get(e)).pipe(Xn.iC)}}const DC=new I.OlP("angularfire2.enableFirestorePersistence"),TC=new I.OlP("angularfire2.firestore.persistenceSettings"),jS=new I.OlP("angularfire2.firestore.settings"),$S=new I.OlP("angularfire2.firestore.use-emulator");function bC(n,e=(t=>t)){return{query:e(n),ref:n}}let CC=(()=>{class n{constructor(t,r,a,c,h,y,E,C,x,k,W,te,Ie,Be,$e,Ct,Ft){this.schedulers=E;const Nt=(0,Nr.on)(t,y,r),Bt=x;k&&mC(Nt,y,W,Ie,Be,$e,te,Ct),[this.firestore,this.persistenceEnabled$]=(0,Nr.cc)(`${Nt.name}.firestore`,"AngularFirestore",Nt.name,()=>{const Wt=y.runOutsideAngular(()=>Nt.firestore());if(c&&Wt.settings(c),Bt&&Wt.useEmulator(...Bt),a&&!du(h)){const sn=()=>{try{return(0,Jn.D)(Wt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(os){return typeof console<"u"&&console.warn(os),Bn(!1)}};return[Wt,y.runOutsideAngular(sn)]}return[Wt,Bn(!1)]},[c,Bt,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=bC(a,r),y=this.schedulers.ngZone.run(()=>c);return new IC(y,h,this)}collectionGroup(t,r){const a=r||(h=>h),c=this.firestore.collectionGroup(t);return new US(a(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new EC(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(Nr.Dh),I.LFG(Nr.xv,8),I.LFG(DC,8),I.LFG(jS,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(Xn.HU),I.LFG(TC,8),I.LFG($S,8),I.LFG(yC,8),I.LFG(lC,8),I.LFG(dC,8),I.LFG(hC,8),I.LFG(fC,8),I.LFG(pC,8),I.LFG(gC,8),I.LFG(WT,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HS=(()=>{class n{constructor(){kS.Z.registerVersion("angularfire",Xn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:DC,useValue:!0},{provide:TC,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[CC]}),n})(),GS=(()=>{class n{constructor(t){this.firestore=t,this.firestoreCollection=t.collection("todos")}addTodo(t){this.firestoreCollection.add({title:t,isDone:!1})}updateTodoStatus(t,r){this.firestoreCollection.doc(t).update({isDone:r})}deleteTodo(t){this.firestoreCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(CC))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zS(n,e){if(1&n){const t=I.EpF();I.TgZ(0,"li",12)(1,"span")(2,"i",13),I.NdJ("click",function(){const c=I.CHM(t).$implicit,h=I.oxw();return I.KtG(h.onStatusChange(c.id,!c.isDone))}),I.qZA(),I._uU(3),I.TgZ(4,"span",14),I.NdJ("click",function(){const c=I.CHM(t).$implicit,h=I.oxw();return I.KtG(h.onDelete(c.id))}),I._UZ(5,"i",15),I.qZA()()()}if(2&n){const t=e.$implicit;I.xp6(2),I.Q6J("ngClass",t.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),I.xp6(1),I.hij(" ",t.title," ")}}let WS=(()=>{class n{constructor(t){this.todoService=t,this.todos=[]}ngOnInit(){this.todoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(t=>{console.log(t),this.todos=t.sort((r,a)=>r.isDone-a.isDone)})}onClick(t){t.value&&(this.todoService.addTodo(t.value),t.value="")}onStatusChange(t,r){this.todoService.updateTodoStatus(t,r)}onDelete(t){this.todoService.deleteTodo(t)}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(GS))},n.\u0275cmp=I.Xpm({type:n,selectors:[["app-todo"]],decls:13,vars:1,consts:[[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center","py-4","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border","py-0","rounded-3"],[1,"input-group"],["type","text","placeholder","Title goes here",1,"form-control","border-0","py-3","shadow-none"],["titleInput",""],[1,"btn","text-success","border-0",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 border py-3 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","border","py-3","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-right","text-secondary",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,r){if(1&t){const a=I.EpF();I.TgZ(0,"main",0)(1,"div",1)(2,"h1",2),I._uU(3,"To Do List"),I.qZA()(),I.TgZ(4,"div",3)(5,"ul",4)(6,"li",5)(7,"div",6),I._UZ(8,"input",7,8),I.TgZ(10,"button",9),I.NdJ("click",function(){I.CHM(a);const h=I.MAs(9);return I.KtG(r.onClick(h))}),I._UZ(11,"i",10),I.qZA()()(),I.YNc(12,zS,6,2,"li",11),I.qZA()()()}2&t&&(I.xp6(12),I.Q6J("ngForOf",r.todos))},dependencies:[an,fn],encapsulation:2}),n})(),qS=(()=>{class n{constructor(){this.title="todoApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=I.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(t,r){1&t&&(I.TgZ(0,"div",0)(1,"div",1)(2,"div",2),I._UZ(3,"app-todo"),I.qZA()()())},dependencies:[WS]}),n})();const SC_firebaseConfig={apiKey:"AIzaSyBMhieYK8FwqifQKcn_b5-H4TtCFL2qElw",authDomain:"to-do-app-85907.firebaseapp.com",projectId:"to-do-app-85907",storageBucket:"to-do-app-85907.appspot.com",messagingSenderId:"531008091696",appId:"1:531008091696:web:93972c04e85cad1c4d1ff5"};let KS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n,bootstrap:[qS]}),n.\u0275inj=I.cJS({imports:[Yc,Nr.hO.initializeApp(SC_firebaseConfig),HS]}),n})();(0,I.G48)(),Au().bootstrapModule(KS).catch(n=>console.error(n))},8306:(It,Ne,L)=>{L.d(Ne,{y:()=>H});var I=L(2961),ee=L(727),O=L(8822),ae=L(4671);var he=L(2416),ve=L(576),Ee=L(2806);let H=(()=>{class Pe{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const de=new Pe;return de.source=this,de.operator=Ke,de}subscribe(Ke,de,ye){const it=function Je(Pe){return Pe&&Pe instanceof I.Lv||function K(Pe){return Pe&&(0,ve.m)(Pe.next)&&(0,ve.m)(Pe.error)&&(0,ve.m)(Pe.complete)}(Pe)&&(0,ee.Nn)(Pe)}(Ke)?Ke:new I.Hp(Ke,de,ye);return(0,Ee.x)(()=>{const{operator:ot,source:Ae}=this;it.add(ot?ot.call(it,Ae):Ae?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(de){Ke.error(de)}}forEach(Ke,de){return new(de=j(de))((ye,it)=>{const ot=new I.Hp({next:Ae=>{try{Ke(Ae)}catch(ge){it(ge),ot.unsubscribe()}},error:it,complete:ye});this.subscribe(ot)})}_subscribe(Ke){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Ke)}[O.L](){return this}pipe(...Ke){return function ce(Pe){return 0===Pe.length?ae.y:1===Pe.length?Pe[0]:function(Ke){return Pe.reduce((de,ye)=>ye(de),Ke)}}(Ke)(this)}toPromise(Ke){return new(Ke=j(Ke))((de,ye)=>{let it;this.subscribe(ot=>it=ot,ot=>ye(ot),()=>de(it))})}}return Pe.create=Oe=>new Pe(Oe),Pe})();function j(Pe){var Oe;return null!==(Oe=Pe??he.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(It,Ne,L)=>{L.d(Ne,{x:()=>he});var I=L(8306),ee=L(727);const ae=(0,L(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=L(8737),ce=L(2806);let he=(()=>{class Ee extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new ve(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Je,observers:Pe}=this;return K||Je?ee.Lc:(this.currentObservers=null,Pe.push(j),new ee.w0(()=>{this.currentObservers=null,(0,ie.P)(Pe,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Je,isStopped:Pe}=this;K?j.error(Je):Pe&&j.complete()}asObservable(){const j=new I.y;return j.source=this,j}}return Ee.create=(H,j)=>new ve(H,j),Ee})();class ve extends he{constructor(H,j){super(),this.destination=H,this.source=j}next(H){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,H)}error(H){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,H)}complete(){var H,j;null===(j=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===j||j.call(H)}_subscribe(H){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(H))&&void 0!==K?K:ee.Lc}}},2961:(It,Ne,L)=>{L.d(Ne,{Hp:()=>Ke,Lv:()=>K});var I=L(576),ee=L(727),O=L(2416),ae=L(7849);function ie(){}const ce=Ee("C",void 0,void 0);function Ee(Ae,ge,fe){return{kind:Ae,value:ge,error:fe}}var H=L(3410),j=L(2806);class K extends ee.w0{constructor(ge){super(),this.isStopped=!1,ge?(this.destination=ge,(0,ee.Nn)(ge)&&ge.add(this)):this.destination=ot}static create(ge,fe,Ze){return new Ke(ge,fe,Ze)}next(ge){this.isStopped?it(function ve(Ae){return Ee("N",Ae,void 0)}(ge),this):this._next(ge)}error(ge){this.isStopped?it(function he(Ae){return Ee("E",void 0,Ae)}(ge),this):(this.isStopped=!0,this._error(ge))}complete(){this.isStopped?it(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ge){this.destination.next(ge)}_error(ge){try{this.destination.error(ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Je=Function.prototype.bind;function Pe(Ae,ge){return Je.call(Ae,ge)}class Oe{constructor(ge){this.partialObserver=ge}next(ge){const{partialObserver:fe}=this;if(fe.next)try{fe.next(ge)}catch(Ze){de(Ze)}}error(ge){const{partialObserver:fe}=this;if(fe.error)try{fe.error(ge)}catch(Ze){de(Ze)}else de(ge)}complete(){const{partialObserver:ge}=this;if(ge.complete)try{ge.complete()}catch(fe){de(fe)}}}class Ke extends K{constructor(ge,fe,Ze){let Ve;if(super(),(0,I.m)(ge)||!ge)Ve={next:ge??void 0,error:fe??void 0,complete:Ze??void 0};else{let at;this&&O.v.useDeprecatedNextContext?(at=Object.create(ge),at.unsubscribe=()=>this.unsubscribe(),Ve={next:ge.next&&Pe(ge.next,at),error:ge.error&&Pe(ge.error,at),complete:ge.complete&&Pe(ge.complete,at)}):Ve=ge}this.destination=new Oe(Ve)}}function de(Ae){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ae):(0,ae.h)(Ae)}function it(Ae,ge){const{onStoppedNotification:fe}=O.v;fe&&H.z.setTimeout(()=>fe(Ae,ge))}const ot={closed:!0,next:ie,error:function ye(Ae){throw Ae},complete:ie}},727:(It,Ne,L)=>{L.d(Ne,{Lc:()=>ce,w0:()=>ie,Nn:()=>he});var I=L(576);const O=(0,L(3888).d)(Ee=>function(j){Ee(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Je)=>`${Je+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=L(8737);class ie{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Pe of j)Pe.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,I.m)(K))try{K()}catch(Pe){H=Pe instanceof O?Pe.errors:[Pe]}const{_finalizers:Je}=this;if(Je){this._finalizers=null;for(const Pe of Je)try{ve(Pe)}catch(Oe){H=H??[],Oe instanceof O?H=[...H,...Oe.errors]:H.push(Oe)}}if(H)throw new O(H)}}add(H){var j;if(H&&H!==this)if(this.closed)ve(H);else{if(H instanceof ie){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(H)}}_hasParent(H){const{_parentage:j}=this;return j===H||Array.isArray(j)&&j.includes(H)}_addParent(H){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(H),j):j?[j,H]:H}_removeParent(H){const{_parentage:j}=this;j===H?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,H)}remove(H){const{_finalizers:j}=this;j&&(0,ae.P)(j,H),H instanceof ie&&H._removeParent(this)}}ie.EMPTY=(()=>{const Ee=new ie;return Ee.closed=!0,Ee})();const ce=ie.EMPTY;function he(Ee){return Ee instanceof ie||Ee&&"closed"in Ee&&(0,I.m)(Ee.remove)&&(0,I.m)(Ee.add)&&(0,I.m)(Ee.unsubscribe)}function ve(Ee){(0,I.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(It,Ne,L)=>{L.d(Ne,{v:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(It,Ne,L)=>{L.d(Ne,{E:()=>ee});const ee=new(L(8306).y)(ie=>ie.complete())},8996:(It,Ne,L)=>{L.d(Ne,{D:()=>ge});var I=L(8421),ee=L(5363),O=L(9468),ce=L(8306),ve=L(2202),Ee=L(576),H=L(9672);function K(fe,Ze){if(!fe)throw new Error("Iterable cannot be null");return new ce.y(Ve=>{(0,H.f)(Ve,Ze,()=>{const at=fe[Symbol.asyncIterator]();(0,H.f)(Ve,Ze,()=>{at.next().then(Q=>{Q.done?Ve.complete():Ve.next(Q.value)})},0,!0)})})}var Je=L(3670),Pe=L(8239),Oe=L(1144),Ke=L(6495),de=L(2206),ye=L(4532),it=L(3260);function ge(fe,Ze){return Ze?function Ae(fe,Ze){if(null!=fe){if((0,Je.c)(fe))return function ae(fe,Ze){return(0,I.Xf)(fe).pipe((0,O.R)(Ze),(0,ee.Q)(Ze))}(fe,Ze);if((0,Oe.z)(fe))return function he(fe,Ze){return new ce.y(Ve=>{let at=0;return Ze.schedule(function(){at===fe.length?Ve.complete():(Ve.next(fe[at++]),Ve.closed||this.schedule())})})}(fe,Ze);if((0,Pe.t)(fe))return function ie(fe,Ze){return(0,I.Xf)(fe).pipe((0,O.R)(Ze),(0,ee.Q)(Ze))}(fe,Ze);if((0,de.D)(fe))return K(fe,Ze);if((0,Ke.T)(fe))return function j(fe,Ze){return new ce.y(Ve=>{let at;return(0,H.f)(Ve,Ze,()=>{at=fe[ve.h](),(0,H.f)(Ve,Ze,()=>{let Q,pt;try{({value:Q,done:pt}=at.next())}catch(ct){return void Ve.error(ct)}pt?Ve.complete():Ve.next(Q)},0,!0)}),()=>(0,Ee.m)(at?.return)&&at.return()})}(fe,Ze);if((0,it.L)(fe))return function ot(fe,Ze){return K((0,it.Q)(fe),Ze)}(fe,Ze)}throw(0,ye.z)(fe)}(fe,Ze):(0,I.Xf)(fe)}},8421:(It,Ne,L)=>{L.d(Ne,{Xf:()=>Je});var I=L(7582),ee=L(1144),O=L(8239),ae=L(8306),ie=L(3670),ce=L(2206),he=L(4532),ve=L(6495),Ee=L(3260),H=L(576),j=L(7849),K=L(8822);function Je(Ae){if(Ae instanceof ae.y)return Ae;if(null!=Ae){if((0,ie.c)(Ae))return function Pe(Ae){return new ae.y(ge=>{const fe=Ae[K.L]();if((0,H.m)(fe.subscribe))return fe.subscribe(ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,ee.z)(Ae))return function Oe(Ae){return new ae.y(ge=>{for(let fe=0;fe<Ae.length&&!ge.closed;fe++)ge.next(Ae[fe]);ge.complete()})}(Ae);if((0,O.t)(Ae))return function Ke(Ae){return new ae.y(ge=>{Ae.then(fe=>{ge.closed||(ge.next(fe),ge.complete())},fe=>ge.error(fe)).then(null,j.h)})}(Ae);if((0,ce.D)(Ae))return ye(Ae);if((0,ve.T)(Ae))return function de(Ae){return new ae.y(ge=>{for(const fe of Ae)if(ge.next(fe),ge.closed)return;ge.complete()})}(Ae);if((0,Ee.L)(Ae))return function it(Ae){return ye((0,Ee.Q)(Ae))}(Ae)}throw(0,he.z)(Ae)}function ye(Ae){return new ae.y(ge=>{(function ot(Ae,ge){var fe,Ze,Ve,at;return(0,I.mG)(this,void 0,void 0,function*(){try{for(fe=(0,I.KL)(Ae);!(Ze=yield fe.next()).done;)if(ge.next(Ze.value),ge.closed)return}catch(Q){Ve={error:Q}}finally{try{Ze&&!Ze.done&&(at=fe.return)&&(yield at.call(fe))}finally{if(Ve)throw Ve.error}}ge.complete()})})(Ae,ge).catch(fe=>ge.error(fe))})}},6451:(It,Ne,L)=>{L.d(Ne,{T:()=>ce});var I=L(6131),ee=L(8421),O=L(515),ae=L(7669),ie=L(8996);function ce(...he){const ve=(0,ae.yG)(he),Ee=(0,ae._6)(he,1/0),H=he;return H.length?1===H.length?(0,ee.Xf)(H[0]):(0,I.J)(Ee)((0,ie.D)(H,ve)):O.E}},5403:(It,Ne,L)=>{L.d(Ne,{x:()=>ee});var I=L(2961);function ee(ae,ie,ce,he,ve){return new O(ae,ie,ce,he,ve)}class O extends I.Lv{constructor(ie,ce,he,ve,Ee,H){super(ie),this.onFinalize=Ee,this.shouldUnsubscribe=H,this._next=ce?function(j){try{ce(j)}catch(K){ie.error(K)}}:super._next,this._error=ve?function(j){try{ve(j)}catch(K){ie.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(j){ie.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(It,Ne,L)=>{L.d(Ne,{U:()=>O});var I=L(4482),ee=L(5403);function O(ae,ie){return(0,I.e)((ce,he)=>{let ve=0;ce.subscribe((0,ee.x)(he,Ee=>{he.next(ae.call(ie,Ee,ve++))}))})}},6131:(It,Ne,L)=>{L.d(Ne,{J:()=>H});var I=L(4004),ee=L(8421),O=L(4482),ae=L(9672),ie=L(5403),he=L(576);function ve(j,K,Je=1/0){return(0,he.m)(K)?ve((Pe,Oe)=>(0,I.U)((Ke,de)=>K(Pe,Ke,Oe,de))((0,ee.Xf)(j(Pe,Oe))),Je):("number"==typeof K&&(Je=K),(0,O.e)((Pe,Oe)=>function ce(j,K,Je,Pe,Oe,Ke,de,ye){const it=[];let ot=0,Ae=0,ge=!1;const fe=()=>{ge&&!it.length&&!ot&&K.complete()},Ze=at=>ot<Pe?Ve(at):it.push(at),Ve=at=>{Ke&&K.next(at),ot++;let Q=!1;(0,ee.Xf)(Je(at,Ae++)).subscribe((0,ie.x)(K,pt=>{Oe?.(pt),Ke?Ze(pt):K.next(pt)},()=>{Q=!0},void 0,()=>{if(Q)try{for(ot--;it.length&&ot<Pe;){const pt=it.shift();de?(0,ae.f)(K,de,()=>Ve(pt)):Ve(pt)}fe()}catch(pt){K.error(pt)}}))};return j.subscribe((0,ie.x)(K,Ze,()=>{ge=!0,fe()})),()=>{ye?.()}}(Pe,Oe,j,Je)))}var Ee=L(4671);function H(j=1/0){return ve(Ee.y,j)}},5363:(It,Ne,L)=>{L.d(Ne,{Q:()=>ae});var I=L(9672),ee=L(4482),O=L(5403);function ae(ie,ce=0){return(0,ee.e)((he,ve)=>{he.subscribe((0,O.x)(ve,Ee=>(0,I.f)(ve,ie,()=>ve.next(Ee),ce),()=>(0,I.f)(ve,ie,()=>ve.complete(),ce),Ee=>(0,I.f)(ve,ie,()=>ve.error(Ee),ce)))})}},3099:(It,Ne,L)=>{L.d(Ne,{B:()=>ie});var I=L(8421),ee=L(7579),O=L(2961),ae=L(4482);function ie(he={}){const{connector:ve=(()=>new ee.x),resetOnError:Ee=!0,resetOnComplete:H=!0,resetOnRefCountZero:j=!0}=he;return K=>{let Je,Pe,Oe,Ke=0,de=!1,ye=!1;const it=()=>{Pe?.unsubscribe(),Pe=void 0},ot=()=>{it(),Je=Oe=void 0,de=ye=!1},Ae=()=>{const ge=Je;ot(),ge?.unsubscribe()};return(0,ae.e)((ge,fe)=>{Ke++,!ye&&!de&&it();const Ze=Oe=Oe??ve();fe.add(()=>{Ke--,0===Ke&&!ye&&!de&&(Pe=ce(Ae,j))}),Ze.subscribe(fe),!Je&&Ke>0&&(Je=new O.Hp({next:Ve=>Ze.next(Ve),error:Ve=>{ye=!0,it(),Pe=ce(ot,Ee,Ve),Ze.error(Ve)},complete:()=>{de=!0,it(),Pe=ce(ot,H),Ze.complete()}}),(0,I.Xf)(ge).subscribe(Je))})(K)}}function ce(he,ve,...Ee){if(!0===ve)return void he();if(!1===ve)return;const H=new O.Hp({next:()=>{H.unsubscribe(),he()}});return ve(...Ee).subscribe(H)}},9468:(It,Ne,L)=>{L.d(Ne,{R:()=>ee});var I=L(4482);function ee(O,ae=0){return(0,I.e)((ie,ce)=>{ce.add(O.schedule(()=>ie.subscribe(ce),ae))})}},4408:(It,Ne,L)=>{L.d(Ne,{o:()=>ie});var I=L(727);class ee extends I.w0{constructor(he,ve){super()}schedule(he,ve=0){return this}}const O={setInterval(ce,he,...ve){const{delegate:Ee}=O;return Ee?.setInterval?Ee.setInterval(ce,he,...ve):setInterval(ce,he,...ve)},clearInterval(ce){const{delegate:he}=O;return(he?.clearInterval||clearInterval)(ce)},delegate:void 0};var ae=L(8737);class ie extends ee{constructor(he,ve){super(he,ve),this.scheduler=he,this.work=ve,this.pending=!1}schedule(he,ve=0){var Ee;if(this.closed)return this;this.state=he;const H=this.id,j=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(j,H,ve)),this.pending=!0,this.delay=ve,this.id=null!==(Ee=this.id)&&void 0!==Ee?Ee:this.requestAsyncId(j,this.id,ve),this}requestAsyncId(he,ve,Ee=0){return O.setInterval(he.flush.bind(he,this),Ee)}recycleAsyncId(he,ve,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return ve;null!=ve&&O.clearInterval(ve)}execute(he,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(he,ve);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,ve){let H,Ee=!1;try{this.work(he)}catch(j){Ee=!0,H=j||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:he,scheduler:ve}=this,{actions:Ee}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(Ee,this),null!=he&&(this.id=this.recycleAsyncId(ve,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(It,Ne,L)=>{L.d(Ne,{v:()=>O});var I=L(6063);class ee{constructor(ie,ce=ee.now){this.schedulerActionCtor=ie,this.now=ce}schedule(ie,ce=0,he){return new this.schedulerActionCtor(this,ie).schedule(he,ce)}}ee.now=I.l.now;class O extends ee{constructor(ie,ce=ee.now){super(ie,ce),this.actions=[],this._active=!1}flush(ie){const{actions:ce}=this;if(this._active)return void ce.push(ie);let he;this._active=!0;do{if(he=ie.execute(ie.state,ie.delay))break}while(ie=ce.shift());if(this._active=!1,he){for(;ie=ce.shift();)ie.unsubscribe();throw he}}}},4986:(It,Ne,L)=>{L.d(Ne,{z:()=>O});var I=L(4408);const O=new(L(7565).v)(I.o)},6063:(It,Ne,L)=>{L.d(Ne,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},3410:(It,Ne,L)=>{L.d(Ne,{z:()=>I});const I={setTimeout(ee,O,...ae){const{delegate:ie}=I;return ie?.setTimeout?ie.setTimeout(ee,O,...ae):setTimeout(ee,O,...ae)},clearTimeout(ee){const{delegate:O}=I;return(O?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(It,Ne,L)=>{L.d(Ne,{h:()=>ee});const ee=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(It,Ne,L)=>{L.d(Ne,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(It,Ne,L)=>{L.d(Ne,{_6:()=>ce,yG:()=>ie});var I=L(576);function O(he){return he[he.length-1]}function ie(he){return function ee(he){return he&&(0,I.m)(he.schedule)}(O(he))?he.pop():void 0}function ce(he,ve){return"number"==typeof O(he)?he.pop():ve}},8737:(It,Ne,L)=>{function I(ee,O){if(ee){const ae=ee.indexOf(O);0<=ae&&ee.splice(ae,1)}}L.d(Ne,{P:()=>I})},3888:(It,Ne,L)=>{function I(ee){const ae=ee(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(Ne,{d:()=>I})},2806:(It,Ne,L)=>{L.d(Ne,{O:()=>ae,x:()=>O});var I=L(2416);let ee=null;function O(ie){if(I.v.useDeprecatedSynchronousErrorHandling){const ce=!ee;if(ce&&(ee={errorThrown:!1,error:null}),ie(),ce){const{errorThrown:he,error:ve}=ee;if(ee=null,he)throw ve}}else ie()}function ae(ie){I.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ie)}},9672:(It,Ne,L)=>{function I(ee,O,ae,ie=0,ce=!1){const he=O.schedule(function(){ae(),ce?ee.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(ee.add(he),!ce)return he}L.d(Ne,{f:()=>I})},4671:(It,Ne,L)=>{function I(ee){return ee}L.d(Ne,{y:()=>I})},1144:(It,Ne,L)=>{L.d(Ne,{z:()=>I});const I=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(It,Ne,L)=>{L.d(Ne,{D:()=>ee});var I=L(576);function ee(O){return Symbol.asyncIterator&&(0,I.m)(O?.[Symbol.asyncIterator])}},576:(It,Ne,L)=>{function I(ee){return"function"==typeof ee}L.d(Ne,{m:()=>I})},3670:(It,Ne,L)=>{L.d(Ne,{c:()=>O});var I=L(8822),ee=L(576);function O(ae){return(0,ee.m)(ae[I.L])}},6495:(It,Ne,L)=>{L.d(Ne,{T:()=>O});var I=L(2202),ee=L(576);function O(ae){return(0,ee.m)(ae?.[I.h])}},8239:(It,Ne,L)=>{L.d(Ne,{t:()=>ee});var I=L(576);function ee(O){return(0,I.m)(O?.then)}},3260:(It,Ne,L)=>{L.d(Ne,{L:()=>ae,Q:()=>O});var I=L(7582),ee=L(576);function O(ie){return(0,I.FC)(this,arguments,function*(){const he=ie.getReader();try{for(;;){const{value:ve,done:Ee}=yield(0,I.qq)(he.read());if(Ee)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(ve)}}finally{he.releaseLock()}})}function ae(ie){return(0,ee.m)(ie?.getReader)}},4482:(It,Ne,L)=>{L.d(Ne,{e:()=>O});var I=L(576);function O(ae){return ie=>{if(function ee(ae){return(0,I.m)(ae?.lift)}(ie))return ie.lift(function(ce){try{return ae(ce,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(It,Ne,L)=>{L.d(Ne,{h:()=>O});var I=L(2416),ee=L(3410);function O(ae){ee.z.setTimeout(()=>{const{onUnhandledError:ie}=I.v;if(!ie)throw ae;ie(ae)})}},4532:(It,Ne,L)=>{function I(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ne,{z:()=>I})},4650:(It,Ne,L)=>{L.d(Ne,{$8M:()=>Su,AFp:()=>BI,AaK:()=>ve,CHM:()=>gu,CZH:()=>jm,EJc:()=>cd,EpF:()=>i_,F4k:()=>o_,FYo:()=>Ho,FiY:()=>Xs,G48:()=>Cb,GfV:()=>$f,JOm:()=>Oi,KtG:()=>Oc,LFG:()=>bn,Lbi:()=>ZD,Lck:()=>tv,MAs:()=>t_,NdJ:()=>a_,OlP:()=>un,Q6J:()=>n_,QGY:()=>s_,Qsj:()=>Fs,R0b:()=>ss,RDi:()=>ih,Rgc:()=>od,SBq:()=>$o,TTD:()=>li,TgZ:()=>Ah,X6Q:()=>rT,Xpm:()=>Sn,Y36:()=>yh,YNc:()=>Gg,Yjl:()=>G,Yz7:()=>gt,ZZ4:()=>Qv,_UZ:()=>Gl,_c5:()=>vT,_uU:()=>Wa,aQg:()=>Jv,cJS:()=>Ot,cg1:()=>N_,dDg:()=>WI,dqk:()=>ln,eFA:()=>KI,eoX:()=>qh,g9A:()=>$I,h0i:()=>Dc,hGG:()=>wT,hij:()=>Jg,ifc:()=>vt,ip1:()=>Fv,kL8:()=>wc,lG2:()=>F,lri:()=>Vp,oAB:()=>Qr,oxw:()=>u_,q4F:()=>hh,qLn:()=>Hf,qZA:()=>mc,rWj:()=>Bp,sBO:()=>Ab,sIi:()=>ho,s_b:()=>$h,soG:()=>Vv,vHH:()=>Oe,wAp:()=>xt,xp6:()=>ME,zSh:()=>mg,zs3:()=>Go});var I=L(7579),ee=L(727),O=L(8306),ae=L(6451),ie=L(3099);function ce(i){for(let s in i)if(i[s]===ce)return s;throw Error("Could not find renamed property on target object.")}function ve(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ve).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function Ee(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const H=ce({__forward_ref__:ce});function j(i){return i.__forward_ref__=j,i.toString=function(){return ve(this())},i}function K(i){return function Je(i){return"function"==typeof i&&i.hasOwnProperty(H)&&i.__forward_ref__===j}(i)?i():i}class Oe extends Error{constructor(s,o){super(function Ke(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function de(i){return"string"==typeof i?i:null==i?"":String(i)}function ge(i,s){throw new Oe(-201,!1)}function _e(i,s){null==i&&function De(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function gt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ot(i){return{providers:i.providers||[],imports:i.imports||[]}}function qt(i){return En(i,fr)||En(i,Xo)}function En(i,s){return i.hasOwnProperty(s)?i[s]:null}function Kn(i){return i&&(i.hasOwnProperty(Ii)||i.hasOwnProperty(yo))?i[Ii]:null}const fr=ce({\u0275prov:ce}),Ii=ce({\u0275inj:ce}),Xo=ce({ngInjectableDef:ce}),yo=ce({ngInjectorDef:ce});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Fr;function Vr(i){const s=Fr;return Fr=i,s}function _o(i,s,o){const u=qt(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&ft.Optional?null:void 0!==s?s:void ge(ve(i))}function Zn(i){return{toString:i}.toString()}var vn=(()=>((vn=vn||{})[vn.OnPush=0]="OnPush",vn[vn.Default=1]="Default",vn))(),vt=(()=>{return(i=vt||(vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",vt;var i})();const ln=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Gn={},Et=[],pr=ce({\u0275cmp:ce}),on=ce({\u0275dir:ce}),vo=ce({\u0275pipe:ce}),Yt=ce({\u0275mod:ce}),Yn=ce({\u0275fac:ce}),gr=ce({__NG_ELEMENT_ID__:ce});let Di=0;function Sn(i){return Zn(()=>{const o=!0===i.standalone,u={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===vn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Et,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||vt.Emulated,id:"c"+Di++,styles:i.styles||Et,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,m=i.features;return l.inputs=B(i.inputs,u),l.outputs=B(i.outputs),m&&m.forEach(w=>w(l)),l.directiveDefs=p?()=>("function"==typeof p?p():p).map(ji).filter(Rn):null,l.pipeDefs=p?()=>("function"==typeof p?p():p).map(ze).filter(Rn):null,l})}function ji(i){return se(i)||Z(i)}function Rn(i){return null!==i}function Qr(i){return Zn(()=>({type:i.type,bootstrap:i.bootstrap||Et,declarations:i.declarations||Et,imports:i.imports||Et,exports:i.exports||Et,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function B(i,s){if(null==i)return Gn;const o={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),o[l]=u,s&&(s[l]=p)}return o}const F=Sn;function G(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function se(i){return i[pr]||null}function Z(i){return i[on]||null}function ze(i){return i[vo]||null}function Qn(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ur(i){return Array.isArray(i)&&!0===i[1]}function Io(i){return 0!=(8&i.flags)}function ou(i){return 2==(2&i.flags)}function as(i){return 1==(1&i.flags)}function bi(i){return null!==i.template}function Eo(i){return 0!=(256&i[2])}function us(i,s){return i.hasOwnProperty(Yn)?i[Yn]:null}class ef{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function li(){return Cd}function Cd(i){return i.type.prototype.ngOnChanges&&(i.setInput=Mc),ta}function ta(){const i=tf(this),s=i?.current;if(s){const o=i.previous;if(o===Gn)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Mc(i,s,o,u){const l=tf(i)||function Nc(i,s){return i[cu]=s}(i,{previous:Gn,current:null}),p=l.current||(l.current={}),m=l.previous,w=this.declaredInputs[o],D=m[w];p[w]=new ef(D&&D.currentValue,s,m===Gn),i[u]=s}li.ngInherit=!0;const cu="__ngSimpleChanges__";function tf(i){return i[cu]||null}function kn(i){for(;Array.isArray(i);)i=i[0];return i}function jr(i,s){return kn(s[i.index])}function fu(i,s){return i.data[s]}function On(i,s){const o=s[i];return Qn(o)?o:o[0]}function js(i){return 64==(64&i[2])}function Xr(i,s){return null==s?null:i[s]}function Ss(i){i[18]=0}function vr(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const Tt={lFrame:Uc(null),bindingsEnabled:!0};function Nd(){return Tt.bindingsEnabled}function Te(){return Tt.lFrame.lView}function jt(){return Tt.lFrame.tView}function gu(i){return Tt.lFrame.contextLView=i,i[8]}function Oc(i){return Tt.lFrame.contextLView=null,i}function An(){let i=mu();for(;null!==i&&64===i.type;)i=i.parent;return i}function mu(){return Tt.lFrame.currentTNode}function ei(i,s){const o=Tt.lFrame;o.currentTNode=i,o.isParent=s}function To(){return Tt.lFrame.isParent}function cs(){return Tt.lFrame.bindingIndex++}function Zp(i,s){const o=Tt.lFrame;o.bindingIndex=o.bindingRootIndex=i,Vc(s)}function Vc(i){Tt.lFrame.currentDirectiveIndex=i}function Mr(i){Tt.lFrame.currentQueryIndex=i}function Bc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ia(i,s,o){if(o&ft.SkipSelf){let l=s,p=i;for(;!(l=l.parent,null!==l||o&ft.Host||(l=Bc(p),null===l||(p=p[15],10&l.type))););if(null===l)return!1;s=l,i=p}const u=Tt.lFrame=Gs();return u.currentTNode=s,u.lView=i,!0}function sa(i){const s=Gs(),o=i[1];Tt.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Gs(){const i=Tt.lFrame,s=null===i?null:i.child;return null===s?Uc(i):s}function Uc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function oa(){const i=Tt.lFrame;return Tt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Rd=oa;function Co(){const i=oa();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function tn(){return Tt.lFrame.selectedIndex}function ls(i){Tt.lFrame.selectedIndex=i}function zs(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const p=i.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:N}=p;m&&(i.contentHooks||(i.contentHooks=[])).push(-o,m),w&&((i.contentHooks||(i.contentHooks=[])).push(o,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,w)),D&&(i.viewHooks||(i.viewHooks=[])).push(-o,D),S&&((i.viewHooks||(i.viewHooks=[])).push(o,S),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,S)),null!=N&&(i.destroyHooks||(i.destroyHooks=[])).push(o,N)}}function aa(i,s,o){ua(i,s,3,o)}function So(i,s,o,u){(3&i[2])===o&&ua(i,s,o,u)}function Fd(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function ua(i,s,o,u){const p=u??-1,m=s.length-1;let w=0;for(let D=void 0!==u?65535&i[18]:0;D<m;D++)if("number"==typeof s[D+1]){if(w=s[D],null!=u&&w>=u)break}else s[D]<0&&(i[18]+=65536),(w<p||-1==p)&&(of(i,o,s,D),i[18]=(4294901760&i[18])+D+2),D++}function of(i,s,o,u){const l=o[u]<0,p=o[u+1],w=i[l?-o[u]:o[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class ca{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Eu(i,s,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const p=o[u++],m=o[u++],w=o[u++];i.setAttribute(s,m,w,p)}else{const p=l,m=o[++u];cf(p)?i.setProperty(s,p,m):i.setAttribute(s,p,m),u++}}return u}function Du(i){return 3===i||4===i||6===i}function cf(i){return 64===i.charCodeAt(0)}function Ao(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||Bd(i,o,l,null,-1===o||2===o?s[++u]:null)}}return i}function Bd(i,s,o,u,l){let p=0,m=i.length;if(-1===s)m=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){m=-1;break}if(w>s){m=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===o){if(null===u)return void(null!==l&&(i[p+1]=l));if(u===i[p+1])return void(i[p+2]=l)}p++,null!==u&&p++,null!==l&&p++}-1!==m&&(i.splice(m,0,s),p=m+1),i.splice(p++,0,o),null!==u&&i.splice(p++,0,u),null!==l&&i.splice(p++,0,l)}function zc(i){return-1!==i}function la(i){return 32767&i}function Hi(i,s){let o=function lf(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let da=!0;function hs(i){const s=da;return da=i,s}let ha=0;const hi={};function xo(i,s){const o=qs(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,qc(u.data,i),qc(s,null),qc(u.blueprint,null));const l=Ks(i,s),p=i.injectorIndex;if(zc(l)){const m=la(l),w=Hi(l,s),D=w[1].data;for(let S=0;S<8;S++)s[p+S]=w[m+S]|D[m+S]}return s[p+8]=l,p}function qc(i,s){i.push(0,0,0,0,0,0,0,0,s)}function qs(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ks(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){if(u=ff(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function fa(i,s,o){!function Wc(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(gr)&&(u=o[gr]),null==u&&(u=o[gr]=ha++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,o)}function bu(i,s,o){if(o&ft.Optional||void 0!==i)return i;ge()}function df(i,s,o,u){if(o&ft.Optional&&void 0===u&&(u=null),0==(o&(ft.Self|ft.Host))){const l=i[9],p=Vr(void 0);try{return l?l.get(s,u,o&ft.Optional):_o(s,u,o&ft.Optional)}finally{Vr(p)}}return bu(u,0,o)}function pa(i,s,o,u=ft.Default,l){if(null!==i){if(1024&s[2]){const m=function ma(i,s,o,u,l){let p=i,m=s;for(;null!==p&&null!==m&&1024&m[2]&&!(256&m[2]);){const w=Mo(p,m,o,u|ft.Self,hi);if(w!==hi)return w;let D=p.parent;if(!D){const S=m[21];if(S){const N=S.get(o,hi,u);if(N!==hi)return N}D=ff(m),m=m[15]}p=D}return l}(i,s,o,u,hi);if(m!==hi)return m}const p=Mo(i,s,o,u,hi);if(p!==hi)return p}return df(s,o,u,l)}function Mo(i,s,o,u,l){const p=function Ys(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(gr)?i[gr]:void 0;return"number"==typeof s?s>=0?255&s:Jp:s}(o);if("function"==typeof p){if(!ia(s,i,u))return u&ft.Host?bu(l,0,u):df(s,o,u,l);try{const m=p(u);if(null!=m||u&ft.Optional)return m;ge()}finally{Rd()}}else if("number"==typeof p){let m=null,w=qs(i,s),D=-1,S=u&ft.Host?s[16][6]:null;for((-1===w||u&ft.SkipSelf)&&(D=-1===w?Ks(i,s):s[w+8],-1!==D&&Cu(u,!1)?(m=s[1],w=la(D),s=Hi(D,s)):w=-1);-1!==w;){const N=s[1];if(hf(p,w,N.data)){const R=Qp(w,s,o,m,u,S);if(R!==hi)return R}D=s[w+8],-1!==D&&Cu(u,s[1].data[w+8]===S)&&hf(p,w,s)?(m=N,w=la(D),s=Hi(D,s)):w=-1}}return l}function Qp(i,s,o,u,l,p){const m=s[1],w=m.data[i+8],N=function zi(i,s,o,u,l){const p=i.providerIndexes,m=s.data,w=1048575&p,D=i.directiveStart,N=p>>20,$=l?w+N:i.directiveEnd;for(let Y=u?w:w+N;Y<$;Y++){const pe=m[Y];if(Y<D&&o===pe||Y>=D&&pe.type===o)return Y}if(l){const Y=m[D];if(Y&&bi(Y)&&Y.type===o)return D}return null}(w,m,o,null==u?ou(w)&&da:u!=m&&0!=(3&w.type),l&ft.Host&&p===w);return null!==N?ga(s,m,N,w):hi}function ga(i,s,o,u){let l=i[o];const p=s.data;if(function wu(i){return i instanceof ca}(l)){const m=l;m.resolving&&function it(i,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${i}${o}`)}(function ye(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():de(i)}(p[o]));const w=hs(m.canSeeViewProviders);m.resolving=!0;const D=m.injectImpl?Vr(m.injectImpl):null;ia(i,u,ft.Default);try{l=i[o]=m.factory(void 0,p,i,u),s.firstCreatePass&&o>=u.directiveStart&&function $c(i,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:p}=s.type.prototype;if(u){const m=Cd(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,l),p&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,p),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,p))}(o,p[o],s)}finally{null!==D&&Vr(D),hs(w),m.resolving=!1,Rd()}}return l}function hf(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function Cu(i,s){return!(i&ft.Self||i&ft.Host&&s)}class Wi{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return pa(this._tNode,this._lView,s,u,o)}}function Jp(){return new Wi(An(),Te())}function ff(i){const s=i[1],o=s.type;return 2===o?s.declTNode:1===o?i[6]:null}function Su(i){return function Zs(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const p=o[l];if(Du(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(p===s)return o[l+1];l+=2}}}return null}(An(),i)}const Mn="__parameters__";function ps(i,s,o){return Zn(()=>{const u=function No(i){return function(...o){if(i){const u=i(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...p){if(this instanceof l)return u.apply(this,p),this;const m=new l(...p);return w.annotation=m,w;function w(D,S,N){const R=D.hasOwnProperty(Mn)?D[Mn]:Object.defineProperty(D,Mn,{value:[]})[Mn];for(;R.length<=N;)R.push(null);return(R[N]=R[N]||[]).push(m),D}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class un{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=gt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Mi(i,s){i.forEach(o=>Array.isArray(o)?Mi(o,s):s(o))}function Qc(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function Jc(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const Jn={},Ni="__NG_DI_FLAG__",Bn="ngTempTokenPath",zd=/\n/gm,ko="__source";let Pr;function ar(i){const s=Pr;return Pr=i,s}function Pi(i,s=ft.Default){if(void 0===Pr)throw new Oe(-203,!1);return null===Pr?_o(i,void 0,s):Pr.get(i,s&ft.Optional?null:void 0,s)}function bn(i,s=ft.Default){return(function Ei(){return Fr}()||Pi)(K(i),s)}function Bu(i){const s=[];for(let o=0;o<i.length;o++){const u=K(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Oe(900,!1);let l,p=ft.Default;for(let m=0;m<u.length;m++){const w=u[m],D=tl(w);"number"==typeof D?-1===D?l=w.token:p|=D:l=w}s.push(bn(l,p))}else s.push(bn(u))}return s}function As(i,s){return i[Ni]=s,i.prototype[Ni]=s,i}function tl(i){return i[Ni]}const Xs=As(ps("Optional"),8),Ri=As(ps("SkipSelf"),4);var Oi=(()=>((Oi=Oi||{})[Oi.Important=1]="Important",Oi[Oi.DashCase=2]="DashCase",Oi))();const Fo=new Map;let v=0;const We="__ngContext__";function st(i,s){Qn(s)?(i[We]=s[20],function A(i){Fo.set(i[20],i)}(s)):i[We]=s}function Ku(i,s){return undefined(i,s)}function Ta(i){const s=i[3];return Ur(s)?s[3]:s}function Tf(i){return Uo(i[13])}function bf(i){return Uo(i[4])}function Uo(i){for(;null!==i&&!Ur(i);)i=i[4];return i}function Zu(i,s,o,u,l){if(null!=u){let p,m=!1;Ur(u)?p=u:Qn(u)&&(m=!0,u=u[0]);const w=kn(u);0===i&&null!==o?null==l?nh(s,o,w):ro(s,o,w,l||null,!0):1===i&&null!==o?ro(s,o,w,l||null,!0):2===i?function Sa(i,s,o){const u=hl(i,s);u&&function ag(i,s,o,u){i.removeChild(s,o,u)}(i,u,s,o)}(s,w,m):3===i&&s.destroyNode(w),null!=p&&function xa(i,s,o,u,l){const p=o[7];p!==kn(o)&&Zu(s,i,u,p,l);for(let w=10;w<o.length;w++){const D=o[w];Aa(D[1],D,i,s,u,p)}}(s,i,p,o,l)}}function Jd(i,s,o){return i.createElement(s,o)}function Ju(i,s){const o=i[9],u=o.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,vr(l,-1)),o.splice(u,1)}function eh(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const l=u[17];null!==l&&l!==i&&Ju(l,u),s>0&&(i[o-1][4]=u[4]);const p=Jc(i,10+s);!function ay(i,s){Aa(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=p[19];null!==m&&m.detachView(p[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Af(i,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&Aa(i,s,o,3,null,null),function Sf(i){let s=i[13];if(!s)return th(i[1],i);for(;s;){let o=null;if(Qn(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)Qn(s)&&th(s[1],s),s=s[3];null===s&&(s=i),Qn(s)&&th(s[1],s),o=s&&s[4]}s=o}}(s)}}function th(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function xf(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof ca)){const p=o[u+1];if(Array.isArray(p))for(let m=0;m<p.length;m+=2){const w=l[p[m]],D=p[m+1];try{D.call(w)}finally{}}else try{p.call(l)}finally{}}}}(i,s),function dl(i,s){const o=i.cleanup,u=s[7];let l=-1;if(null!==o)for(let p=0;p<o.length-1;p+=2)if("string"==typeof o[p]){const m=o[p+1],w="function"==typeof m?m(s):kn(s[m]),D=u[l=o[p+2]],S=o[p+3];"boolean"==typeof S?w.removeEventListener(o[p],D,S):S>=0?u[l=S]():u[l=-S].unsubscribe(),p+=2}else{const m=u[l=o[p+1]];o[p].call(m)}if(null!==u){for(let p=l+1;p<u.length;p++)(0,u[p])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&Ur(s[3])){o!==s[3]&&Ju(o,s);const u=s[19];null!==u&&u.detachView(i)}!function U(i){Fo.delete(i[20])}(s)}}function og(i,s,o){return function ba(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===vt.None||l===vt.Emulated)return null}return jr(u,o)}(i,s.parent,o)}function ro(i,s,o,u,l){i.insertBefore(s,o,u,l)}function nh(i,s,o){i.appendChild(s,o)}function jo(i,s,o,u,l){null!==u?ro(i,s,o,u,l):nh(i,s,o)}function hl(i,s){return i.parentNode(s)}let nc,Nf=function Rr(i,s,o){return 40&i.type?jr(i,o):null};function gl(i,s,o,u){const l=og(i,u,s),p=s[11],w=function Mf(i,s,o){return Nf(i,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let D=0;D<o.length;D++)jo(p,l,o[D],w,!1);else jo(p,l,o,w,!1)}function Rs(i,s){if(null!==s){const o=s.type;if(3&o)return jr(s,i);if(4&o)return ml(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return Rs(i,u);{const l=i[s.index];return Ur(l)?ml(-1,l):kn(l)}}if(32&o)return Ku(s,i)()||kn(i[s.index]);{const u=Pf(i,s);return null!==u?Array.isArray(u)?u[0]:Rs(Ta(i[16]),u):Rs(i,s.next)}}return null}function Pf(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ml(i,s){const o=10+i+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return Rs(u,l)}return s[7]}function yl(i,s,o,u,l,p,m){for(;null!=o;){const w=u[o.index],D=o.type;if(m&&0===s&&(w&&st(kn(w),u),o.flags|=4),64!=(64&o.flags))if(8&D)yl(i,s,o.child,u,l,p,!1),Zu(s,i,l,w,p);else if(32&D){const S=Ku(o,u);let N;for(;N=S();)Zu(s,i,l,N,p);Zu(s,i,l,w,p)}else 16&D?ec(i,s,u,o,l,p):Zu(s,i,l,w,p);o=m?o.projectionNext:o.next}}function Aa(i,s,o,u,l,p){yl(o,u,i.firstChild,s,l,p,!1)}function ec(i,s,o,u,l,p){const m=o[16],D=m[6].projection[u.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Zu(s,i,l,D[S],p);else yl(i,s,D,m[3],l,p,!0)}function kf(i,s,o){i.setAttribute(s,"style",o)}function _l(i,s,o){""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o)}function ih(i){nc=i}const so=new un("ENVIRONMENT_INITIALIZER"),fy=new un("INJECTOR",-1),p0=new un("INJECTOR_DEF_TYPES");class py{get(s,o=Jn){if(o===Jn){const u=new Error(`NullInjectorError: No provider for ${ve(s)}!`);throw u.name="NullInjectorError",u}return o}}function gy(...i){return{\u0275providers:ch(0,i)}}function ch(i,...s){const o=[],u=new Set;let l;return Mi(s,p=>{const m=p;jf(m,o,[],u)&&(l||(l=[]),l.push(m))}),void 0!==l&&my(l,o),o}function my(i,s){for(let o=0;o<i.length;o++){const{providers:l}=i[o];Mi(l,p=>{s.push(p)})}}function jf(i,s,o,u){if(!(i=K(i)))return!1;let l=null,p=Kn(i);const m=!p&&se(i);if(p||m){if(m&&!m.standalone)return!1;l=i}else{const D=i.ngModule;if(p=Kn(D),!p)return!1;l=D}const w=u.has(l);if(m){if(w)return!1;if(u.add(l),m.dependencies){const D="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const S of D)jf(S,s,o,u)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let S;u.add(l);try{Mi(p.imports,N=>{jf(N,s,o,u)&&(S||(S=[]),S.push(N))})}finally{}void 0!==S&&my(S,s)}if(!w){const S=us(l)||(()=>new l);s.push({provide:l,useFactory:S,deps:Et},{provide:p0,useValue:l,multi:!0},{provide:so,useValue:()=>bn(l),multi:!0})}const D=p.providers;null==D||w||Mi(D,N=>{s.push(N)})}}return l!==i&&void 0!==i.providers}const g0=ce({provide:String,useValue:ce});function lh(i){return null!==i&&"object"==typeof i&&g0 in i}function oo(i){return"function"==typeof i}const mg=new un("Set Injector scope."),dh={},vy={};let yg;function Cl(){return void 0===yg&&(yg=new py),yg}class Sl{}class wy extends Sl{constructor(s,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sc(s,m=>this.processProvider(m)),this.records.set(fy,Al(void 0,this)),l.has("environment")&&this.records.set(Sl,Al(void 0,this));const p=this.records.get(mg);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(p0.multi,Et,ft.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=ar(this),u=Vr(void 0);try{return s()}finally{ar(o),Vr(u)}}get(s,o=Jn,u=ft.Default){this.assertNotDestroyed();const l=ar(this),p=Vr(void 0);try{if(!(u&ft.SkipSelf)){let w=this.records.get(s);if(void 0===w){const D=function w0(i){return"function"==typeof i||"object"==typeof i&&i instanceof un}(s)&&qt(s);w=D&&this.injectableDefInScope(D)?Al(Pa(s),dh):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(u&ft.Self?Cl():this.parent).get(s,o=u&ft.Optional&&o===Jn?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Bn]=m[Bn]||[]).unshift(ve(s)),l)throw m;return function nl(i,s,o,u){const l=i[Bn];throw s[ko]&&l.unshift(s[ko]),i.message=function Js(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=ve(s);if(Array.isArray(s))l=s.map(ve).join(" -> ");else if("object"==typeof s){let p=[];for(let m in s)if(s.hasOwnProperty(m)){let w=s[m];p.push(m+":"+("string"==typeof w?JSON.stringify(w):ve(w)))}l=`{${p.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${i.replace(zd,"\n  ")}`}("\n"+i.message,l,o,u),i.ngTokenPath=l,i[Bn]=null,i}(m,s,"R3InjectorError",this.source)}throw m}finally{Vr(p),ar(l)}}resolveInjectorInitializers(){const s=ar(this),o=Vr(void 0);try{const u=this.get(so.multi,Et,ft.Self);for(const l of u)l()}finally{ar(s),Vr(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(ve(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processProvider(s){let o=oo(s=K(s))?s:K(s&&s.provide);const u=function v0(i){return lh(i)?Al(void 0,i.useValue):Al(function Iy(i,s,o){let u;if(oo(i)){const l=K(i);return us(l)||Pa(l)}if(lh(i))u=()=>K(i.useValue);else if(function _y(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Bu(i.deps||[]));else if(function m0(i){return!(!i||!i.useExisting)}(i))u=()=>bn(K(i.useExisting));else{const l=K(i&&(i.useClass||i.provide));if(!function _g(i){return!!i.deps}(i))return us(l)||Pa(l);u=()=>new l(...Bu(i.deps))}return u}(i),dh)}(s);if(oo(s)||!0!==s.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Al(void 0,dh,!0),l.factory=()=>Bu(l.multi),this.records.set(o,l)),o=s,l.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===dh&&(o.value=vy,o.value=o.factory()),"object"==typeof o.value&&o.value&&function ys(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=K(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Pa(i){const s=qt(i),o=null!==s?s.factory:us(i);if(null!==o)return o;if(i instanceof un)throw new Oe(204,!1);if(i instanceof Function)return function _0(i){const s=i.length;if(s>0)throw function Po(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?"),new Oe(204,!1);const o=function Cr(i){const s=i&&(i[fr]||i[Xo]);if(s){const o=function Lr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Oe(204,!1)}function Al(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function I0(i){return!!i.\u0275providers}function sc(i,s){for(const o of i)Array.isArray(o)?sc(o,s):I0(o)?sc(o.\u0275providers,s):s(o)}class Ls{}class Dy{resolveComponentFactory(s){throw function Ey(i){const s=Error(`No component factory found for ${ve(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let _s=(()=>{class i{}return i.NULL=new Dy,i})();function E0(){return oc(An(),Te())}function oc(i,s){return new $o(jr(i,s))}let $o=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=E0,i})();class Ho{}let Fs=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function oi(){const i=Te(),o=On(An().index,i);return(Qn(o)?o:i)[11]}(),i})(),vg=(()=>{class i{}return i.\u0275prov=gt({token:i,providedIn:"root",factory:()=>null}),i})();class $f{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const hh=new $f("14.3.0"),fh={};function by(i){return i.ngOriginalError}class Hf{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&by(s);for(;o&&by(o);)o=by(o);return o||null}}function ke(i,s,o){let u=i.length;for(;;){const l=i.indexOf(s,o);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const p=s.length;if(l+p===u||i.charCodeAt(l+p)<=32)return l}o=l+1}}const vs="ng-template";function Sy(i,s,o){let u=0;for(;u<i.length;){let l=i[u++];if(o&&"class"===l){if(l=i[u],-1!==ke(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function nt(i){return 4===i.type&&i.value!==vs}function yt(i,s,o){return s===(4!==i.type||o?i.value:vs)}function bE(i,s,o){let u=4;const l=i.attrs||[],p=function b0(i){for(let s=0;s<i.length;s++)if(Du(i[s]))return s;return i.length}(l);let m=!1;for(let w=0;w<s.length;w++){const D=s[w];if("number"!=typeof D){if(!m)if(4&u){if(u=2|1&u,""!==D&&!yt(i,D,o)||""===D&&1===s.length){if(Ge(u))return!1;m=!0}}else{const S=8&u?D:s[++w];if(8&u&&null!==i.attrs){if(!Sy(i.attrs,S,o)){if(Ge(u))return!1;m=!0}continue}const R=oe(8&u?"class":D,l,nt(i),o);if(-1===R){if(Ge(u))return!1;m=!0;continue}if(""!==S){let $;$=R>p?"":l[R+1].toLowerCase();const Y=8&u?$:null;if(Y&&-1!==ke(Y,S,0)||2&u&&S!==$){if(Ge(u))return!1;m=!0}}}}else{if(!m&&!Ge(u)&&!Ge(D))return!1;if(m&&Ge(D))continue;m=!1,u=D|1&u}}return Ge(u)||m}function Ge(i){return 0==(1&i)}function oe(i,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let p=!1;for(;l<s.length;){const m=s[l];if(m===i)return l;if(3===m||6===m)p=!0;else{if(1===m||2===m){let w=s[++l];for(;"string"==typeof w;)w=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=p?1:2}return-1}return function CE(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function be(i,s,o=!1){for(let u=0;u<s.length;u++)if(bE(i,s[u],o))return!0;return!1}function C0(i,s){return i?":not("+s.trim()+")":s}function AE(i){let s=i[0],o=1,u=2,l="",p=!1;for(;o<i.length;){let m=i[o];if("string"==typeof m)if(2&u){const w=i[++o];l+="["+m+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Ge(m)&&(s+=C0(p,l),l=""),u=m,p=p||!Ge(u);o++}return""!==l&&(s+=C0(p,l)),s}const Vt={};function ME(i){A0(jt(),Te(),tn()+i,!1)}function A0(i,s,o,u){if(!u)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&aa(s,p,o)}else{const p=i.preOrderHooks;null!==p&&So(s,p,0,o)}ls(o)}function qn(i,s=null,o=null,u){const l=Qe(i,s,o,u);return l.resolveInjectorInitializers(),l}function Qe(i,s=null,o=null,u,l=new Set){const p=[o||Et,gy(i)];return u=u||("object"==typeof i?void 0:ve(i)),new wy(p,s||Cl(),u||null,l)}let Go=(()=>{class i{static create(o,u){if(Array.isArray(o))return qn({name:""},u,o,"");{const l=o.name??"";return qn({name:l},o.parent,o.providers,l)}}}return i.THROW_IF_NOT_FOUND=Jn,i.NULL=new py,i.\u0275prov=gt({token:i,providedIn:"any",factory:()=>bn(fy)}),i.__NG_ELEMENT_ID__=-1,i})();function yh(i,s=ft.Default){const o=Te();return null===o?bn(i,s):pa(An(),o,K(i),s)}function Fa(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],p=o[u+1];if(-1!==p){const m=i.data[p];Mr(l),m.contentQueries(2,s[p],p)}}}function wh(i,s,o,u,l,p,m,w,D,S,N){const R=s.blueprint.slice();return R[0]=l,R[2]=76|u,(null!==N||i&&1024&i[2])&&(R[2]|=1024),Ss(R),R[3]=R[15]=i,R[8]=o,R[10]=m||i&&i[10],R[11]=w||i&&i[11],R[12]=D||i&&i[12]||null,R[9]=S||i&&i[9]||null,R[6]=p,R[20]=function T(){return v++}(),R[21]=N,R[16]=2==s.type?i[16]:R,R}function Va(i,s,o,u,l){let p=i.data[s];if(null===p)p=function Ba(i,s,o,u,l){const p=mu(),m=To(),D=i.data[s]=function Ln(i,s,o,u,l,p){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?p:p&&p.parent,o,s,u,l);return null===i.firstChild&&(i.firstChild=D),null!==p&&(m?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(i,s,o,u,l),function Pd(){return Tt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=o,p.value=u,p.attrs=l;const m=function $s(){const i=Tt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===m?-1:m.injectorIndex}return ei(p,!0),p}function lc(i,s,o,u){if(0===o)return-1;const l=s.length;for(let p=0;p<o;p++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function Ol(i,s,o){sa(s);try{const u=i.viewQuery;null!==u&&Ih(1,u,o);const l=i.template;null!==l&&$y(i,s,l,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Fa(i,s),i.staticViewQueries&&Ih(2,i.viewQuery,o);const p=i.components;null!==p&&function vh(i,s){for(let o=0;o<s.length;o++)ew(i,s[o])}(s,p)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Co()}}function Qf(i,s,o,u){const l=s[2];if(128!=(128&l)){sa(s);try{Ss(s),function Ai(i){return Tt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&$y(i,s,o,2,u);const m=3==(3&l);if(m){const S=i.preOrderCheckHooks;null!==S&&aa(s,S,null)}else{const S=i.preOrderHooks;null!==S&&So(s,S,0,null),Fd(s,0)}if(function Rg(i){for(let s=Tf(i);null!==s;s=bf(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],p=l[3];0==(512&l[2])&&vr(p,1),l[2]|=512}}}(s),function Xf(i){for(let s=Tf(i);null!==s;s=bf(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];js(u)&&Qf(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&Fa(i,s),m){const S=i.contentCheckHooks;null!==S&&aa(s,S)}else{const S=i.contentHooks;null!==S&&So(s,S,1),Fd(s,1)}!function Yf(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)ls(~l);else{const p=l,m=o[++u],w=o[++u];Zp(m,p),w(2,s[p])}}}finally{ls(-1)}}(i,s);const w=i.components;null!==w&&function G0(i,s){for(let o=0;o<s.length;o++)kg(i,s[o])}(s,w);const D=i.viewQuery;if(null!==D&&Ih(2,D,u),m){const S=i.viewCheckHooks;null!==S&&aa(s,S)}else{const S=i.viewHooks;null!==S&&So(s,S,2),Fd(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,vr(s[3],-1))}finally{Co()}}}function $y(i,s,o,u,l){const p=tn(),m=2&u;try{ls(-1),m&&s.length>22&&A0(i,s,22,!1),o(u,l)}finally{ls(p)}}function Ll(i,s,o){!Nd()||(function Y0(i,s,o,u){const l=o.directiveStart,p=o.directiveEnd;i.firstCreatePass||xo(o,s),st(u,s);const m=o.initialInputs;for(let w=l;w<p;w++){const D=i.data[w],S=bi(D);S&&$E(s,o,D);const N=ga(s,i,w,o);st(N,s),null!==m&&HE(0,w-l,N,D,0,m),S&&(On(o.index,s)[8]=N)}}(i,s,o,jr(o,s)),128==(128&o.flags)&&function qy(i,s,o){const u=o.directiveStart,l=o.directiveEnd,p=o.index,m=function bo(){return Tt.lFrame.currentDirectiveIndex}();try{ls(p);for(let w=u;w<l;w++){const D=i.data[w],S=s[w];Vc(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Ky(D,S)}}finally{ls(-1),Vc(m)}}(i,s,o))}function Ng(i,s,o=jr){const u=s.localNames;if(null!==u){let l=s.index+1;for(let p=0;p<u.length;p+=2){const m=u[p+1],w=-1===m?o(s,i):i[m];i[l++]=w}}}function z0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Hy(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Hy(i,s,o,u,l,p,m,w,D,S){const N=22+u,R=N+l,$=function W0(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:Vt);return o}(N,R),Y="function"==typeof S?S():S;return $[1]={type:i,blueprint:$,template:o,queries:null,viewQuery:w,declTNode:s,data:$.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:D,consts:Y,incompleteFirstPass:!1}}function Ua(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function zy(i,s){const u=s.directiveEnd,l=i.data,p=s.attrs,m=[];let w=null,D=null;for(let S=s.directiveStart;S<u;S++){const N=l[S],R=N.inputs,$=null===p||nt(s)?null:GE(R,p);m.push($),w=Ua(R,S,w),D=Ua(N.outputs,S,D)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=w,s.outputs=D}function K0(i,s){const o=On(s,i);16&o[2]||(o[2]|=32)}function dc(i,s,o,u){let l=!1;if(Nd()){const p=function Q0(i,s,o){const u=i.directiveRegistry;let l=null;if(u)for(let p=0;p<u.length;p++){const m=u[p];be(o,m.selectors,!1)&&(l||(l=[]),fa(xo(o,s),i,m.type),bi(m)?(Zy(i,o),l.unshift(m)):l.push(m))}return l}(i,s,o),m=null===u?null:{"":-1};if(null!==p){l=!0,J0(o,i.data.length,p.length);for(let N=0;N<p.length;N++){const R=p[N];R.providersResolver&&R.providersResolver(R)}let w=!1,D=!1,S=lc(i,s,p.length,null);for(let N=0;N<p.length;N++){const R=p[N];o.mergedAttrs=Ao(o.mergedAttrs,R.hostAttrs),Yy(i,o,s,S,R),jE(S,R,m),null!==R.contentQueries&&(o.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(o.flags|=128);const $=R.type.prototype;!w&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),w=!0),!D&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),D=!0),S++}zy(i,o)}m&&function UE(i,s,o){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const p=o[s[l+1]];if(null==p)throw new Oe(-301,!1);u.push(s[l],p)}}}(o,u,m)}return o.mergedAttrs=Ao(o.mergedAttrs,o.attrs),l}function Pg(i,s,o,u,l,p){const m=p.hostBindings;if(m){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const D=~s.index;(function Wy(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(w)!=D&&w.push(D),w.push(u,l,m)}}function Ky(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Zy(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function jE(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;bi(s)&&(o[""]=i)}}function J0(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function Yy(i,s,o,u,l){i.data[u]=l;const p=l.factory||(l.factory=us(l.type)),m=new ca(p,bi(l),yh);i.blueprint[u]=m,o[u]=m,Pg(i,s,0,u,lc(i,o,l.hostVars,Vt),l)}function $E(i,s,o){const u=jr(s,i),l=z0(o),p=i[10],m=ep(i,wh(i,l,null,o.onPush?32:16,u,s,p,p.createRenderer(u,o),null,null,null));i[s.index]=m}function HE(i,s,o,u,l,p){const m=p[s];if(null!==m){const w=u.setInput;for(let D=0;D<m.length;){const S=m[D++],N=m[D++],R=m[D++];null!==w?u.setInput(o,R,S,N):o[N]=R}}}function GE(i,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function hc(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function kg(i,s){const o=On(s,i);if(js(o)){const u=o[1];48&o[2]?Qf(u,o,u.template,o[8]):o[5]>0&&Og(o)}}function Og(i){for(let u=Tf(i);null!==u;u=bf(u))for(let l=10;l<u.length;l++){const p=u[l];if(js(p))if(512&p[2]){const m=p[1];Qf(m,p,m.template,p[8])}else p[5]>0&&Og(p)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=On(o[u],i);js(l)&&l[5]>0&&Og(l)}}function ew(i,s){const o=On(s,i),u=o[1];(function ja(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),Ol(u,o,o[8])}function ep(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function fc(i){for(;i;){i[2]|=32;const s=Ta(i);if(Eo(i)&&!s)return i;i=s}return null}function tp(i,s,o,u=!0){const l=s[10];l.begin&&l.begin();try{Qf(i,s,i.template,o)}catch(m){throw u&&np(s,m),m}finally{l.end&&l.end()}}function Ih(i,s,o){Mr(0),s(i,o)}function pc(i){return i[7]||(i[7]=[])}function gi(i){return i.cleanup||(i.cleanup=[])}function np(i,s){const o=i[9],u=o?o.get(Hf,null):null;u&&u.handleError(s)}function Fl(i,s,o,u,l){for(let p=0;p<o.length;){const m=o[p++],w=o[p++],D=s[m],S=i.data[m];null!==S.setInput?S.setInput(D,l,u,w):D[w]=l}}function qo(i,s,o){const u=function di(i,s){return kn(s[i])}(s,i);!function Yu(i,s,o){i.setValue(s,o)}(i[11],u,o)}function Eh(i,s,o){let u=o?i.styles:null,l=o?i.classes:null,p=0;if(null!==s)for(let m=0;m<s.length;m++){const w=s[m];"number"==typeof w?p=w:1==p?l=Ee(l,w):2==p&&(u=Ee(u,w+": "+s[++m]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=l:i.classesWithoutHost=l}function gc(i,s,o,u,l=!1){for(;null!==o;){const p=s[o.index];if(null!==p&&u.push(kn(p)),Ur(p))for(let w=10;w<p.length;w++){const D=p[w],S=D[1].firstChild;null!==S&&gc(D[1],D,S,u)}const m=o.type;if(8&m)gc(i,s,o.child,u);else if(32&m){const w=Ku(o,s);let D;for(;D=w();)u.push(D)}else if(16&m){const w=Pf(s,o);if(Array.isArray(w))u.push(...w);else{const D=Ta(s[16]);gc(D[1],D,w,u,!0)}}o=l?o.projectionNext:o.next}return u}class Dh{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return gc(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ur(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(eh(s,u),Jc(o,u))}this._attachedToViewContainer=!1}Af(this._lView[1],this._lView)}onDestroy(s){!function Gy(i,s,o,u){const l=pc(s);null===o?l.push(u):(l.push(o),i.firstCreatePass&&gi(i).push(u,l.length-1))}(this._lView[1],this._lView,null,s)}markForCheck(){fc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){tp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cf(i,s){Aa(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Oe(902,!1);this._appRef=s}}class rw extends Dh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;tp(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Jy extends _s{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=se(s);return new Th(o,this.ngModule)}}function Ko(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}class ts{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){const l=this.injector.get(s,fh,u);return l!==fh||o===fh?l:this.parentInjector.get(s,o,u)}}class Th extends Ls{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function xE(i){return i.map(AE).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Ko(this.componentDef.inputs)}get outputs(){return Ko(this.componentDef.outputs)}create(s,o,u,l){let p=(l=l||this.ngModule)instanceof Sl?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const m=p?new ts(s,p):s,w=m.get(Ho,null);if(null===w)throw new Oe(407,!1);const D=m.get(vg,null),S=w.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",R=u?function ai(i,s,o){return i.selectRootElement(s,o===vt.ShadowDom)}(S,u,this.componentDef.encapsulation):Jd(S,N,function zE(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(N)),$=this.componentDef.onPush?288:272,Y=Hy(0,null,null,1,0,null,null,null,null,null),pe=wh(null,Y,null,$,null,null,w,S,D,m,null);let Le,qe;sa(pe);try{const rt=function ip(i,s,o,u,l,p){const m=o[1];o[22]=i;const D=Va(m,22,2,"#host",null),S=D.mergedAttrs=s.hostAttrs;null!==S&&(Eh(D,S,!0),null!==i&&(Eu(l,i,S),null!==D.classes&&_l(l,i,D.classes),null!==D.styles&&kf(l,i,D.styles)));const N=u.createRenderer(i,s),R=wh(o,z0(s),null,s.onPush?32:16,o[22],D,u,N,p||null,null,null);return m.firstCreatePass&&(fa(xo(D,o),m,s.type),Zy(m,D),J0(D,o.length,1)),ep(o,R),o[22]=R}(R,this.componentDef,pe,w,S);if(R)if(u)Eu(S,R,["ng-version",hh.full]);else{const{attrs:At,classes:Se}=function S0(i){const s=[],o=[];let u=1,l=2;for(;u<i.length;){let p=i[u];if("string"==typeof p)2===l?""!==p&&s.push(p,i[++u]):8===l&&o.push(p);else{if(!Ge(l))break;l=p}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);At&&Eu(S,R,At),Se&&Se.length>0&&_l(S,R,Se.join(" "))}if(qe=fu(Y,22),void 0!==o){const At=qe.projection=[];for(let Se=0;Se<this.ngContentSelectors.length;Se++){const Pt=o[Se];At.push(null!=Pt?Array.from(Pt):null)}}Le=function KE(i,s,o,u){const l=o[1],p=function _n(i,s,o){const u=An();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Yy(i,u,s,lc(i,s,1,null),o),zy(i,u));const l=ga(s,i,u.directiveStart,u);st(l,s);const p=jr(u,s);return p&&st(p,s),l}(l,o,s);if(i[8]=o[8]=p,null!==u)for(const w of u)w(p,s);if(s.contentQueries){const w=An();s.contentQueries(1,p,w.directiveStart)}const m=An();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ls(m.index),Pg(o[1],m,0,m.directiveStart,m.directiveEnd,s),Ky(s,p)),p}(rt,this.componentDef,pe,[ZE]),Ol(Y,pe,null)}finally{Co()}return new Zo(this.componentType,Le,oc(qe,pe),pe,qe)}}class Zo extends class vE{}{constructor(s,o,u,l,p){super(),this.location=u,this._rootLView=l,this._tNode=p,this.instance=o,this.hostView=this.changeDetectorRef=new rw(l),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[s])){const p=this._rootLView;Fl(p[1],p,l,s,o),K0(p,this._tNode.index)}}get injector(){return new Wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function ZE(){const i=An();zs(Te()[1],i)}let $a=null;function Is(){if(!$a){const i=ln.Symbol;if(i&&i.iterator)$a=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&($a=u)}}}return $a}function ho(i){return!!Bg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Is()in i)}function Bg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function mi(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function Gg(i,s,o,u,l,p,m,w){const D=Te(),S=jt(),N=i+22,R=S.firstCreatePass?function fw(i,s,o,u,l,p,m,w,D){const S=s.consts,N=Va(s,i,4,m||null,Xr(S,w));dc(s,o,N,Xr(S,D)),zs(s,N);const R=N.tViews=Hy(2,N,u,l,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,S);return null!==s.queries&&(s.queries.template(s,N),R.queries=s.queries.embeddedTView(N)),N}(N,S,D,s,o,u,l,p,m):S.data[N];ei(R,!1);const $=D[11].createComment("");gl(S,D,$,R),st($,D),ep(D,D[N]=hc($,D,$,R)),as(R)&&Ll(S,D,R),null!=m&&Ng(D,R,w)}function t_(i){return function Do(i,s){return i[s]}(function xn(){return Tt.lFrame.contextLView}(),22+i)}function n_(i,s,o){const u=Te();return mi(u,cs(),s)&&function qr(i,s,o,u,l,p,m,w){const D=jr(s,o);let N,S=s.inputs;!w&&null!=S&&(N=S[u])?(Fl(i,o,N,u,l),ou(s)&&K0(o,s.index)):3&s.type&&(u=function q0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=m?m(l,s.value||"",u):l,p.setProperty(D,u,l))}(jt(),function wn(){const i=Tt.lFrame;return fu(i.tView,i.selectedIndex)}(),u,i,s,u[11],o,!1),n_}function Wg(i,s,o,u,l){const m=l?"class":"style";Fl(i,o,s.inputs[m],m,u)}function Ah(i,s,o,u){const l=Te(),p=jt(),m=22+i,w=l[11],D=l[m]=Jd(w,s,function vu(){return Tt.lFrame.currentNamespace}()),S=p.firstCreatePass?function pw(i,s,o,u,l,p,m){const w=s.consts,S=Va(s,i,2,l,Xr(w,p));return dc(s,o,S,Xr(w,m)),null!==S.attrs&&Eh(S,S.attrs,!1),null!==S.mergedAttrs&&Eh(S,S.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,S),S}(m,p,l,0,s,o,u):p.data[m];ei(S,!0);const N=S.mergedAttrs;null!==N&&Eu(w,D,N);const R=S.classes;null!==R&&_l(w,D,R);const $=S.styles;return null!==$&&kf(w,D,$),64!=(64&S.flags)&&gl(p,l,D,S),0===function na(){return Tt.lFrame.elementDepthCount}()&&st(D,l),function xd(){Tt.lFrame.elementDepthCount++}(),as(S)&&(Ll(p,l,S),function Jf(i,s,o){if(Io(s)){const l=s.directiveEnd;for(let p=s.directiveStart;p<l;p++){const m=i.data[p];m.contentQueries&&m.contentQueries(1,o[p],p)}}}(p,S,l)),null!==u&&Ng(l,S),Ah}function mc(){let i=An();To()?function Lc(){Tt.lFrame.isParent=!1}():(i=i.parent,ei(i,!1));const s=i;!function Md(){Tt.lFrame.elementDepthCount--}();const o=jt();return o.firstCreatePass&&(zs(o,i),Io(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Vd(i){return 0!=(16&i.flags)}(s)&&Wg(o,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function uf(i){return 0!=(32&i.flags)}(s)&&Wg(o,s,Te(),s.stylesWithoutHost,!1),mc}function Gl(i,s,o,u){return Ah(i,s,o,u),mc(),Gl}function i_(){return Te()}function s_(i){return!!i&&"function"==typeof i.then}function o_(i){return!!i&&"function"==typeof i.subscribe}const gw=o_;function a_(i,s,o,u){const l=Te(),p=jt(),m=An();return function yw(i,s,o,u,l,p,m,w){const D=as(u),N=i.firstCreatePass&&gi(i),R=s[8],$=pc(s);let Y=!0;if(3&u.type||w){const qe=jr(u,s),rt=w?w(qe):qe,At=$.length,Se=w?cn=>w(kn(cn[u.index])):u.index;let Pt=null;if(!w&&D&&(Pt=function XE(i,s,o,u){const l=i.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const m=l[p];if(m===o&&l[p+1]===u){const w=s[7],D=l[p+2];return w.length>D?w[D]:null}"string"==typeof m&&(p+=2)}return null}(i,s,l,u.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=p,Pt.__ngLastListenerFn__=p,Y=!1;else{p=zl(u,s,R,p,!1);const cn=o.listen(rt,l,p);$.push(p,cn),N&&N.push(l,Se,At,At+1)}}else p=zl(u,s,R,p,!1);const pe=u.outputs;let Le;if(Y&&null!==pe&&(Le=pe[l])){const qe=Le.length;if(qe)for(let rt=0;rt<qe;rt+=2){const Hn=s[Le[rt]][Le[rt+1]].subscribe(p),Qo=$.length;$.push(p,Hn),N&&N.push(l,u.index,Qo,-(Qo+1))}}}(p,l,l[11],m,i,s,0,u),a_}function Kg(i,s,o,u){try{return!1!==o(u)}catch(l){return np(i,l),!1}}function zl(i,s,o,u,l){return function p(m){if(m===Function)return u;fc(2&i.flags?On(i.index,s):s);let D=Kg(s,0,u,m),S=p.__ngNextListenerFn__;for(;S;)D=Kg(s,0,S,m)&&D,S=S.__ngNextListenerFn__;return l&&!1===D&&(m.preventDefault(),m.returnValue=!1),D}}function u_(i=1){return function _u(i){return(Tt.lFrame.contextLView=function Yp(i,s){for(;i>0;)s=s[15],i--;return s}(i,Tt.lFrame.contextLView))[8]}(i)}function Wa(i,s=""){const o=Te(),u=jt(),l=i+22,p=u.firstCreatePass?Va(u,l,1,s,null):u.data[l],m=o[l]=function no(i,s){return i.createText(s)}(o[11],s);gl(u,o,m,p),ei(p,!1)}function Jg(i,s,o){const u=Te(),l=function Yo(i,s,o,u){return mi(i,cs(),o)?s+de(o)+u:Vt}(u,i,s,o);return l!==Vt&&qo(u,tn(),l),Jg}const Ql=void 0;var jw=["en",[["a","p"],["AM","PM"],Ql],[["AM","PM"],Ql,Ql],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ql,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ql,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ql,"{1} 'at' {0}",Ql],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function um(i){const o=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Rh={};function N_(i){const s=function lD(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=kh(s);if(o)return o;const u=s.split("-")[0];if(o=kh(u),o)return o;if("en"===u)return jw;throw new Oe(701,!1)}function wc(i){return N_(i)[xt.PluralCase]}function kh(i){return i in Rh||(Rh[i]=ln.ng&&ln.ng.common&&ln.ng.common.locales&&ln.ng.common.locales[i]),Rh[i]}var xt=(()=>((xt=xt||{})[xt.LocaleId=0]="LocaleId",xt[xt.DayPeriodsFormat=1]="DayPeriodsFormat",xt[xt.DayPeriodsStandalone=2]="DayPeriodsStandalone",xt[xt.DaysFormat=3]="DaysFormat",xt[xt.DaysStandalone=4]="DaysStandalone",xt[xt.MonthsFormat=5]="MonthsFormat",xt[xt.MonthsStandalone=6]="MonthsStandalone",xt[xt.Eras=7]="Eras",xt[xt.FirstDayOfWeek=8]="FirstDayOfWeek",xt[xt.WeekendRange=9]="WeekendRange",xt[xt.DateFormat=10]="DateFormat",xt[xt.TimeFormat=11]="TimeFormat",xt[xt.DateTimeFormat=12]="DateTimeFormat",xt[xt.NumberSymbols=13]="NumberSymbols",xt[xt.NumberFormats=14]="NumberFormats",xt[xt.CurrencyCode=15]="CurrencyCode",xt[xt.CurrencySymbol=16]="CurrencySymbol",xt[xt.CurrencyName=17]="CurrencyName",xt[xt.Currencies=18]="Currencies",xt[xt.Directionality=19]="Directionality",xt[xt.PluralCase=20]="PluralCase",xt[xt.ExtraData=21]="ExtraData",xt))();const Oh="en-US";let Hw=Oh;class Dc{}function tv(i,s){return new Im(i,s??null)}class Im extends Dc{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jy(this);const u=function Rt(i,s){const o=i[Yt]||null;if(!o&&!0===s)throw new Error(`Type ${ve(i)} does not have '\u0275mod' property.`);return o}(s);this._bootstrapComponents=function Ji(i){return i instanceof Function?i():i}(u.bootstrap),this._r3Injector=Qe(s,o,[{provide:Dc,useValue:this},{provide:_s,useValue:this.componentFactoryResolver}],ve(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class nv extends class SD{}{constructor(s){super(),this.moduleType=s}create(s){return new Im(this.moduleType,s)}}function Ap(i){return s=>{setTimeout(i,void 0,s)}}const Za=class VD extends I.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let l=s,p=o||(()=>null),m=u;if(s&&"object"==typeof s){const D=s;l=D.next?.bind(D),p=D.error?.bind(D),m=D.complete?.bind(D)}this.__isAsync&&(p=Ap(p),l&&(l=Ap(l)),m&&(m=Ap(m)));const w=super.subscribe({next:l,error:p,complete:m});return s instanceof ee.w0&&s.add(w),w}};let od=(()=>{class i{}return i.__NG_ELEMENT_ID__=gv,i})();const jh=od,yI=class extends jh{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,l=wh(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),Ol(u,l,s),new Dh(l)}};function gv(){return function Am(i,s){return 4&i.type?new yI(s,i,oc(i,s)):null}(An(),Te())}let $h=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ya,i})();function Ya(){return function vI(i,s){let o;const u=s[i.index];if(Ur(u))o=u;else{let l;if(8&i.type)l=kn(u);else{const p=s[11];l=p.createComment("");const m=jr(i,s);ro(p,hl(p,m),l,function fl(i,s){return i.nextSibling(s)}(p,m),!1)}s[i.index]=o=hc(u,s,l,i),ep(s,o)}return new _I(o,i,s)}(An(),Te())}const mv=$h,_I=class extends mv{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return oc(this._hostTNode,this._hostLView)}get injector(){return new Wi(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ks(this._hostTNode,this._hostLView);if(zc(s)){const o=Hi(s,this._hostLView),u=la(s);return new Wi(o[1].data[u+8],o)}return new Wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=xm(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){let l,p;"number"==typeof u?l=u:null!=u&&(l=u.index,p=u.injector);const m=s.createEmbeddedView(o||{},p);return this.insert(m,l),m}createComponent(s,o,u,l,p){const m=s&&!function fi(i){return"function"==typeof i}(s);let w;if(m)w=o;else{const R=o||{};w=R.index,u=R.injector,l=R.projectableNodes,p=R.environmentInjector||R.ngModuleRef}const D=m?s:new Th(se(s)),S=u||this.parentInjector;if(!p&&null==D.ngModule){const $=(m?S:this.parentInjector).get(Sl,null);$&&(p=$)}const N=D.create(S,l,void 0,p);return this.insert(N.hostView,w),N}insert(s,o){const u=s._lView,l=u[1];if(function kc(i){return Ur(i[3])}(u)){const N=this.indexOf(s);if(-1!==N)this.detach(N);else{const R=u[3],$=new _I(R,R[6],R[3]);$.detach($.indexOf(s))}}const p=this._adjustIndex(o),m=this._lContainer;!function Xd(i,s,o,u){const l=10+u,p=o.length;u>0&&(o[l-1][4]=s),u<p-10?(s[4]=o[l],Qc(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function uy(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(m,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(l,u,m,p);const w=ml(p,m),D=u[11],S=hl(D,m[7]);return null!==S&&function Qu(i,s,o,u,l,p){u[0]=l,u[6]=s,Aa(i,u,o,1,l,p)}(l,m[6],D,u,S,w),s.attachToViewContainerRef(),Qc(yv(m),p,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=xm(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=eh(this._lContainer,o);u&&(Jc(yv(this._lContainer),o),Af(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=eh(this._lContainer,o);return u&&null!=Jc(yv(this._lContainer),o)?new Dh(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function xm(i){return i[8]}function yv(i){return i[8]||(i[8]=[])}function Um(...i){}const Fv=new un("Application Initializer");let jm=(()=>{class i{constructor(o){this.appInits=o,this.resolve=Um,this.reject=Um,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const p=this.appInits[l]();if(s_(p))o.push(p);else if(gw(p)){const m=new Promise((w,D)=>{p.subscribe({complete:w,error:D})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(bn(Fv,8))},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const BI=new un("AppId",{providedIn:"root",factory:function UI(){return`${jI()}${jI()}${jI()}`}});function jI(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $I=new un("Platform Initializer"),ZD=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),HI=new un("appBootstrapListener"),Vv=new un("LocaleId",{providedIn:"root",factory:()=>function el(i,s=ft.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),bn(i,s)}(Vv,ft.Optional|ft.SkipSelf)||function Xa(){return typeof $localize<"u"&&$localize.locale||Oh}()}),cd=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),JD=(()=>Promise.resolve(0))();function Uv(i){typeof Zone>"u"?JD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ss{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Za(!1),this.onMicrotaskEmpty=new Za(!1),this.onStable=new Za(!1),this.onError=new Za(!1),typeof Zone>"u")throw new Oe(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function XD(){let i=ln.requestAnimationFrame,s=ln.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function zI(i){const s=()=>{!function dd(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(ln,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,zm(i),i.isCheckStableRunning=!0,Gm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),zm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,p,m,w)=>{try{return Wm(i),o.invokeTask(l,p,m,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Wh(i)}},onInvoke:(o,u,l,p,m,w,D)=>{try{return Wm(i),o.invoke(l,p,m,w,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),Wh(i)}},onHasTask:(o,u,l,p)=>{o.hasTask(l,p),u===l&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,zm(i),Gm(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(o,u,l,p)=>(o.handleError(l,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ss.isInAngularZone())throw new Oe(909,!1)}static assertNotInAngularZone(){if(ss.isInAngularZone())throw new Oe(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const p=this._inner,m=p.scheduleEventTask("NgZoneEvent: "+l,s,jv,Um,Um);try{return p.runTask(m,o,u)}finally{p.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const jv={};function Gm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function zm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Wm(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Wh(i){i._nesting--,Gm(i)}class eT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Za,this.onMicrotaskEmpty=new Za,this.onStable=new Za,this.onError=new Za}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}const Vp=new un(""),Bp=new un("");let Kh,WI=(()=>{class i{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Kh||(function tT(i){Kh=i}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ss.assertNotInAngularZone(),Uv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==p),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:p,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return i.\u0275fac=function(o){return new(o||i)(bn(ss),bn(qh),bn(Bp))},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})(),qh=(()=>{class i{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Kh?.findTestabilityInTree(this,o,u)??null}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),eu=null;const qm=new un("AllowMultipleToken"),hd=new un("PlatformDestroyListeners");function KI(i,s,o=[]){const u=`Platform: ${s}`,l=new un(u);return(p=[])=>{let m=Gv();if(!m||m.injector.get(qm,!1)){const w=[...o,...p,{provide:l,useValue:!0}];i?i(w):function Tb(i){if(eu&&!eu.get(qm,!1))throw new Oe(400,!1);eu=i;const s=i.get($p);(function qI(i){const s=i.get($I,null);s&&s.forEach(o=>o())})(i)}(function jp(i=[],s){return Go.create({name:s,providers:[{provide:mg,useValue:"platform"},{provide:hd,useValue:new Set([()=>eu=null])},...i]})}(w,u))}return function nT(i){const s=Gv();if(!s)throw new Oe(401,!1);return s}()}}function Gv(){return eu?.get($p)??null}let $p=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function YI(i,s){let o;return o="noop"===i?new eT:("zone.js"===i?void 0:i)||new ss(s),o}(u?.ngZone,function ZI(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(u)),p=[{provide:ss,useValue:l}];return l.run(()=>{const m=Go.create({providers:p,parent:this.injector,name:o.moduleType.name}),w=o.create(m),D=w.injector.get(Hf,null);if(!D)throw new Oe(402,!1);return l.runOutsideAngular(()=>{const S=l.onError.subscribe({next:N=>{D.handleError(N)}});w.onDestroy(()=>{Hp(this._modules,w),S.unsubscribe()})}),function zv(i,s,o){try{const u=o();return s_(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(D,l,()=>{const S=w.injector.get(jm);return S.runInitializers(),S.donePromise.then(()=>(function lm(i){_e(i,"Expected localeId to be defined"),"string"==typeof i&&(Hw=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Vv,Oh)||Oh),this._moduleDoBootstrap(w),w))})})}bootstrapModule(o,u=[]){const l=Wv({},u);return function Up(i,s,o){const u=new nv(o);return Promise.resolve(u)}(0,0,o).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(o){const u=o.injector.get(Km);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Oe(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(hd,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(bn(Go))},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Wv(i,s){return Array.isArray(s)?s.reduce(Wv,i):{...i,...s}}let Km=(()=>{class i{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),m=new O.y(w=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{ss.assertNotInAngularZone(),Uv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{D.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(p,m.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof Ls;if(!this._injector.get(jm).done)throw!l&&function St(i){const s=se(i)||Z(i)||ze(i);return null!==s&&s.standalone}(o),new Oe(405,false);let m;m=l?o:this._injector.get(_s).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const w=function Zh(i){return i.isBoundToModule}(m)?void 0:this._injector.get(Dc),S=m.create(Go.NULL,[],u||m.selector,w),N=S.location.nativeElement,R=S.injector.get(Vp,null);return R?.registerApplication(N),S.onDestroy(()=>{this.detachView(S.hostView),Hp(this.components,S),R?.unregisterApplication(N)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Oe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Hp(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(HI,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Hp(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Oe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(o){return new(o||i)(bn(ss),bn(Sl),bn(Hf))},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Hp(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}let Zm=!0,Gp=!1;function rT(){return Gp=!0,Zm}function Cb(){if(Gp)throw new Error("Cannot enable prod mode after platform setup.");Zm=!1}let Ab=(()=>{class i{}return i.__NG_ELEMENT_ID__=fd,i})();function fd(i){return function tu(i,s,o){if(ou(i)&&!o){const u=On(i.index,s);return new Dh(u,u)}return 47&i.type?new Dh(s[16],s):null}(An(),Te(),16==(16&i))}class eE{constructor(){}supports(s){return ho(s)}create(s){return new lT(s)}}const cT=(i,s)=>s;class lT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||cT}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,p=null;for(;o||u;){const m=!u||o&&o.currentIndex<hT(u,l,p)?o:u,w=hT(m,l,p),D=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{p||(p=[]);const S=w-l,N=D-l;if(S!=N){for(let $=0;$<S;$++){const Y=$<p.length?p[$]:p[$]=0,pe=Y+$;N<=pe&&pe<S&&(p[$]=Y+1)}p[m.previousIndex]=N-S}}w!==D&&s(m,w,D)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!ho(s))throw new Oe(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,p,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],m=this._trackByFn(w,p),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,p,m,w)),Object.is(o.item,p)||this._addIdentityChange(o,p)):(o=this._mismatch(o,p,m,w),u=!0),o=o._next}else l=0,function bh(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[Is()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,w=>{m=this._trackByFn(l,w),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,w,m,l)),Object.is(o.item,w)||this._addIdentityChange(o,w)):(o=this._mismatch(o,w,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,p,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,p,l)):s=this._addAfter(new Rb(o,u),p,l),s}_verifyReinsertion(s,o,u,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?s=this._reinsertAfter(p,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,p=s._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new dT),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dT),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Rb{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kb{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class dT{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new kb,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hT(i,s,o){const u=i.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class tE{constructor(){}supports(s){return s instanceof Map||Bg(s)}create(){return new fT}}class fT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Bg(s)))throw new Oe(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const p=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,p)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const p=l._prev,m=l._next;return p&&(p._next=m),m&&(m._prev=p),l._next=null,l._prev=null,l}const u=new pT(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class pT{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gT(){return new Qv([new eE])}let Qv=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||gT()),deps:[[i,new Ri,new Xs]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Oe(901,!1)}}return i.\u0275prov=gt({token:i,providedIn:"root",factory:gT}),i})();function ru(){return new Jv([new tE])}let Jv=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||ru()),deps:[[i,new Ri,new Xs]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Oe(901,!1)}}return i.\u0275prov=gt({token:i,providedIn:"root",factory:ru}),i})();const vT=KI(null,"core",[]);let wT=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(bn(Km))},i.\u0275mod=Qr({type:i}),i.\u0275inj=Ot({}),i})()},3942:(It,Ne,L)=>{L.d(Ne,{Z:()=>Oe});var I=L(2090),ee=L(4859),O=L(6881),ae=L(1877);class ie{constructor(de,ye){this._delegate=de,this.firebase=ye,(0,O._addComponent)(de,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(de,ye=O._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(de);return!ot.isInitialized()&&"EXPLICIT"===(null===(it=ot.getComponent())||void 0===it?void 0:it.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:ye})}_removeServiceInstance(de,ye=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(ye)}_addComponent(de){(0,O._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,O._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function Ee(){const Ke=function ve(Ke){const de={},ye={__esModule:!0,initializeApp:function Ae(Ve,at={}){const Q=O.initializeApp(Ve,at);if((0,I.r3)(de,Q.name))return de[Q.name];const pt=new Ke(Q,ye);return de[Q.name]=pt,pt},app:ot,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function fe(Ve){const at=Ve.name,Q=at.replace("-compat","");if(O._registerComponent(Ve)&&"PUBLIC"===Ve.type){const pt=(ct=ot())=>{if("function"!=typeof ct[Q])throw he.create("invalid-app-argument",{appName:at});return ct[Q]()};void 0!==Ve.serviceProps&&(0,I.ZB)(pt,Ve.serviceProps),ye[Q]=pt,Ke.prototype[Q]=function(...ct){return this._getService.bind(this,at).apply(this,Ve.multipleInstances?ct:[])}}return"PUBLIC"===Ve.type?ye[Q]:null},removeApp:function it(Ve){delete de[Ve]},useAsService:function Ze(Ve,at){return"serverAuth"===at?null:at},modularAPIs:O}};function ot(Ve){if(!(0,I.r3)(de,Ve=Ve||O._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Ve});return de[Ve]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function ge(){return Object.keys(de).map(Ve=>de[Ve])}}),ot.App=Ke,ye}(ie);return Ke.INTERNAL=Object.assign(Object.assign({},Ke.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function de(ye){(0,I.ZB)(Ke,ye)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),Ke}(),j=new ae.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ke=self.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=H;!function Pe(Ke){(0,O.registerVersion)("@firebase/app-compat","0.2.11",Ke)}()},6881:(It,Ne,L)=>{L.r(Ne),L.d(Ne,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>vo,_DEFAULT_ENTRY_NAME:()=>ui,_addComponent:()=>et,_addOrOverwriteComponent:()=>vt,_apps:()=>vn,_clearComponents:()=>Gn,_components:()=>Zt,_getProvider:()=>Ui,_registerComponent:()=>ln,_removeServiceInstance:()=>Yr,deleteApp:()=>Di,getApp:()=>Yn,getApps:()=>gr,initializeApp:()=>Yt,onLog:()=>ji,registerVersion:()=>mr,setLogLevel:()=>Rn});var I=L(5861),ee=L(4859),O=L(1877),ae=L(2090);let ce,he;const H=new WeakMap,j=new WeakMap,K=new WeakMap,Je=new WeakMap,Pe=new WeakMap;let de={get(ne,J,xe){if(ne instanceof IDBTransaction){if("done"===J)return j.get(ne);if("objectStoreNames"===J)return ne.objectStoreNames||K.get(ne);if("store"===J)return xe.objectStoreNames[1]?void 0:xe.objectStore(xe.objectStoreNames[0])}return Ae(ne[J])},set:(ne,J,xe)=>(ne[J]=xe,!0),has:(ne,J)=>ne instanceof IDBTransaction&&("done"===J||"store"===J)||J in ne};function ot(ne){return"function"==typeof ne?function it(ne){return ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ne)?function(...J){return ne.apply(ge(this),J),Ae(H.get(this))}:function(...J){return Ae(ne.apply(ge(this),J))}:function(J,...xe){const Re=ne.call(ge(this),J,...xe);return K.set(Re,J.sort?J.sort():[J]),Ae(Re)}}(ne):(ne instanceof IDBTransaction&&function Ke(ne){if(j.has(ne))return;const J=new Promise((xe,Re)=>{const wt=()=>{ne.removeEventListener("complete",kt),ne.removeEventListener("error",Qt),ne.removeEventListener("abort",Qt)},kt=()=>{xe(),wt()},Qt=()=>{Re(ne.error||new DOMException("AbortError","AbortError")),wt()};ne.addEventListener("complete",kt),ne.addEventListener("error",Qt),ne.addEventListener("abort",Qt)});j.set(ne,J)}(ne),((ne,J)=>J.some(xe=>ne instanceof xe))(ne,function ve(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ne,de):ne)}function Ae(ne){if(ne instanceof IDBRequest)return function Oe(ne){const J=new Promise((xe,Re)=>{const wt=()=>{ne.removeEventListener("success",kt),ne.removeEventListener("error",Qt)},kt=()=>{xe(Ae(ne.result)),wt()},Qt=()=>{Re(ne.error),wt()};ne.addEventListener("success",kt),ne.addEventListener("error",Qt)});return J.then(xe=>{xe instanceof IDBCursor&&H.set(xe,ne)}).catch(()=>{}),Pe.set(J,ne),J}(ne);if(Je.has(ne))return Je.get(ne);const J=ot(ne);return J!==ne&&(Je.set(ne,J),Pe.set(J,ne)),J}const ge=ne=>Pe.get(ne),Ve=["get","getKey","getAll","getAllKeys","count"],at=["put","add","delete","clear"],Q=new Map;function pt(ne,J){if(!(ne instanceof IDBDatabase)||J in ne||"string"!=typeof J)return;if(Q.get(J))return Q.get(J);const xe=J.replace(/FromIndex$/,""),Re=J!==xe,wt=at.includes(xe);if(!(xe in(Re?IDBIndex:IDBObjectStore).prototype)||!wt&&!Ve.includes(xe))return;const kt=function(){var Qt=(0,I.Z)(function*(Dn,...Gt){const _r=this.transaction(Dn,wt?"readwrite":"readonly");let ci=_r.store;return Re&&(ci=ci.index(Gt.shift())),(yield Promise.all([ci[xe](...Gt),wt&&_r.done]))[0]});return function(Gt){return Qt.apply(this,arguments)}}();return Q.set(J,kt),kt}!function ye(ne){de=ne(de)}(ne=>({...ne,get:(J,xe,Re)=>pt(J,xe)||ne.get(J,xe,Re),has:(J,xe)=>!!pt(J,xe)||ne.has(J,xe)}));class ct{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function Ut(ne){return"VERSION"===ne.getComponent()?.type}(xe)){const Re=xe.getImmediate();return`${Re.library}/${Re.version}`}return null}).filter(xe=>xe).join(" ")}}const ut="@firebase/app",ue=new O.Yd("@firebase/app"),ui="[DEFAULT]",Zn={[ut]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vn=new Map,Zt=new Map;function et(ne,J){try{ne.container.addComponent(J)}catch(xe){ue.debug(`Component ${J.name} failed to register with FirebaseApp ${ne.name}`,xe)}}function vt(ne,J){ne.container.addOrOverwriteComponent(J)}function ln(ne){const J=ne.name;if(Zt.has(J))return ue.debug(`There were multiple attempts to register component ${J}.`),!1;Zt.set(J,ne);for(const xe of vn.values())et(xe,ne);return!0}function Ui(ne,J){const xe=ne.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),ne.container.getProvider(J)}function Yr(ne,J,xe=ui){Ui(ne,J).clearInstance(xe)}function Gn(){Zt.clear()}const pr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class on{constructor(J,xe,Re){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=Re,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const vo="9.22.1";function Yt(ne,J={}){let xe=ne;"object"!=typeof J&&(J={name:J});const Re=Object.assign({name:ui,automaticDataCollectionEnabled:!1},J),wt=Re.name;if("string"!=typeof wt||!wt)throw pr.create("bad-app-name",{appName:String(wt)});if(xe||(xe=(0,ae.aH)()),!xe)throw pr.create("no-options");const kt=vn.get(wt);if(kt){if((0,ae.vZ)(xe,kt.options)&&(0,ae.vZ)(Re,kt.config))return kt;throw pr.create("duplicate-app",{appName:wt})}const Qt=new ee.H0(wt);for(const Gt of Zt.values())Qt.addComponent(Gt);const Dn=new on(xe,Re,Qt);return vn.set(wt,Dn),Dn}function Yn(ne=ui){const J=vn.get(ne);if(!J&&ne===ui&&(0,ae.aH)())return Yt();if(!J)throw pr.create("no-app",{appName:ne});return J}function gr(){return Array.from(vn.values())}function Di(ne){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,I.Z)(function*(ne){const J=ne.name;vn.has(J)&&(vn.delete(J),yield Promise.all(ne.container.getProviders().map(xe=>xe.delete())),ne.isDeleted=!0)})).apply(this,arguments)}function mr(ne,J,xe){var Re;let wt=null!==(Re=Zn[ne])&&void 0!==Re?Re:ne;xe&&(wt+=`-${xe}`);const kt=wt.match(/\s|\//),Qt=J.match(/\s|\//);if(kt||Qt){const Dn=[`Unable to register library "${wt}" with version "${J}":`];return kt&&Dn.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),kt&&Qt&&Dn.push("and"),Qt&&Dn.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void ue.warn(Dn.join(" "))}ln(new ee.wA(`${wt}-version`,()=>({library:wt,version:J}),"VERSION"))}function ji(ne,J){if(null!==ne&&"function"!=typeof ne)throw pr.create("invalid-log-argument");(0,O.Am)(ne,J)}function Rn(ne){(0,O.Ub)(ne)}const B="firebase-heartbeat-store";let F=null;function G(){return F||(F=function fe(ne,J,{blocked:xe,upgrade:Re,blocking:wt,terminated:kt}={}){const Qt=indexedDB.open(ne,J),Dn=Ae(Qt);return Re&&Qt.addEventListener("upgradeneeded",Gt=>{Re(Ae(Qt.result),Gt.oldVersion,Gt.newVersion,Ae(Qt.transaction),Gt)}),xe&&Qt.addEventListener("blocked",Gt=>xe(Gt.oldVersion,Gt.newVersion,Gt)),Dn.then(Gt=>{kt&&Gt.addEventListener("close",()=>kt()),wt&&Gt.addEventListener("versionchange",_r=>wt(_r.oldVersion,_r.newVersion,_r))}).catch(()=>{}),Dn}("firebase-heartbeat-database",1,{upgrade:(ne,J)=>{0===J&&ne.createObjectStore(B)}}).catch(ne=>{throw pr.create("idb-open",{originalErrorMessage:ne.message})})),F}function Z(){return(Z=(0,I.Z)(function*(ne){try{return yield(yield G()).transaction(B).objectStore(B).get(Rt(ne))}catch(J){if(J instanceof ae.ZR)ue.warn(J.message);else{const xe=pr.create("idb-get",{originalErrorMessage:J?.message});ue.warn(xe.message)}}})).apply(this,arguments)}function ze(ne,J){return St.apply(this,arguments)}function St(){return(St=(0,I.Z)(function*(ne,J){try{const Re=(yield G()).transaction(B,"readwrite");yield Re.objectStore(B).put(J,Rt(ne)),yield Re.done}catch(xe){if(xe instanceof ae.ZR)ue.warn(xe.message);else{const Re=pr.create("idb-set",{originalErrorMessage:xe?.message});ue.warn(Re.message)}}})).apply(this,arguments)}function Rt(ne){return`${ne.name}!${ne.options.appId}`}class lt{constructor(J){this.container=J,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new yr(xe),this._heartbeatsCachePromise=this._storage.read().then(Re=>(this._heartbeatsCache=Re,Re))}triggerHeartbeat(){var J=this;return(0,I.Z)(function*(){const Re=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=mt();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==wt&&!J._heartbeatsCache.heartbeats.some(kt=>kt.date===wt))return J._heartbeatsCache.heartbeats.push({date:wt,agent:Re}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(kt=>{const Qt=new Date(kt.date).valueOf();return Date.now()-Qt<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,I.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const xe=mt(),{heartbeatsToSend:Re,unsentEntries:wt}=function dn(ne,J=1024){const xe=[];let Re=ne.slice();for(const wt of ne){const kt=xe.find(Qt=>Qt.agent===wt.agent);if(kt){if(kt.dates.push(wt.date),hn(xe)>J){kt.dates.pop();break}}else if(xe.push({agent:wt.agent,dates:[wt.date]}),hn(xe)>J){xe.pop();break}Re=Re.slice(1)}return{heartbeatsToSend:xe,unsentEntries:Re}}(J._heartbeatsCache.heartbeats),kt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Re}));return J._heartbeatsCache.lastSentHeartbeatDate=xe,wt.length>0?(J._heartbeatsCache.heartbeats=wt,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),kt})()}}function mt(){return(new Date).toISOString().substring(0,10)}class yr{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,I.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function se(ne){return Z.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var xe=this;return(0,I.Z)(function*(){var Re;if(yield xe._canUseIndexedDBPromise){const kt=yield xe.read();return ze(xe.app,{lastSentHeartbeatDate:null!==(Re=J.lastSentHeartbeatDate)&&void 0!==Re?Re:kt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var xe=this;return(0,I.Z)(function*(){var Re;if(yield xe._canUseIndexedDBPromise){const kt=yield xe.read();return ze(xe.app,{lastSentHeartbeatDate:null!==(Re=J.lastSentHeartbeatDate)&&void 0!==Re?Re:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...J.heartbeats]})}})()}}function hn(ne){return(0,ae.L)(JSON.stringify({version:2,heartbeats:ne})).length}!function Ti(ne){ln(new ee.wA("platform-logger",J=>new ct(J),"PRIVATE")),ln(new ee.wA("heartbeat",J=>new lt(J),"PRIVATE")),mr(ut,"0.9.11",ne),mr(ut,"0.9.11","esm2017"),mr("fire-js","")}("")},4859:(It,Ne,L)=>{L.d(Ne,{H0:()=>ve,wA:()=>O});var I=L(5861),ee=L(2090);class O{constructor(H,j,K){this.name=H,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ae="[DEFAULT]";class ie{constructor(H,j){this.name=H,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const j=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(j)){const K=new ee.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:j});Je&&K.resolve(Je)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(H){var j;const K=this.normalizeInstanceIdentifier(H?.identifier),Je=null!==(j=H?.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Pe){if(Je)return null;throw Pe}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function he(Ee){return"EAGER"===Ee.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(j);try{const Pe=this.getOrInitializeService({instanceIdentifier:Je});K.resolve(Pe)}catch{}}}}clearInstance(H=ae){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,I.Z)(function*(){const j=Array.from(H.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ae){return this.instances.has(H)}getOptions(H=ae){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:j={}}=H,K=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[Pe,Oe]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Pe)&&Oe.resolve(Je);return Je}onInit(H,j){var K;const Je=this.normalizeInstanceIdentifier(j),Pe=null!==(K=this.onInitCallbacks.get(Je))&&void 0!==K?K:new Set;Pe.add(H),this.onInitCallbacks.set(Je,Pe);const Oe=this.instances.get(Je);return Oe&&H(Oe,Je),()=>{Pe.delete(H)}}invokeOnInitCallbacks(H,j){const K=this.onInitCallbacks.get(j);if(K)for(const Je of K)try{Je(H,j)}catch{}}getOrInitializeService({instanceIdentifier:H,options:j={}}){let K=this.instances.get(H);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=H,Ee===ae?void 0:Ee),options:j}),this.instances.set(H,K),this.instancesOptions.set(H,j),this.invokeOnInitCallbacks(K,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,K)}catch{}var Ee;return K||null}normalizeInstanceIdentifier(H=ae){return this.component?this.component.multipleInstances?H:ae:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const j=this.getProvider(H.name);if(j.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);j.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const j=new ie(H,this);return this.providers.set(H,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(It,Ne,L)=>{L.d(Ne,{Am:()=>Ee,Ub:()=>ve,Yd:()=>he,in:()=>ee});const I=[];var ee=(()=>{return(H=ee||(ee={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",ee;var H})();const O={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ae=ee.INFO,ie={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ce=(H,j,...K)=>{if(j<H.logLevel)return;const Je=(new Date).toISOString(),Pe=ie[j];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Pe](`[${Je}]  ${H.name}:`,...K)};class he{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=ce,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in ee))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...j),this._logHandler(this,ee.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...j),this._logHandler(this,ee.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...j),this._logHandler(this,ee.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...j),this._logHandler(this,ee.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...j),this._logHandler(this,ee.ERROR,...j)}}function ve(H){I.forEach(j=>{j.setLogLevel(H)})}function Ee(H,j){for(const K of I){let Je=null;j&&j.level&&(Je=O[j.level]),K.userLogHandler=null===H?null:(Pe,Oe,...Ke)=>{const de=Ke.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");Oe>=(Je??Pe.logLevel)&&H({level:ee[Oe].toLowerCase(),message:de,args:Ke,type:Pe.name})}}}},259:(It,Ne,L)=>{L.d(Ne,{C6:()=>I.getApps,Mq:()=>I.getApp});var I=L(6881);(0,I.registerVersion)("firebase","9.22.1","app")},9260:(It,Ne,L)=>{L.d(Ne,{Z:()=>I.Z});var I=L(3942);I.Z.registerVersion("firebase","9.22.1","app-compat")},2644:(It,Ne,L)=>{L.r(Ne);var I=L(5861),ee=L(3942),O=L(2090),ae=L(6881),ie=L(7582),ce=L(1877),he=L(4859);const Oe=function Je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ke=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new ce.Yd("@firebase/auth");function Ae(g,...d){it.logLevel<=ce.in.ERROR&&it.error(`Auth (${ae.SDK_VERSION}): ${g}`,...d)}function ge(g,...d){throw at(g,...d)}function fe(g,...d){return at(g,...d)}function Ze(g,d,f){const _=Object.assign(Object.assign({},Ke()),{[d]:f});return new O.LL("auth","Firebase",_).create(d,{appName:g.name})}function Ve(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&ge(g,"argument-error"),Ze(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function at(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return de.create(g,...d)}function Q(g,d,...f){if(!g)throw at(d,...f)}function pt(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Ae(d),new Error(d)}function ct(g,d){g||pt(d)}function Ut(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function ut(){return"http:"===Ts()||"https:"===Ts()}function Ts(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class we{constructor(d,f){this.shortDelay=d,this.longDelay=f,ct(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ue(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _e(g,d){ct(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class De{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Mt=new we(3e4,6e4);function dt(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function gt(g,d,f,_){return ht.apply(this,arguments)}function ht(){return(ht=(0,I.Z)(function*(g,d,f,_,b={}){return Ot(g,b,(0,I.Z)(function*(){let M={},V={};_&&("GET"===d?V=_:M={body:JSON.stringify(_)});const q=(0,O.xO)(Object.assign({key:g.config.apiKey},V)).slice(1),Ce=yield g._getAdditionalHeaders();return Ce["Content-Type"]="application/json",g.languageCode&&(Ce["X-Firebase-Locale"]=g.languageCode),De.fetch()(Cr(g,g.config.apiHost,f,q),Object.assign({method:d,headers:Ce,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Ot(g,d,f){return qt.apply(this,arguments)}function qt(){return(qt=(0,I.Z)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},He),d);try{const b=new Lr(g),M=yield Promise.race([f(),b.promise]);b.clearNetworkTimeout();const V=yield M.json();if("needConfirmation"in V)throw Kn(g,"account-exists-with-different-credential",V);if(M.ok&&!("errorMessage"in V))return V;{const q=M.ok?V.errorMessage:V.error.message,[Ce,je]=q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ce)throw Kn(g,"credential-already-in-use",V);if("EMAIL_EXISTS"===Ce)throw Kn(g,"email-already-in-use",V);if("USER_DISABLED"===Ce)throw Kn(g,"user-disabled",V);const Xe=_[Ce]||Ce.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw Ze(g,Xe,je);ge(g,Xe)}}catch(b){if(b instanceof O.ZR)throw b;ge(g,"network-request-failed",{message:String(b)})}})).apply(this,arguments)}function Kt(g,d,f,_){return En.apply(this,arguments)}function En(){return(En=(0,I.Z)(function*(g,d,f,_,b={}){const M=yield gt(g,d,f,_,b);return"mfaPendingCredential"in M&&ge(g,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Cr(g,d,f,_){const b=`${d}${f}?${_}`;return g.config.emulator?_e(g.config,b):`${g.config.apiScheme}://${b}`}class Lr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(fe(this.auth,"network-request-failed")),Mt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const b=fe(g,d,_);return b.customData._tokenResponse=f,b}function Ii(){return(Ii=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Xo(g,d){return yo.apply(this,arguments)}function yo(){return(yo=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ft(g,d){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Ei(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function ui(){return(ui=(0,I.Z)(function*(g,d=!1){const f=(0,O.m9)(g),_=yield f.getIdToken(d),b=vn(_);Q(b&&b.exp&&b.auth_time&&b.iat,f.auth,"internal-error");const M="object"==typeof b.firebase?b.firebase:void 0,V=M?.sign_in_provider;return{claims:b,token:_,authTime:Ei(Zn(b.auth_time)),issuedAtTime:Ei(Zn(b.iat)),expirationTime:Ei(Zn(b.exp)),signInProvider:V||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function Zn(g){return 1e3*Number(g)}function vn(g){const[d,f,_]=g.split(".");if(void 0===d||void 0===f||void 0===_)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const b=(0,O.tV)(f);return b?JSON.parse(b):(Ae("Failed to decode base64 JWT payload"),null)}catch(b){return Ae("Caught error parsing JWT payload as JSON",b?.toString()),null}}function et(g,d){return vt.apply(this,arguments)}function vt(){return(vt=(0,I.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof O.ZR&&ln(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}function ln({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class Ui{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const b=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,b)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,I.Z)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,I.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class Yr{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gn(g){return Et.apply(this,arguments)}function Et(){return(Et=(0,I.Z)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),b=yield et(g,ft(f,{idToken:_}));Q(b?.users.length,f,"internal-error");const M=b.users[0];g._notifyReloadListener(M);const V=null!==(d=M.providerUserInfo)&&void 0!==d&&d.length?Yt(M.providerUserInfo):[],q=vo(g.providerData,V),Xe=!!g.isAnonymous&&!(g.email&&M.passwordHash||q?.length),tt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:q,metadata:new Yr(M.createdAt,M.lastLoginAt),isAnonymous:Xe};Object.assign(g,tt)})).apply(this,arguments)}function on(){return(on=(0,I.Z)(function*(g){const d=(0,O.m9)(g);yield Gn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function vo(g,d){return[...g.filter(_=>!d.some(b=>b.providerId===_.providerId)),...d]}function Yt(g){return g.map(d=>{var{providerId:f}=d,_=(0,ie._T)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function gr(){return(gr=(0,I.Z)(function*(g,d){const f=yield Ot(g,{},(0,I.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:b,apiKey:M}=g.config,V=Cr(g,b,"/v1/token",`key=${M}`),q=yield g._getAdditionalHeaders();return q["Content-Type"]="application/x-www-form-urlencoded",De.fetch()(V,{method:"POST",headers:q,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Q(d.idToken,"internal-error"),Q(typeof d.idToken<"u","internal-error"),Q(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Zt(g){const d=vn(g);return Q(d,"internal-error"),Q(typeof d.exp<"u","internal-error"),Q(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var _=this;return(0,I.Z)(function*(){return Q(!_.accessToken||_.refreshToken,d,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,I.Z)(function*(){const{accessToken:b,refreshToken:M,expiresIn:V}=yield function Yn(g,d){return gr.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(b,M,Number(V))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:b,expirationTime:M}=f,V=new Di;return _&&(Q("string"==typeof _,"internal-error",{appName:d}),V.refreshToken=_),b&&(Q("string"==typeof b,"internal-error",{appName:d}),V.accessToken=b),M&&(Q("number"==typeof M,"internal-error",{appName:d}),V.expirationTime=M),V}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Di,this.toJSON())}_performRefresh(){return pt("not implemented")}}function Sn(g,d){Q("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class mr{constructor(d){var{uid:f,auth:_,stsTokenManager:b}=d,M=(0,ie._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ui(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=b,this.accessToken=b.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Yr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,I.Z)(function*(){const _=yield et(f,f.stsTokenManager.getToken(f.auth,d));return Q(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function _o(g){return ui.apply(this,arguments)}(this,d)}reload(){return function pr(g){return on.apply(this,arguments)}(this)}_assign(d){this!==d&&(Q(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new mr(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,I.Z)(function*(){let b=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),b=!0),f&&(yield Gn(_)),yield _.auth._persistUserIfCurrent(_),b&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,I.Z)(function*(){const f=yield d.getIdToken();return yield et(d,function fr(g,d){return Ii.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,b,M,V,q,Ce,je,Xe;const tt=null!==(_=f.displayName)&&void 0!==_?_:void 0,In=null!==(b=f.email)&&void 0!==b?b:void 0,si=null!==(M=f.phoneNumber)&&void 0!==M?M:void 0,El=null!==(V=f.photoURL)&&void 0!==V?V:void 0,hg=null!==(q=f.tenantId)&&void 0!==q?q:void 0,Dl=null!==(Ce=f._redirectEventId)&&void 0!==Ce?Ce:void 0,fg=null!==(je=f.createdAt)&&void 0!==je?je:void 0,pg=null!==(Xe=f.lastLoginAt)&&void 0!==Xe?Xe:void 0,{uid:Bf,emailVerified:gg,isAnonymous:ic,providerData:Os,stsTokenManager:Tl}=f;Q(Bf&&Tl,d,"internal-error");const bl=Di.fromJSON(this.name,Tl);Q("string"==typeof Bf,d,"internal-error"),Sn(tt,d.name),Sn(In,d.name),Q("boolean"==typeof gg,d,"internal-error"),Q("boolean"==typeof ic,d,"internal-error"),Sn(si,d.name),Sn(El,d.name),Sn(hg,d.name),Sn(Dl,d.name),Sn(fg,d.name),Sn(pg,d.name);const ah=new mr({uid:Bf,auth:d,email:In,emailVerified:gg,displayName:tt,isAnonymous:ic,photoURL:El,phoneNumber:si,tenantId:hg,stsTokenManager:bl,createdAt:fg,lastLoginAt:pg});return Os&&Array.isArray(Os)&&(ah.providerData=Os.map(Nn=>Object.assign({},Nn))),Dl&&(ah._redirectEventId=Dl),ah}static _fromIdTokenResponse(d,f,_=!1){return(0,I.Z)(function*(){const b=new Di;b.updateFromServerResponse(f);const M=new mr({uid:f.localId,auth:d,stsTokenManager:b,isAnonymous:_});return yield Gn(M),M})()}}const ji=new Map;function Rn(g){ct(g instanceof Function,"Expected a class definition");let d=ji.get(g);return d?(ct(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,ji.set(g,d),d)}const Br=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(f,_){var b=this;return(0,I.Z)(function*(){b.storage[f]=_})()}_get(f){var _=this;return(0,I.Z)(function*(){const b=_.storage[f];return void 0===b?null:b})()}_remove(f){var _=this;return(0,I.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function B(g,d,f){return`firebase:${g}:${d}:${f}`}class F{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:b,name:M}=this.auth;this.fullUserKey=B(this.userKey,b.apiKey,M),this.fullPersistenceKey=B("persistence",b.apiKey,M),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,I.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?mr._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,I.Z)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,I.Z)(function*(){if(!f.length)return new F(Rn(Br),d,_);const b=(yield Promise.all(f.map(function(){var je=(0,I.Z)(function*(Xe){if(yield Xe._isAvailable())return Xe});return function(Xe){return je.apply(this,arguments)}}()))).filter(je=>je);let M=b[0]||Rn(Br);const V=B(_,d.config.apiKey,d.name);let q=null;for(const je of f)try{const Xe=yield je._get(V);if(Xe){const tt=mr._fromJSON(d,Xe);je!==M&&(q=tt),M=je;break}}catch{}const Ce=b.filter(je=>je._shouldAllowMigration);return M._shouldAllowMigration&&Ce.length?(M=Ce[0],q&&(yield M._set(V,q.toJSON())),yield Promise.all(f.map(function(){var je=(0,I.Z)(function*(Xe){if(Xe!==M)try{yield Xe._remove(V)}catch{}});return function(Xe){return je.apply(this,arguments)}}())),new F(M,d,_)):new F(M,d,_)})()}}function G(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(St(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(se(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(rn(d))return"Blackberry";if(Fe(d))return"Webos";if(Z(d))return"Safari";if((d.includes("chrome/")||ze(d))&&!d.includes("edge/"))return"Chrome";if(Rt(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function se(g=(0,O.z$)()){return/firefox\//i.test(g)}function Z(g=(0,O.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ze(g=(0,O.z$)()){return/crios\//i.test(g)}function St(g=(0,O.z$)()){return/iemobile/i.test(g)}function Rt(g=(0,O.z$)()){return/android/i.test(g)}function rn(g=(0,O.z$)()){return/blackberry/i.test(g)}function Fe(g=(0,O.z$)()){return/webos/i.test(g)}function lt(g=(0,O.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function hn(g=(0,O.z$)()){return lt(g)||Rt(g)||Fe(g)||rn(g)||/windows phone/i.test(g)||St(g)}function ne(g,d=[]){let f;switch(g){case"Browser":f=G((0,O.z$)());break;case"Worker":f=`${G((0,O.z$)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${ae.SDK_VERSION}/${_}`}function xe(){return(xe=(0,I.Z)(function*(g){return(yield gt(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Re(g,d){return wt.apply(this,arguments)}function wt(){return(wt=(0,I.Z)(function*(g,d){return gt(g,"GET","/v2/recaptchaConfig",dt(g,d))})).apply(this,arguments)}function kt(g){return void 0!==g&&void 0!==g.getResponse}function Qt(g){return void 0!==g&&void 0!==g.enterprise}class Dn{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(f=>"EMAIL_PASSWORD_PROVIDER"===f.provider&&"OFF"!==f.enforcementState)}}function _r(g){return new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=b=>{const M=fe("internal-error");M.customData=b,f(M)},_.type="text/javascript",_.charset="UTF-8",function Gt(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)})}function ci(g){return`__${g}${Math.floor(1e6*Math.random())}`}class an{constructor(d){this.type="recaptcha-enterprise",this.auth=fn(d)}verify(d="verify",f=!1){var _=this;return(0,I.Z)(function*(){function M(){return M=(0,I.Z)(function*(q){if(!f){if(null==q.tenantId&&null!=q._agentRecaptchaConfig)return q._agentRecaptchaConfig.siteKey;if(null!=q.tenantId&&void 0!==q._tenantRecaptchaConfigs[q.tenantId])return q._tenantRecaptchaConfigs[q.tenantId].siteKey}return new Promise(function(){var Ce=(0,I.Z)(function*(je,Xe){Re(q,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tt=>{if(void 0!==tt.recaptchaKey){const In=new Dn(tt);return null==q.tenantId?q._agentRecaptchaConfig=In:q._tenantRecaptchaConfigs[q.tenantId]=In,je(In.siteKey)}Xe(new Error("recaptcha Enterprise site key undefined"))}).catch(tt=>{Xe(tt)})});return function(je,Xe){return Ce.apply(this,arguments)}}())}),M.apply(this,arguments)}function V(q,Ce,je){const Xe=window.grecaptcha;Qt(Xe)?Xe.enterprise.ready(()=>{Xe.enterprise.execute(q,{action:d}).then(tt=>{Ce(tt)}).catch(()=>{Ce("NO_RECAPTCHA")})}):je(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((q,Ce)=>{(function b(q){return M.apply(this,arguments)})(_.auth).then(je=>{if(!f&&Qt(window.grecaptcha))V(je,q,Ce);else{if(typeof window>"u")return void Ce(new Error("RecaptchaVerifier is only supported in browser"));_r("https://www.google.com/recaptcha/enterprise.js?render="+je).then(()=>{V(je,q,Ce)}).catch(Xe=>{Ce(Xe)})}}).catch(je=>{Ce(je)})})})()}}function $i(g,d,f){return su.apply(this,arguments)}function su(){return(su=(0,I.Z)(function*(g,d,f,_=!1){const b=new an(g);let M;try{M=yield b.verify(f)}catch{M=yield b.verify(f,!0)}const V=Object.assign({},d);return Object.assign(V,_?{captchaResp:M}:{captchaResponse:M}),Object.assign(V,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(V,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),V})).apply(this,arguments)}class Us{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=M=>new Promise((V,q)=>{try{V(d(M))}catch(Ce){q(Ce)}});_.onAbort=f,this.queue.push(_);const b=this.queue.length-1;return()=>{this.queue[b]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,I.Z)(function*(){if(f.auth.currentUser===d)return;const _=[];try{for(const b of f.queue)yield b(d),b.onAbort&&_.push(b.onAbort)}catch(b){_.reverse();for(const M of _)try{M()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:b?.message})}})()}}class bc{constructor(d,f,_,b){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bs(this),this.idTokenSubscription=new bs(this),this.beforeStateQueue=new Us(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=Rn(f)),this._initializationPromise=this.queue((0,I.Z)(function*(){var b,M;if(!_._deleted&&(_.persistenceManager=yield F.create(_,d),!_._deleted)){if(null!==(b=_._popupRedirectResolver)&&void 0!==b&&b._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,I.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,I.Z)(function*(){var _;const b=yield f.assertedPersistence.getCurrentUser();let M=b,V=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const q=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Ce=M?._redirectEventId,je=yield f.tryRedirectSignIn(d);(!q||q===Ce)&&je?.user&&(M=je.user,V=!0)}if(!M)return f.directlySetCurrentUser(null);if(!M._redirectEventId){if(V)try{yield f.beforeStateQueue.runMiddleware(M)}catch(q){M=b,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(q))}return M?f.reloadAndSetCurrentUserOrClear(M):f.directlySetCurrentUser(null)}return Q(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===M._redirectEventId?f.directlySetCurrentUser(M):f.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(d){var f=this;return(0,I.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,I.Z)(function*(){try{yield Gn(d)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function me(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,I.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,I.Z)(function*(){const _=d?(0,O.m9)(d):null;return _&&Q(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,I.Z)(function*(){if(!_._deleted)return d&&Q(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,I.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,I.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,I.Z)(function*(){yield f.assertedPersistence.setPersistence(Rn(d))}))}initializeRecaptchaConfig(){var d=this;return(0,I.Z)(function*(){const f=yield Re(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new Dn(f);null==d.tenantId?d._agentRecaptchaConfig=_:d._tenantRecaptchaConfigs[d.tenantId]=_,_.emailPasswordEnabled&&new an(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new O.LL("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,I.Z)(function*(){const b=yield _.getOrInitRedirectPersistenceManager(f);return null===d?b.removeCurrentUser():b.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,I.Z)(function*(){if(!f.redirectPersistenceManager){const _=d&&Rn(d)||f._popupRedirectResolver;Q(_,f,"argument-error"),f.redirectPersistenceManager=yield F.create(f,[Rn(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,I.Z)(function*(){var _,b;return f._isInitialized&&(yield f.queue((0,I.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(b=f.redirectUser)||void 0===b?void 0:b._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,I.Z)(function*(){if(d===f.currentUser)return f.queue((0,I.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,b){if(this._deleted)return()=>{};const M="function"==typeof f?f:f.next.bind(f),V=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(V,this,"internal-error"),V.then(()=>M(this.currentUser)),"function"==typeof f?d.addObserver(f,_,b):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,I.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=ne(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,I.Z)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const b=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();b&&(_["X-Firebase-Client"]=b);const M=yield d._getAppCheckToken();return M&&(_["X-Firebase-AppCheck"]=M),_})()}_getAppCheckToken(){var d=this;return(0,I.Z)(function*(){var f;const _=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function ot(g,...d){it.logLevel<=ce.in.WARN&&it.warn(`Auth (${ae.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function fn(g){return(0,O.m9)(g)}class bs{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,O.ne)(f=>this.observer=f)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qn(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Io(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class as{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return pt("not implemented")}_getIdTokenResponse(d){return pt("not implemented")}_linkToIdToken(d,f){return pt("not implemented")}_getReauthenticationResolver(d){return pt("not implemented")}}function bi(g,d){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:resetPassword",dt(g,d))})).apply(this,arguments)}function yd(g,d){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function _d(g,d){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:update",dt(g,d))})).apply(this,arguments)}function mn(g,d){return vd.apply(this,arguments)}function vd(){return(vd=(0,I.Z)(function*(g,d){return Kt(g,"POST","/v1/accounts:signInWithPassword",dt(g,d))})).apply(this,arguments)}function Sc(g,d){return wd.apply(this,arguments)}function wd(){return(wd=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:sendOobCode",dt(g,d))})).apply(this,arguments)}function Qh(g,d){return Id.apply(this,arguments)}function Id(){return(Id=(0,I.Z)(function*(g,d){return Sc(g,d)})).apply(this,arguments)}function au(g,d){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,I.Z)(function*(g,d){return Sc(g,d)})).apply(this,arguments)}function Ed(g,d){return uu.apply(this,arguments)}function uu(){return(uu=(0,I.Z)(function*(g,d){return Sc(g,d)})).apply(this,arguments)}function Wp(g,d){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,I.Z)(function*(g,d){return Sc(g,d)})).apply(this,arguments)}function Ac(){return(Ac=(0,I.Z)(function*(g,d){return Kt(g,"POST","/v1/accounts:signInWithEmailLink",dt(g,d))})).apply(this,arguments)}function Xh(){return(Xh=(0,I.Z)(function*(g,d){return Kt(g,"POST","/v1/accounts:signInWithEmailLink",dt(g,d))})).apply(this,arguments)}class xc extends as{constructor(d,f,_,b=null){super("password",_),this._email=d,this._password=f,this._tenantId=b}static _fromEmailAndPassword(d,f){return new xc(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new xc(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,I.Z)(function*(){var _;switch(f.signInMethod){case"password":const b={returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=d._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const M=yield $i(d,b,"signInWithPassword");return mn(d,M)}return mn(d,b).catch(function(){var M=(0,I.Z)(function*(V){if("auth/missing-recaptcha-token"===V.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const q=yield $i(d,b,"signInWithPassword");return mn(d,q)}return Promise.reject(V)});return function(V){return M.apply(this,arguments)}}());case"emailLink":return function Td(g,d){return Ac.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:ge(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,I.Z)(function*(){switch(_.signInMethod){case"password":return yd(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function bd(g,d){return Xh.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:ge(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Ci(g,d){return us.apply(this,arguments)}function us(){return(us=(0,I.Z)(function*(g,d){return Kt(g,"POST","/v1/accounts:signInWithIdp",dt(g,d))})).apply(this,arguments)}class li extends as{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new li(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):ge("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:b}=f,M=(0,ie._T)(f,["providerId","signInMethod"]);if(!_||!b)return null;const V=new li(_,b);return V.idToken=M.idToken||void 0,V.accessToken=M.accessToken||void 0,V.secret=M.secret,V.nonce=M.nonce,V.pendingToken=M.pendingToken||null,V}_getIdTokenResponse(d){return Ci(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Ci(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Ci(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,O.xO)(f)}return d}}function Cd(g,d){return ta.apply(this,arguments)}function ta(){return(ta=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:sendVerificationCode",dt(g,d))})).apply(this,arguments)}function cu(){return(cu=(0,I.Z)(function*(g,d){return Kt(g,"POST","/v1/accounts:signInWithPhoneNumber",dt(g,d))})).apply(this,arguments)}function Nc(){return(Nc=(0,I.Z)(function*(g,d){const f=yield Kt(g,"POST","/v1/accounts:signInWithPhoneNumber",dt(g,d));if(f.temporaryProof)throw Kn(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const lu={USER_NOT_FOUND:"user-not-found"};function or(){return(or=(0,I.Z)(function*(g,d){return Kt(g,"POST","/v1/accounts:signInWithPhoneNumber",dt(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),lu)})).apply(this,arguments)}class Ar extends as{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new Ar({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new Ar({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function Mc(g,d){return cu.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function tf(g,d){return Nc.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function nf(g,d){return or.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:b}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:b}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:b,temporaryProof:M}=d;return _||f||b||M?new Ar({verificationId:f,verificationCode:_,phoneNumber:b,temporaryProof:M}):null}}class hu{constructor(d){var f,_,b,M,V,q;const Ce=(0,O.zd)((0,O.pd)(d)),je=null!==(f=Ce.apiKey)&&void 0!==f?f:null,Xe=null!==(_=Ce.oobCode)&&void 0!==_?_:null,tt=function qp(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(b=Ce.mode)&&void 0!==b?b:null);Q(je&&Xe&&tt,"argument-error"),this.apiKey=je,this.operation=tt,this.code=Xe,this.continueUrl=null!==(M=Ce.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(V=Ce.languageCode)&&void 0!==V?V:null,this.tenantId=null!==(q=Ce.tenantId)&&void 0!==q?q:null}static parseLink(d){const f=function du(g){const d=(0,O.zd)((0,O.pd)(g)).link,f=d?(0,O.zd)((0,O.pd)(d)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(g)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||f||d||g}(d);try{return new hu(f)}catch{return null}}}let kn=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return xc._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const b=hu.parseLink(_);return Q(b,"argument-error"),xc._fromEmailAndCode(f,b.code,b.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Cs{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Pc extends Cs{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class di extends Pc{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return Q("providerId"in f&&"signInMethod"in f,"argument-error"),li._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Q(d.idToken||d.accessToken,"argument-error"),li._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return di.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return di.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:b,pendingToken:M,nonce:V,providerId:q}=d;if(!_&&!b&&!f&&!M||!q)return null;try{return new di(q)._credential({idToken:f,accessToken:_,nonce:V,pendingToken:M})}catch{return null}}}let jr=(()=>{class g extends Pc{constructor(){super("facebook.com")}static credential(f){return li._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Rc=(()=>{class g extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return li._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:b}=f;if(!_&&!b)return null;try{return g.credential(_,b)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),fu=(()=>{class g extends Pc{constructor(){super("github.com")}static credential(f){return li._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class On extends as{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Ci(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Ci(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Ci(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:b,pendingToken:M}=f;return _&&b&&M&&_===b?new On(_,M):null}static _create(d,f){return new On(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class js extends Cs{constructor(d){Q(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return js.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return js.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=On.fromJSON(d);return Q(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return On._create(_,f)}catch{return null}}}let kc=(()=>{class g extends Pc{constructor(){super("twitter.com")}static credential(f,_){return li._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:b}=f;if(!_||!b)return null;try{return g.credential(_,b)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Xr(g,d){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,I.Z)(function*(g,d){return Kt(g,"POST","/v1/accounts:signUp",dt(g,d))})).apply(this,arguments)}class vr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,b=!1){return(0,I.Z)(function*(){const M=yield mr._fromIdTokenResponse(d,_,b),V=Tt(_);return new vr({user:M,providerId:V,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,I.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const b=Tt(_);return new vr({user:d,providerId:b,_tokenResponse:_,operationType:f})})()}}function Tt(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Ad(){return(Ad=(0,I.Z)(function*(g){var d;const f=fn(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new vr({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield Xr(f,{returnSecureToken:!0}),b=yield vr._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(b.user),b})).apply(this,arguments)}class na extends O.ZR{constructor(d,f,_,b){var M;super(f.code,f.message),this.operationType=_,this.user=b,Object.setPrototypeOf(this,na.prototype),this.customData={appName:d.name,tenantId:null!==(M=d.tenantId)&&void 0!==M?M:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,b){return new na(d,f,_,b)}}function xd(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?na._fromErrorAndOperation(g,M,d,_):M})}function Md(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function Si(){return(Si=(0,I.Z)(function*(g,d){const f=(0,O.m9)(g);yield jt(!0,f,d);const{providerUserInfo:_}=yield Xo(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),b=Md(_||[]);return f.providerData=f.providerData.filter(M=>b.has(M.providerId)),b.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function pu(g,d){return Te.apply(this,arguments)}function Te(){return(Te=(0,I.Z)(function*(g,d,f=!1){const _=yield et(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return vr._forOperation(g,"link",_)})).apply(this,arguments)}function jt(g,d,f){return gu.apply(this,arguments)}function gu(){return(gu=(0,I.Z)(function*(g,d,f){yield Gn(d);const b=!1===g?"provider-already-linked":"no-such-provider";Q(Md(d.providerData).has(f)===g,d.auth,b)})).apply(this,arguments)}function Oc(g,d){return An.apply(this,arguments)}function An(){return(An=(0,I.Z)(function*(g,d,f=!1){const{auth:_}=g,b="reauthenticate";try{const M=yield et(g,xd(_,b,d,g),f);Q(M.idToken,_,"internal-error");const V=vn(M.idToken);Q(V,_,"internal-error");const{sub:q}=V;return Q(g.uid===q,_,"user-mismatch"),vr._forOperation(g,b,M)}catch(M){throw"auth/user-not-found"===M?.code&&ge(_,"user-mismatch"),M}})).apply(this,arguments)}function mu(g,d){return $s.apply(this,arguments)}function $s(){return($s=(0,I.Z)(function*(g,d,f=!1){const _="signIn",b=yield xd(g,_,d),M=yield vr._fromIdTokenResponse(g,_,b);return f||(yield g._updateCurrentUser(M.user)),M})).apply(this,arguments)}function ei(g,d){return To.apply(this,arguments)}function To(){return(To=(0,I.Z)(function*(g,d){return mu(fn(g),d)})).apply(this,arguments)}function Lc(g,d){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,I.Z)(function*(g,d){const f=(0,O.m9)(g);return yield jt(!1,f,d.providerId),pu(f,d)})).apply(this,arguments)}function xn(g,d){return rf.apply(this,arguments)}function rf(){return(rf=(0,I.Z)(function*(g,d){return Oc((0,O.m9)(g),d)})).apply(this,arguments)}function sf(g,d){return xr.apply(this,arguments)}function xr(){return(xr=(0,I.Z)(function*(g,d){return Kt(g,"POST","/v1/accounts:signInWithCustomToken",dt(g,d))})).apply(this,arguments)}function Ai(){return(Ai=(0,I.Z)(function*(g,d){const f=fn(g),_=yield sf(f,{token:d,returnSecureToken:!0}),b=yield vr._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(b.user),b})).apply(this,arguments)}class cs{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?ni._fromServerResponse(d,f):"totpInfo"in f?Pd._fromServerResponse(d,f):ge(d,"internal-error")}}class ni extends cs{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new ni(f)}}class Pd extends cs{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new Pd(f)}}function Hs(g,d,f){var _;Q((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),Q(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Q(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(Q(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function bo(){return bo=(0,I.Z)(function*(g,d,f){var _;const b=fn(g),M={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=b._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const V=yield $i(b,M,"getOobCode",!0);f&&Hs(b,V,f),yield au(b,V)}else f&&Hs(b,M,f),yield au(b,M).catch(function(){var V=(0,I.Z)(function*(q){if("auth/missing-recaptcha-token"!==q.code)return Promise.reject(q);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ce=yield $i(b,M,"getOobCode",!0);f&&Hs(b,Ce,f),yield au(b,Ce)}});return function(q){return V.apply(this,arguments)}}())}),bo.apply(this,arguments)}function ra(){return(ra=(0,I.Z)(function*(g,d,f){yield bi((0,O.m9)(g),{oobCode:d,newPassword:f})})).apply(this,arguments)}function Mr(){return(Mr=(0,I.Z)(function*(g,d){yield _d((0,O.m9)(g),{oobCode:d})})).apply(this,arguments)}function Bc(g,d){return ia.apply(this,arguments)}function ia(){return(ia=(0,I.Z)(function*(g,d){const f=(0,O.m9)(g),_=yield bi(f,{oobCode:d}),b=_.requestType;switch(Q(b,f,"internal-error"),b){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(_.mfaInfo,f,"internal-error");default:Q(_.email,f,"internal-error")}let M=null;return _.mfaInfo&&(M=cs._fromServerResponse(fn(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:b}})).apply(this,arguments)}function Gs(){return(Gs=(0,I.Z)(function*(g,d){const{data:f}=yield Bc((0,O.m9)(g),d);return f.email})).apply(this,arguments)}function oa(){return oa=(0,I.Z)(function*(g,d,f){var _;const b=fn(g),M={returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"};let V;if(null!==(_=b._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const je=yield $i(b,M,"signUpPassword");V=Xr(b,je)}else V=Xr(b,M).catch(function(){var je=(0,I.Z)(function*(Xe){if("auth/missing-recaptcha-token"===Xe.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const tt=yield $i(b,M,"signUpPassword");return Xr(b,tt)}return Promise.reject(Xe)});return function(Xe){return je.apply(this,arguments)}}());const q=yield V.catch(je=>Promise.reject(je)),Ce=yield vr._fromIdTokenResponse(b,"signIn",q);return yield b._updateCurrentUser(Ce.user),Ce}),oa.apply(this,arguments)}function _u(){return _u=(0,I.Z)(function*(g,d,f){var _;const b=fn(g),M={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function V(q,Ce){Q(Ce.handleCodeInApp,b,"argument-error"),Ce&&Hs(b,q,Ce)}if(null!==(_=b._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const q=yield $i(b,M,"getOobCode",!0);V(q,f),yield Ed(b,q)}else V(M,f),yield Ed(b,M).catch(function(){var q=(0,I.Z)(function*(Ce){if("auth/missing-recaptcha-token"!==Ce.code)return Promise.reject(Ce);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const je=yield $i(b,M,"getOobCode",!0);V(je,f),yield Ed(b,je)}});return function(Ce){return q.apply(this,arguments)}}())}),_u.apply(this,arguments)}function ls(){return(ls=(0,I.Z)(function*(g,d,f){const _=(0,O.m9)(g),b=kn.credentialWithLink(d,f||Ut());return Q(b._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),ei(_,b)})).apply(this,arguments)}function wn(g,d){return kd.apply(this,arguments)}function kd(){return(kd=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:createAuthUri",dt(g,d))})).apply(this,arguments)}function jc(){return(jc=(0,I.Z)(function*(g,d){const _={identifier:d,continueUri:ut()?Ut():"http://localhost"},{signinMethods:b}=yield wn((0,O.m9)(g),_);return b||[]})).apply(this,arguments)}function vu(){return(vu=(0,I.Z)(function*(g,d){const f=(0,O.m9)(g),b={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Hs(f.auth,b,d);const{email:M}=yield Qh(f.auth,b);M!==g.email&&(yield g.reload())})).apply(this,arguments)}function zs(){return(zs=(0,I.Z)(function*(g,d,f){const _=(0,O.m9)(g),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&Hs(_.auth,M,f);const{email:V}=yield Wp(_.auth,M);V!==g.email&&(yield g.reload())})).apply(this,arguments)}function aa(g,d){return So.apply(this,arguments)}function So(){return(So=(0,I.Z)(function*(g,d){return gt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ua(){return(ua=(0,I.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,O.m9)(g),M={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},V=yield et(_,aa(_.auth,M));_.displayName=V.displayName||null,_.photoURL=V.photoUrl||null;const q=_.providerData.find(({providerId:Ce})=>"password"===Ce);q&&(q.displayName=_.displayName,q.photoURL=_.photoURL),yield _._updateTokensIfNecessary(V)})).apply(this,arguments)}function ca(g,d,f){return wu.apply(this,arguments)}function wu(){return(wu=(0,I.Z)(function*(g,d,f){const{auth:_}=g,M={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(M.email=d),f&&(M.password=f);const V=yield et(g,yd(_,M));yield g._updateTokensIfNecessary(V,!0)})).apply(this,arguments)}class xi{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class Hc extends xi{constructor(d,f,_,b){super(d,f,_),this.username=b}}class Vd extends xi{constructor(d,f){super(d,"facebook.com",f)}}class uf extends Hc{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Gc extends xi{constructor(d,f){super(d,"google.com",f)}}class Iu extends Hc{constructor(d,f,_){super(d,"twitter.com",f,_)}}function Eu(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function af(g){var d,f;if(!g)return null;const{providerId:_}=g,b=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},M=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const V=null===(f=null===(d=vn(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(V)return new xi(M,"anonymous"!==V&&"custom"!==V?V:null)}if(!_)return null;switch(_){case"facebook.com":return new Vd(M,b);case"github.com":return new uf(M,b);case"google.com":return new Gc(M,b);case"twitter.com":return new Iu(M,b,g.screenName||null);case"custom":case"anonymous":return new xi(M,null);default:return new xi(M,_,b)}}(f)}class Ws{constructor(d,f,_){this.type=d,this.credential=f,this.auth=_}static _fromIdtoken(d,f){return new Ws("enroll",d,f)}static _fromMfaPendingCredential(d){return new Ws("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Ws._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return Ws._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Gi{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=fn(d),b=f.customData._serverResponse,M=(b.mfaInfo||[]).map(q=>cs._fromServerResponse(_,q));Q(b.mfaPendingCredential,_,"internal-error");const V=Ws._fromMfaPendingCredential(b.mfaPendingCredential);return new Gi(V,M,function(){var q=(0,I.Z)(function*(Ce){const je=yield Ce._process(_,V);delete b.mfaInfo,delete b.mfaPendingCredential;const Xe=Object.assign(Object.assign({},b),{idToken:je.idToken,refreshToken:je.refreshToken});switch(f.operationType){case"signIn":const tt=yield vr._fromIdTokenResponse(_,f.operationType,Xe);return yield _._updateCurrentUser(tt.user),tt;case"reauthenticate":return Q(f.user,_,"internal-error"),vr._forOperation(f.user,f.operationType,Xe);default:ge(_,"internal-error")}});return function(Ce){return q.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,I.Z)(function*(){return f.signInResolver(d)})()}}function ha(g,d){return gt(g,"POST","/v2/accounts/mfaEnrollment:start",dt(g,d))}class qs{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>cs._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new qs(d)}getSession(){var d=this;return(0,I.Z)(function*(){return Ws._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,f){var _=this;return(0,I.Z)(function*(){const b=d,M=yield _.getSession(),V=yield et(_.user,b._process(_.user.auth,M,f));return yield _.user._updateTokensIfNecessary(V),_.user.reload()})()}unenroll(d){var f=this;return(0,I.Z)(function*(){const _="string"==typeof d?d:d.uid,b=yield f.user.getIdToken();try{const M=yield et(f.user,function qc(g,d){return gt(g,"POST","/v2/accounts/mfaEnrollment:withdraw",dt(g,d))}(f.user.auth,{idToken:b,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:V})=>V!==_),yield f.user._updateTokensIfNecessary(M),yield f.user.reload()}catch(M){throw M}})()}}const Ks=new WeakMap,Zs="__sak";class bu{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const zi=(()=>{class g extends bu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function df(){const g=(0,O.z$)();return Z(g)||lt(g)}()&&function Ti(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const b=this.storage.getItem(_),M=this.localCache[_];b!==M&&f(_,M,b)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((q,Ce,je)=>{this.notifyListeners(q,je)});const b=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const q=this.storage.getItem(b);if(f.newValue!==q)null!==f.newValue?this.storage.setItem(b,f.newValue):this.storage.removeItem(b);else if(this.localCache[b]===f.newValue&&!_)return}const M=()=>{const q=this.storage.getItem(b);!_&&this.localCache[b]===q||this.notifyListeners(b,q)},V=this.storage.getItem(b);!function yr(){return(0,O.w1)()&&10===document.documentMode}()||V===f.newValue||f.newValue===f.oldValue?M():setTimeout(M,10)}notifyListeners(f,_){this.localCache[f]=_;const b=this.listeners[f];if(b)for(const M of Array.from(b))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,b)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:b}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var b=()=>super._set,M=this;return(0,I.Z)(function*(){yield b().call(M,f,_),M.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,b=this;return(0,I.Z)(function*(){const M=yield _().call(b,f);return b.localCache[f]=JSON.stringify(M),M})()}_remove(f){var _=()=>super._remove,b=this;return(0,I.Z)(function*(){yield _().call(b,f),delete b.localCache[f]})()}}return g.type="LOCAL",g})(),Ys=(()=>{class g extends bu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let Cu=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(M=>M.isListeningto(f));if(_)return _;const b=new g(f);return this.receivers.push(b),b}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,I.Z)(function*(){const b=f,{eventId:M,eventType:V,data:q}=b.data,Ce=_.handlersMap[V];if(!Ce?.size)return;b.ports[0].postMessage({status:"ack",eventId:M,eventType:V});const je=Array.from(Ce).map(function(){var tt=(0,I.Z)(function*(In){return In(b.origin,q)});return function(In){return tt.apply(this,arguments)}}()),Xe=yield function hf(g){return Promise.all(g.map(function(){var d=(0,I.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(je);b.ports[0].postMessage({status:"done",eventId:M,eventType:V,response:Xe})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Wi(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class Jp{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var b=this;return(0,I.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let V,q;return new Promise((Ce,je)=>{const Xe=Wi("",20);M.port1.start();const tt=setTimeout(()=>{je(new Error("unsupported_event"))},_);q={messageChannel:M,onMessage(In){const si=In;if(si.data.eventId===Xe)switch(si.data.status){case"ack":clearTimeout(tt),V=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(V),Ce(si.data.response);break;default:clearTimeout(tt),clearTimeout(V),je(new Error("invalid_response"))}}},b.handlers.add(q),M.port1.addEventListener("message",q.onMessage),b.target.postMessage({eventType:d,eventId:Xe,data:f},[M.port2])}).finally(()=>{q&&b.removeMessageHandler(q)})})()}}function Tn(){return window}function ma(){return typeof Tn().WorkerGlobalScope<"u"&&"function"==typeof Tn().importScripts}function Su(){return(Su=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qs="firebaseLocalStorageDb",No="firebaseLocalStorage",ps="fbase_key";class Au{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function ya(g,d){return g.transaction([No],d?"readwrite":"readonly").objectStore(No)}function Zc(){const g=indexedDB.open(Qs,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(No,{keyPath:ps})}catch(b){f(b)}}),g.addEventListener("success",(0,I.Z)(function*(){const _=g.result;_.objectStoreNames.contains(No)?d(_):(_.close(),yield function un(){const g=indexedDB.deleteDatabase(Qs);return new Au(g).toPromise()}(),d(yield Zc()))}))})}function Yc(g,d,f){return pf.apply(this,arguments)}function pf(){return(pf=(0,I.Z)(function*(g,d,f){const _=ya(g,!0).put({[ps]:d,value:f});return new Au(_).toPromise()})).apply(this,arguments)}function gf(){return(gf=(0,I.Z)(function*(g,d){const f=ya(g,!1).get(d),_=yield new Au(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Xp(g,d){const f=ya(g,!0).delete(d);return new Au(f).toPromise()}const xu=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,I.Z)(function*(){return f.db||(f.db=yield Zc()),f.db})()}_withRetries(f){var _=this;return(0,I.Z)(function*(){let b=0;for(;;)try{const M=yield _._openDb();return yield f(M)}catch(M){if(b++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,I.Z)(function*(){return ma()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,I.Z)(function*(){f.receiver=Cu._getInstance(function Mn(){return ma()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,I.Z)(function*(b,M){return{keyProcessed:(yield f._poll()).includes(M.key)}});return function(b,M){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,I.Z)(function*(b,M){return["keyChanged"]});return function(b,M){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,I.Z)(function*(){var _,b;if(f.activeServiceWorker=yield function ff(){return Su.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Jp(f.activeServiceWorker);const M=yield f.sender._send("ping",{},800);!M||(null===(_=M[0])||void 0===_?void 0:_.fulfilled)&&(null===(b=M[0])||void 0===b?void 0:b.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,I.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function fs(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Zc();return yield Yc(f,Zs,"1"),yield Xp(f,Zs),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,I.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var b=this;return(0,I.Z)(function*(){return b._withPendingWrite((0,I.Z)(function*(){return yield b._withRetries(M=>Yc(M,f,_)),b.localCache[f]=_,b.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,I.Z)(function*(){const b=yield _._withRetries(M=>function Ud(g,d){return gf.apply(this,arguments)}(M,f));return _.localCache[f]=b,b})()}_remove(f){var _=this;return(0,I.Z)(function*(){return _._withPendingWrite((0,I.Z)(function*(){return yield _._withRetries(b=>Xp(b,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,I.Z)(function*(){const _=yield f._withRetries(V=>{const q=ya(V,!1).getAll();return new Au(q).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const b=[],M=new Set;for(const{fbase_key:V,value:q}of _)M.add(V),JSON.stringify(f.localCache[V])!==JSON.stringify(q)&&(f.notifyListeners(V,q),b.push(V));for(const V of Object.keys(f.localCache))f.localCache[V]&&!M.has(V)&&(f.notifyListeners(V,null),b.push(V));return b})()}notifyListeners(f,_){this.localCache[f]=_;const b=this.listeners[f];if(b)for(const M of Array.from(b))M(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function zn(g,d){return gt(g,"POST","/v2/accounts/mfaSignIn:start",dt(g,d))}const Vn=1e12;class Mi{constructor(d){this.auth=d,this.counter=Vn,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new Qc(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||Vn;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||Vn))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,I.Z)(function*(){var _;return null===(_=f._widgets.get(d||Vn))||void 0===_||_.execute(),""})()}}class Qc{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const b="string"==typeof d?document.getElementById(d):d;Q(b,"argument-error",{appName:f}),this.container=b,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jc(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Po=ci("rcb"),$d=new we(3e4,6e4);class tg{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Tn().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return Q(function yf(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&kt(Tn().grecaptcha)?Promise.resolve(Tn().grecaptcha):new Promise((_,b)=>{const M=Tn().setTimeout(()=>{b(fe(d,"network-request-failed"))},$d.get());Tn()[Po]=()=>{Tn().clearTimeout(M),delete Tn()[Po];const q=Tn().grecaptcha;if(!q||!kt(q))return void b(fe(d,"internal-error"));const Ce=q.render;q.render=(je,Xe)=>{const tt=Ce(je,Xe);return this.counter++,tt},this.hostLanguage=f,_(q)},_r(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Po,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(M),b(fe(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Tn().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sy{load(d){return(0,I.Z)(function*(){return new Mi(d)})()}clearedOneInstance(){}}const Nu="recaptcha",ri={theme:"light",type:"image"};class Pu{constructor(d,f=Object.assign({},ri),_){this.parameters=f,this.type=Nu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(_),this.isInvisible="invisible"===this.parameters.size,Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const b="string"==typeof d?document.getElementById(d):d;Q(b,this.auth,"argument-error"),this.container=b,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sy:new tg,this.validateStartingState()}verify(){var d=this;return(0,I.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(M=>{const V=q=>{!q||(d.tokenChangeListeners.delete(V),M(q))};d.tokenChangeListeners.add(V),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=Tn()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,I.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,I.Z)(function*(){Q(ut()&&!ma(),d.auth,"internal-error"),yield function va(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function J(g){return xe.apply(this,arguments)}(d.auth);Q(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xc{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=Ar._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function Ru(){return(Ru=(0,I.Z)(function*(g,d,f){const _=fn(g),b=yield Lu(_,d,(0,O.m9)(f));return new Xc(b,M=>ei(_,M))})).apply(this,arguments)}function ku(){return(ku=(0,I.Z)(function*(g,d,f){const _=(0,O.m9)(g);yield jt(!1,_,"phone");const b=yield Lu(_.auth,d,(0,O.m9)(f));return new Xc(b,M=>Lc(_,M))})).apply(this,arguments)}function Ou(){return(Ou=(0,I.Z)(function*(g,d,f){const _=(0,O.m9)(g),b=yield Lu(_.auth,d,(0,O.m9)(f));return new Xc(b,M=>xn(_,M))})).apply(this,arguments)}function Lu(g,d,f){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,I.Z)(function*(g,d,f){var _;const b=yield f.verify();try{let M;if(Q("string"==typeof b,g,"argument-error"),Q(f.type===Nu,g,"argument-error"),M="string"==typeof d?{phoneNumber:d}:d,"session"in M){const V=M.session;if("phoneNumber"in M)return Q("enroll"===V.type,g,"internal-error"),(yield ha(g,{idToken:V.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:b}})).phoneSessionInfo.sessionInfo;{Q("signin"===V.type,g,"internal-error");const q=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return Q(q,g,"missing-multi-factor-info"),(yield zn(g,{mfaPendingCredential:V.credential,mfaEnrollmentId:q,phoneSignInInfo:{recaptchaToken:b}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:V}=yield Cd(g,{phoneNumber:M.phoneNumber,recaptchaToken:b});return V}}finally{f._reset()}})).apply(this,arguments)}function Fu(){return(Fu=(0,I.Z)(function*(g,d){yield pu((0,O.m9)(g),d)})).apply(this,arguments)}let Jn=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=fn(f)}verifyPhoneNumber(f,_){return Lu(this.auth,f,(0,O.m9)(_))}static credential(f,_){return Ar._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:b}=f;return _&&b?Ar._fromTokenResponse(_,b):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Ni(g,d){return d?Rn(d):(Q(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Bn extends as{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Ci(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Ci(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Ci(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function Xn(g){return mu(g.auth,new Bn(g),g.bypassAuthState)}function zd(g){const{auth:d,user:f}=g;return Q(f,d,"internal-error"),Oc(f,new Bn(g),g.bypassAuthState)}function Vu(g){return ko.apply(this,arguments)}function ko(){return(ko=(0,I.Z)(function*(g){const{auth:d,user:f}=g;return Q(f,d,"internal-error"),pu(f,new Bn(g),g.bypassAuthState)})).apply(this,arguments)}class Pr{constructor(d,f,_,b,M=!1){this.auth=d,this.resolver=_,this.user=b,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,I.Z)(function*(_,b){d.pendingPromise={resolve:_,reject:b};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(M){d.reject(M)}});return function(_,b){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,I.Z)(function*(){const{urlResponse:_,sessionId:b,postBody:M,tenantId:V,error:q,type:Ce}=d;if(q)return void f.reject(q);const je={auth:f.auth,requestUri:_,sessionId:b,tenantId:V||void 0,postBody:M||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ce)(je))}catch(Xe){f.reject(Xe)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Xn;case"linkViaPopup":case"linkViaRedirect":return Vu;case"reauthViaPopup":case"reauthViaRedirect":return zd;default:ge(this.auth,"internal-error")}}resolve(d){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ar=new we(2e3,1e4);function bn(){return(bn=(0,I.Z)(function*(g,d,f){const _=fn(g);Ve(g,d,Cs);const b=Ni(_,f);return new tl(_,"signInViaPopup",d,b).executeNotNull()})).apply(this,arguments)}function el(){return(el=(0,I.Z)(function*(g,d,f){const _=(0,O.m9)(g);Ve(_.auth,d,Cs);const b=Ni(_.auth,f);return new tl(_.auth,"reauthViaPopup",d,b,_).executeNotNull()})).apply(this,arguments)}function As(){return(As=(0,I.Z)(function*(g,d,f){const _=(0,O.m9)(g);Ve(_.auth,d,Cs);const b=Ni(_.auth,f);return new tl(_.auth,"linkViaPopup",d,b,_).executeNotNull()})).apply(this,arguments)}let tl=(()=>{class g extends Pr{constructor(f,_,b,M,V){super(f,_,M,V),this.provider=b,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,I.Z)(function*(){const _=yield f.execute();return Q(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,I.Z)(function*(){ct(1===f.filter.length,"Popup operations only handle one event");const _=Wi();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(b=>{f.reject(b)}),f.resolver._isIframeWebStorageSupported(f.auth,b=>{b||f.reject(fe(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,b;this.pollId=null!==(b=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==b&&b.closed?window.setTimeout(()=>{this.pollId=null,this.reject(fe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,ar.get())};f()}}return g.currentPopupAction=null,g})();const Js=new Map;class vf extends Pr{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,I.Z)(function*(){let _=Js.get(f.auth._key());if(!_){try{const M=(yield function Xs(g,d){return le.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(M)}catch(b){_=()=>Promise.reject(b)}Js.set(f.auth._key(),_)}return f.bypassAuthState||Js.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,I.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const b=yield _.auth._redirectUserForId(d.eventId);if(b)return _.user=b,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function le(){return(le=(0,I.Z)(function*(g,d){const f=Hr(d),_=Uu(g);if(!(yield _._isAvailable()))return!1;const b="true"===(yield _._get(f));return yield _._remove(f),b})).apply(this,arguments)}function Ri(g,d){return wa.apply(this,arguments)}function wa(){return(wa=(0,I.Z)(function*(g,d){return Uu(g)._set(Hr(d),"true")})).apply(this,arguments)}function Ht(g,d){Js.set(g._key(),d)}function Uu(g){return Rn(g._redirectPersistence)}function Hr(g){return B("pendingRedirect",g.config.apiKey,g.name)}function Dt(){return(Dt=(0,I.Z)(function*(g,d,f){const _=fn(g);Ve(g,d,Cs),yield _._initializationPromise;const b=Ni(_,f);return yield Ri(b,_),b._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function Wd(){return(Wd=(0,I.Z)(function*(g,d,f){const _=(0,O.m9)(g);Ve(_.auth,d,Cs),yield _.auth._initializationPromise;const b=Ni(_.auth,f);yield Ri(b,_.auth);const M=yield qi(_);return b._openRedirect(_.auth,d,"reauthViaRedirect",M)})).apply(this,arguments)}function qd(){return(qd=(0,I.Z)(function*(g,d,f){const _=(0,O.m9)(g);Ve(_.auth,d,Cs),yield _.auth._initializationPromise;const b=Ni(_.auth,f);yield jt(!1,_,d.providerId),yield Ri(b,_.auth);const M=yield qi(_);return b._openRedirect(_.auth,d,"linkViaRedirect",M)})).apply(this,arguments)}function er(){return(er=(0,I.Z)(function*(g,d){return yield fn(g)._initializationPromise,eo(g,d,!1)})).apply(this,arguments)}function eo(g,d){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,I.Z)(function*(g,d,f=!1){const _=fn(g),b=Ni(_,d),V=yield new vf(_,b,f).execute();return V&&!f&&(delete V.user._redirectEventId,yield _._persistUserIfCurrent(V.user),yield _._setRedirectUser(null,d)),V})).apply(this,arguments)}function qi(g){return il.apply(this,arguments)}function il(){return(il=(0,I.Z)(function*(g){const d=Wi(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class ol{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function al(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tr(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!tr(d)){const b=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(fe(this.auth,b))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oo(d))}saveEventToCache(d){this.cachedEventUids.add(Oo(d)),this.lastProcessedEventTime=Date.now()}}function Oo(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function tr({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Ns(g){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,I.Z)(function*(g,d={}){return gt(g,"GET","/v1/projects",d)})).apply(this,arguments)}const ki=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$u=/^https?/;function If(){return(If=(0,I.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Ns(g);for(const f of d)try{if(Hu(f))return}catch{}ge(g,"unauthorized-domain")})).apply(this,arguments)}function Hu(g){const d=Ut(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const V=new URL(g);return""===V.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&V.hostname===_}if(!$u.test(f))return!1;if(ki.test(g))return _===g;const b=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+b+"|"+b+")$","i").test(_)}const Ef=new we(3e4,6e4);function ul(){const g=Tn().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Ea=null;function cl(g){return Ea=Ea||function Lo(g){return new Promise((d,f)=>{var _,b,M;function V(){ul(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{ul(),f(fe(g,"network-request-failed"))},timeout:Ef.get()})}if(null!==(b=null===(_=Tn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==b&&b.Iframe)d(gapi.iframes.getContext());else{if(null===(M=Tn().gapi)||void 0===M||!M.load){const q=ci("iframefcb");return Tn()[q]=()=>{gapi.load?V():f(fe(g,"network-request-failed"))},_r(`https://apis.google.com/js/api.js?onload=${q}`).catch(Ce=>f(Ce))}V()}}).catch(d=>{throw Ea=null,d})}(g),Ea}const Da=new we(5e3,15e3),Yi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Df(g){const d=g.config;Q(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?_e(d,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,_={apiKey:d.apiKey,appName:g.name,v:ae.SDK_VERSION},b=Oi.get(g.config.apiHost);b&&(_.eid=b);const M=g._getFrameworks();return M.length&&(_.fw=M.join(",")),`${f}?${(0,O.xO)(_).slice(1)}`}function to(){return to=(0,I.Z)(function*(g){const d=yield cl(g),f=Tn().gapi;return Q(f,g,"internal-error"),d.open({where:document.body,url:Df(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yi,dontclear:!0},_=>new Promise(function(){var b=(0,I.Z)(function*(M,V){yield _.restyle({setHideOnLeave:!1});const q=fe(g,"network-request-failed"),Ce=Tn().setTimeout(()=>{V(q)},Da.get());function je(){Tn().clearTimeout(Ce),M(_)}_.ping(je).then(je,()=>{V(q)})});return function(M,V){return b.apply(this,arguments)}}()))}),to.apply(this,arguments)}const Yd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class P{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Me=encodeURIComponent("fac");function We(g,d,f,_,b,M){return st.apply(this,arguments)}function st(){return(st=(0,I.Z)(function*(g,d,f,_,b,M){Q(g.config.authDomain,g,"auth-domain-config-required"),Q(g.config.apiKey,g,"invalid-api-key");const V={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:ae.SDK_VERSION,eventId:b};if(d instanceof Cs){d.setDefaultLanguage(g.languageCode),V.providerId=d.providerId||"",(0,O.xb)(d.getCustomParameters())||(V.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Xe,tt]of Object.entries(M||{}))V[Xe]=tt}if(d instanceof Pc){const Xe=d.getScopes().filter(tt=>""!==tt);Xe.length>0&&(V.scopes=Xe.join(","))}g.tenantId&&(V.tid=g.tenantId);const q=V;for(const Xe of Object.keys(q))void 0===q[Xe]&&delete q[Xe];const Ce=yield g._getAppCheckToken(),je=Ce?`#${Me}=${encodeURIComponent(Ce)}`:"";return`${bt(g)}?${(0,O.xO)(q).slice(1)}${je}`})).apply(this,arguments)}function bt({config:g}){return g.emulator?_e(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}const ur="webStorageSupport";class Ps extends class zu{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return pt("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Ps(d)}_finalizeEnroll(d,f,_){return function hi(g,d){return gt(g,"POST","/v2/accounts/mfaEnrollment:finalize",dt(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function Mu(g,d){return gt(g,"POST","/v2/accounts/mfaSignIn:finalize",dt(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ii=(()=>{class g{constructor(){}static assertion(f){return Ps._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var qu="@firebase/auth";class Ir{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,I.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Uo(){return window}function no(){return(no=(0,I.Z)(function*(g,d,f){var _;const{BuildInfo:b}=Uo();ct(d.sessionId,"AuthEvent did not contain a session ID");const M=yield Sf(d.sessionId),V={};return lt()?V.ibi=b.packageName:Rt()?V.apn=b.packageName:ge(g,"operation-not-supported-in-this-environment"),b.displayName&&(V.appDisplayName=b.displayName),V.sessionId=M,We(g,f,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,V)})).apply(this,arguments)}function ll(){return(ll=(0,I.Z)(function*(g){const{BuildInfo:d}=Uo(),f={};lt()?f.iosBundleId=d.packageName:Rt()?f.androidPackageName=d.packageName:ge(g,"operation-not-supported-in-this-environment"),yield Ns(g,f)})).apply(this,arguments)}function Qu(){return(Qu=(0,I.Z)(function*(g,d,f){const{cordova:_}=Uo();let b=()=>{};try{yield new Promise((M,V)=>{let q=null;function Ce(){var tt;M();const In=null===(tt=_.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof In&&In(),"function"==typeof f?.close&&f.close()}function je(){q||(q=window.setTimeout(()=>{V(fe(g,"redirect-cancelled-by-user"))},2e3))}function Xe(){"visible"===document?.visibilityState&&je()}d.addPassiveListener(Ce),document.addEventListener("resume",je,!1),Rt()&&document.addEventListener("visibilitychange",Xe,!1),b=()=>{d.removePassiveListener(Ce),document.removeEventListener("resume",je,!1),document.removeEventListener("visibilitychange",Xe,!1),q&&window.clearTimeout(q)}})}finally{b()}})).apply(this,arguments)}function Sf(g){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,I.Z)(function*(g){const d=uy(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(b=>b.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function uy(g){if(ct(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let _=0;_<g.length;_++)f[_]=g.charCodeAt(_);return f}(0,O.Pz)("authIdTokenMaxAge"),function Qd(g){(0,ae._registerComponent)(new he.wA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),b=d.getProvider("heartbeat"),M=d.getProvider("app-check-internal"),{apiKey:V,authDomain:q}=_.options;Q(V&&!V.includes(":"),"invalid-api-key",{appName:_.name});const Ce={apiKey:V,authDomain:q,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ne(g)},je=new bc(_,b,M,Ce);return function Sr(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(Rn);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(je,f),je},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new he.wA("auth-internal",d=>{const f=fn(d.getProvider("auth").getImmediate());return new Ir(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(qu,"0.23.2",function Er(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,ae.registerVersion)(qu,"0.23.2","esm2017")}("Browser");class eh extends ol{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,I.Z)(function*(){yield d.initPromise})()}}function dl(g){return xf.apply(this,arguments)}function xf(){return(xf=(0,I.Z)(function*(g){const d=yield ro()._get(nh(g));return d&&(yield ro()._remove(nh(g))),d})).apply(this,arguments)}function ba(){const g=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const _=Math.floor(Math.random()*d.length);g.push(d.charAt(_))}return g.join("")}function ro(){return Rn(zi)}function nh(g){return B("authEvent",g.config.apiKey,g.name)}function Xu(g){if(!g?.includes("?"))return{};const[d,...f]=g.split("?");return(0,O.zd)(f.join("?"))}function Rr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fe("no-auth-event")}}function Rs(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function ml(g=(0,O.z$)()){return!("file:"!==Rs()&&"ionic:"!==Rs()&&"capacitor:"!==Rs()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function ec(){try{const g=self.localStorage,d=Wi();if(g)return g.setItem(d,"1"),g.removeItem(d),!function Rf(g=(0,O.z$)()){return function yl(){return(0,O.w1)()&&11===document?.documentMode}()||function Aa(g=(0,O.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,O.hl)()}catch{return xa()&&(0,O.hl)()}return!1}function xa(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function rh(){return(function Pf(){return"http:"===Rs()||"https:"===Rs()}()||(0,O.ru)()||ml())&&!function Sa(){return(0,O.b$)()||(0,O.UG)()}()&&ec()&&!xa()}function kf(){return ml()&&typeof document<"u"}function io(){return(io=(0,I.Z)(function*(){return!!kf()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const rr={LOCAL:"local",NONE:"none",SESSION:"session"},tc=Q,Of="persistence";function Ma(g){return nc.apply(this,arguments)}function nc(){return(nc=(0,I.Z)(function*(g){yield g._initializationPromise;const d=Na(),f=B(Of,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())})).apply(this,arguments)}function Na(){var g;try{return(null===(g=function vl(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const ks=Q;class Qi{constructor(){this.browserResolver=Rn(class nr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ys,this._completeRedirectFn=eo,this._overrideRedirectResult=Ht}_openPopup(d,f,_,b){var M=this;return(0,I.Z)(function*(){var V;ct(null===(V=M.eventManagers[d._key()])||void 0===V?void 0:V.manager,"_initialize() not called before _openPopup()");const q=yield We(d,f,_,Ut(),b);return function U(g,d,f,_=500,b=600){const M=Math.max((window.screen.availHeight-b)/2,0).toString(),V=Math.max((window.screen.availWidth-_)/2,0).toString();let q="";const Ce=Object.assign(Object.assign({},Yd),{width:_.toString(),height:b.toString(),top:M,left:V}),je=(0,O.z$)().toLowerCase();f&&(q=ze(je)?"_blank":f),se(je)&&(d=d||"http://localhost",Ce.scrollbars="yes");const Xe=Object.entries(Ce).reduce((In,[si,El])=>`${In}${si}=${El},`,"");if(function dn(g=(0,O.z$)()){var d;return lt(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(je)&&"_self"!==q)return function z(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",q),new P(null);const tt=window.open(d||"",q,Xe);Q(tt,g,"popup-blocked");try{tt.focus()}catch{}return new P(tt)}(d,q,Wi())})()}_openRedirect(d,f,_,b){var M=this;return(0,I.Z)(function*(){return yield M._originValidation(d),function Kc(g){Tn().location.href=g}(yield We(d,f,_,Ut(),b)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:b,promise:M}=this.eventManagers[f];return b?Promise.resolve(b):(ct(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,I.Z)(function*(){const _=yield function Zd(g){return to.apply(this,arguments)}(d),b=new ol(d);return _.register("authEvent",M=>(Q(M?.authEvent,d,"invalid-auth-event"),{status:b.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:b},f.iframes[d._key()]=_,b})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(ur,{type:ur},b=>{var M;const V=null===(M=b?.[0])||void 0===M?void 0:M[ur];void 0!==V&&f(!!V),ge(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Kd(g){return If.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return hn()||Z()||lt()}}),this.cordovaResolver=Rn(class fl{constructor(){this._redirectPersistence=Ys,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=eo,this._overrideRedirectResult=Ht}_initialize(d){var f=this;return(0,I.Z)(function*(){const _=d._key();let b=f.eventManagers.get(_);return b||(b=new eh(d),f.eventManagers.set(_,b),f.attachCallbackListeners(d,b)),b})()}_openPopup(d){ge(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,_,b){var M=this;return(0,I.Z)(function*(){!function Cf(g){var d,f,_,b,M,V,q,Ce,je,Xe;const tt=Uo();Q("function"==typeof(null===(d=tt?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Q(typeof(null===(f=tt?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Q("function"==typeof(null===(M=null===(b=null===(_=tt?.cordova)||void 0===_?void 0:_.plugins)||void 0===b?void 0:b.browsertab)||void 0===M?void 0:M.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(Ce=null===(q=null===(V=tt?.cordova)||void 0===V?void 0:V.plugins)||void 0===q?void 0:q.browsertab)||void 0===Ce?void 0:Ce.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(Xe=null===(je=tt?.cordova)||void 0===je?void 0:je.InAppBrowser)||void 0===Xe?void 0:Xe.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const V=yield M._initialize(d);yield V.initialized(),V.resetRedirect(),function xs(){Js.clear()}(),yield M._originValidation(d);const q=function Af(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:ba(),postBody:null,tenantId:g.tenantId,error:fe(g,"no-auth-event")}}(d,_,b);yield function th(g,d){return ro()._set(nh(g),d)}(d,q);const Ce=yield function Zu(g,d,f){return no.apply(this,arguments)}(d,q,f),je=yield function Jd(g){const{cordova:d}=Uo();return new Promise(f=>{d.plugins.browsertab.isAvailable(_=>{let b=null;_?d.plugins.browsertab.openUrl(g):b=d.InAppBrowser.open(g,function mt(g=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(b)})})}(Ce);return function ay(g,d,f){return Qu.apply(this,arguments)}(d,V,je)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Yu(g){return ll.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:_,handleOpenURL:b,BuildInfo:M}=Uo(),V=setTimeout((0,I.Z)(function*(){yield dl(d),f.onEvent(Rr())}),500),q=function(){var Xe=(0,I.Z)(function*(tt){clearTimeout(V);const In=yield dl(d);let si=null;In&&tt?.url&&(si=function og(g,d){var f,_;const b=function ag(g){const d=Xu(g),f=d.link?decodeURIComponent(d.link):void 0,_=Xu(f).link,b=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Xu(b).link||b||_||f||g}(d);if(b.includes("/__/auth/callback")){const M=Xu(b),V=M.firebaseError?function jo(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,q=null===(_=null===(f=V?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],Ce=q?fe(q):null;return Ce?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Ce,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:b,postBody:null}}return null}(In,tt.url)),f.onEvent(si||Rr())});return function(In){return Xe.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,q);const Ce=b,je=`${M.packageName.toLowerCase()}://`;Uo().handleOpenURL=function(){var Xe=(0,I.Z)(function*(tt){if(tt.toLowerCase().startsWith(je)&&q({url:tt}),"function"==typeof Ce)try{Ce(tt)}catch(In){console.error(In)}});return function(tt){return Xe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ys,this._completeRedirectFn=eo,this._overrideRedirectResult=Ht}_initialize(d){var f=this;return(0,I.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,_,b){var M=this;return(0,I.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(d,f,_,b)})()}_openRedirect(d,f,_,b){var M=this;return(0,I.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(d,f,_,b)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return kf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ks(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,I.Z)(function*(){if(d.underlyingResolver)return;const f=yield function _l(){return io.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Lf(g){return g.unwrap()}function Ff(g){return cg(g)}function cg(g){const{_tokenResponse:d}=g instanceof O.ZR?g.customData:g;if(!d)return null;if(!(g instanceof O.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Jn.credentialFromResult(g);const f=d.providerId;if(!f||"password"===f)return null;let _;switch(f){case"google.com":_=Rc;break;case"facebook.com":_=jr;break;case"github.com":_=fu;break;case"twitter.com":_=kc;break;default:const{oauthIdToken:b,oauthAccessToken:M,oauthTokenSecret:V,pendingToken:q,nonce:Ce}=d;return M||V||b||q?q?f.startsWith("saml.")?On._create(f,q):li._fromParams({providerId:f,signInMethod:f,pendingToken:q,idToken:b,accessToken:M}):new di(f).credential({idToken:b,accessToken:M,rawNonce:Ce}):null}return g instanceof O.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function ir(g,d){return d.catch(f=>{throw f instanceof O.ZR&&function Vf(g,d){var f;const _=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new sh(g,function Tu(g,d){var f;const _=(0,O.m9)(g),b=d;return Q(d.customData.operationType,_,"argument-error"),Q(null===(f=b.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),Gi._fromError(_,b)}(g,d));else if(_){const b=cg(d),M=d;b&&(M.credential=b,M.tenantId=_.tenantId||void 0,M.email=_.email||void 0,M.phoneNumber=_.phoneNumber||void 0)}}(g,f),f}).then(f=>{const b=f.user;return{operationType:f.operationType,credential:Ff(f),additionalUserInfo:Eu(f),user:kr.getOrCreate(b)}})}function ms(g,d){return rc.apply(this,arguments)}function rc(){return(rc=(0,I.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:_=>ir(g,f.confirm(_))}})).apply(this,arguments)}class sh{constructor(d,f){this.resolver=f,this.auth=function ug(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return ir(Lf(this.auth),this.resolver.resolveSignIn(d))}}class kr{constructor(d){this._delegate=d,this.multiFactor=function fa(g){const d=(0,O.m9)(g);return Ks.has(d)||Ks.set(d,qs._fromUser(d)),Ks.get(d)}(d)}static getOrCreate(d){return kr.USER_MAP.has(d)||kr.USER_MAP.set(d,new kr(d)),kr.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,I.Z)(function*(){return ir(f.auth,Lc(f._delegate,d))})()}linkWithPhoneNumber(d,f){var _=this;return(0,I.Z)(function*(){return ms(_.auth,function ng(g,d,f){return ku.apply(this,arguments)}(_._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,I.Z)(function*(){return ir(f.auth,function Bu(g,d,f){return As.apply(this,arguments)}(f._delegate,d,Qi))})()}linkWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield Ma(fn(f.auth)),function ju(g,d,f){return function rg(g,d,f){return qd.apply(this,arguments)}(g,d,f)}(f._delegate,d,Qi)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,I.Z)(function*(){return ir(f.auth,xn(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return ms(this.auth,function Gd(g,d,f){return Ou.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return ir(this.auth,function $r(g,d,f){return el.apply(this,arguments)}(this._delegate,d,Qi))}reauthenticateWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield Ma(fn(f.auth)),function Ms(g,d,f){return function Ia(g,d,f){return Wd.apply(this,arguments)}(g,d,f)}(f._delegate,d,Qi)})()}sendEmailVerification(d){return function Ld(g,d){return vu.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,I.Z)(function*(){return yield function Nd(g,d){return Si.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function of(g,d){return ca((0,O.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function ds(g,d){return ca((0,O.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Ro(g,d){return Fu.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Fd(g,d){return ua.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function $c(g,d,f){return zs.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}kr.USER_MAP=new WeakMap;const Jt=Q;let wl=(()=>{class g{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:b}=f.options;Jt(b,"invalid-api-key",{appName:f.name}),Jt(b,"invalid-api-key",{appName:f.name});const M=typeof window<"u"?Qi:void 0;this._delegate=_.initialize({options:{persistence:oh(b,f.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?kr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function md(g,d,f){const _=fn(g);Q(_._canInitEmulator,_,"emulator-config-failed"),Q(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const b=!!f?.disableWarnings,M=Qn(d),{host:V,port:q}=function Ur(g){const d=Qn(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",b=/^(\[[^\]]+\])(:|$)/.exec(_);if(b){const M=b[1];return{host:M,port:Io(_.substr(M.length+1))}}{const[M,V]=_.split(":");return{host:M,port:Io(V)}}}(d);_.config.emulator={url:`${M}//${V}${null===q?"":`:${q}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:V,port:q,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:b})}),b||function ou(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,_)}applyActionCode(f){return function yu(g,d){return Mr.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Bc(this._delegate,f)}confirmPasswordReset(f,_){return function Vc(g,d,f){return ra.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var b=this;return(0,I.Z)(function*(){return ir(b._delegate,function Uc(g,d,f){return oa.apply(this,arguments)}(b._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Od(g,d){return jc.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Yp(g,d){return"EMAIL_SIGNIN"===hu.parseLink(d)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,I.Z)(function*(){Jt(rh(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function wf(g,d){return er.apply(this,arguments)}(f._delegate,Qi);return _?ir(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Nf(g,d){fn(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,_,b){const{next:M,error:V,complete:q}=Il(f,_,b);return this._delegate.onAuthStateChanged(M,V,q)}onIdTokenChanged(f,_,b){const{next:M,error:V,complete:q}=Il(f,_,b);return this._delegate.onIdTokenChanged(M,V,q)}sendSignInLinkToEmail(f,_){return function Co(g,d,f){return _u.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function Zp(g,d,f){return bo.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,I.Z)(function*(){let b;switch(function l0(g,d){tc(Object.values(rr).includes(d),g,"invalid-persistence-type"),(0,O.b$)()?tc(d!==rr.SESSION,g,"unsupported-persistence-type"):(0,O.UG)()?tc(d===rr.NONE,g,"unsupported-persistence-type"):xa()?tc(d===rr.NONE||d===rr.LOCAL&&(0,O.hl)(),g,"unsupported-persistence-type"):tc(d===rr.NONE||ec(),g,"unsupported-persistence-type")}(_._delegate,f),f){case rr.SESSION:b=Ys;break;case rr.LOCAL:b=(yield Rn(xu)._isAvailable())?xu:zi;break;case rr.NONE:b=Br;break;default:return ge("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(b)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ir(this._delegate,function Sd(g){return Ad.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ir(this._delegate,ei(this._delegate,f))}signInWithCustomToken(f){return ir(this._delegate,function ti(g,d){return Ai.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return ir(this._delegate,function Rd(g,d,f){return ei((0,O.m9)(g),kn.credential(d,f))}(this._delegate,f,_))}signInWithEmailLink(f,_){return ir(this._delegate,function tn(g,d,f){return ls.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return ms(this._delegate,function _f(g,d,f){return Ru.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,I.Z)(function*(){return Jt(rh(),_._delegate,"operation-not-supported-in-this-environment"),ir(_._delegate,function Pi(g,d,f){return bn.apply(this,arguments)}(_._delegate,f,Qi))})()}signInWithRedirect(f){var _=this;return(0,I.Z)(function*(){return Jt(rh(),_._delegate,"operation-not-supported-in-this-environment"),yield Ma(_._delegate),function Ye(g,d,f){return function rl(g,d,f){return Dt.apply(this,arguments)}(g,d,f)}(_._delegate,f,Qi)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function sa(g,d){return Gs.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=rr,g})();function Il(g,d,f){let _=g;"function"!=typeof g&&({next:_,error:d,complete:f}=g);const b=_;return{next:V=>b(V&&kr.getOrCreate(V)),error:d,complete:f}}function oh(g,d){const f=function ih(g,d){const f=Na();if(!f)return[];const _=B(Of,g,d);switch(f.getItem(_)){case rr.NONE:return[Br];case rr.LOCAL:return[xu,Ys];case rr.SESSION:return[Ys];default:return[]}}(g,d);if(typeof self<"u"&&!f.includes(xu)&&f.push(xu),typeof window<"u")for(const _ of[zi,Ys])f.includes(_)||f.push(_);return f.includes(Br)||f.push(Br),f}class lg{constructor(){this.providerId="phone",this._delegate=new Jn(Lf(ee.Z.auth()))}static credential(d,f){return Jn.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}lg.PHONE_SIGN_IN_METHOD=Jn.PHONE_SIGN_IN_METHOD,lg.PROVIDER_ID=Jn.PROVIDER_ID;const cy=Q;class d0{constructor(d,f,_=ee.Z.app()){var b;cy(null===(b=_.options)||void 0===b?void 0:b.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Pu(d,f,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ly(g){g.INTERNAL.registerComponent(new he.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new wl(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:kn,FacebookAuthProvider:jr,GithubAuthProvider:fu,GoogleAuthProvider:Rc,OAuthProvider:di,SAMLAuthProvider:js,PhoneAuthProvider:lg,PhoneMultiFactorGenerator:ii,RecaptchaVerifier:d0,TwitterAuthProvider:kc,Auth:wl,AuthCredential:as,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.4.2")}(ee.Z)},5861:(It,Ne,L)=>{function I(O,ae,ie,ce,he,ve,Ee){try{var H=O[ve](Ee),j=H.value}catch(K){return void ie(K)}H.done?ae(j):Promise.resolve(j).then(ce,he)}function ee(O){return function(){var ae=this,ie=arguments;return new Promise(function(ce,he){var ve=O.apply(ae,ie);function Ee(j){I(ve,ce,he,Ee,H,"next",j)}function H(j){I(ve,ce,he,Ee,H,"throw",j)}Ee(void 0)})}}L.d(Ne,{Z:()=>ee})},7582:(It,Ne,L)=>{function ae(ue,me){var we={};for(var _e in ue)Object.prototype.hasOwnProperty.call(ue,_e)&&me.indexOf(_e)<0&&(we[_e]=ue[_e]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var De=0;for(_e=Object.getOwnPropertySymbols(ue);De<_e.length;De++)me.indexOf(_e[De])<0&&Object.prototype.propertyIsEnumerable.call(ue,_e[De])&&(we[_e[De]]=ue[_e[De]])}return we}function K(ue,me,we,_e){return new(we||(we=Promise))(function(He,Mt){function dt(Ot){try{ht(_e.next(Ot))}catch(qt){Mt(qt)}}function gt(Ot){try{ht(_e.throw(Ot))}catch(qt){Mt(qt)}}function ht(Ot){Ot.done?He(Ot.value):function De(He){return He instanceof we?He:new we(function(Mt){Mt(He)})}(Ot.value).then(dt,gt)}ht((_e=_e.apply(ue,me||[])).next())})}function Ae(ue){return this instanceof Ae?(this.v=ue,this):new Ae(ue)}function ge(ue,me,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,_e=we.apply(ue,me||[]),He=[];return De={},Mt("next"),Mt("throw"),Mt("return"),De[Symbol.asyncIterator]=function(){return this},De;function Mt(Kt){_e[Kt]&&(De[Kt]=function(En){return new Promise(function(Cr,Lr){He.push([Kt,En,Cr,Lr])>1||dt(Kt,En)})})}function dt(Kt,En){try{!function gt(Kt){Kt.value instanceof Ae?Promise.resolve(Kt.value.v).then(ht,Ot):qt(He[0][2],Kt)}(_e[Kt](En))}catch(Cr){qt(He[0][3],Cr)}}function ht(Kt){dt("next",Kt)}function Ot(Kt){dt("throw",Kt)}function qt(Kt,En){Kt(En),He.shift(),He.length&&dt(He[0][0],He[0][1])}}function Ze(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,me=ue[Symbol.asyncIterator];return me?me.call(ue):(ue=function Ke(ue){var me="function"==typeof Symbol&&Symbol.iterator,we=me&&ue[me],_e=0;if(we)return we.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&_e>=ue.length&&(ue=void 0),{value:ue&&ue[_e++],done:!ue}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),we={},_e("next"),_e("throw"),_e("return"),we[Symbol.asyncIterator]=function(){return this},we);function _e(He){we[He]=ue[He]&&function(Mt){return new Promise(function(dt,gt){!function De(He,Mt,dt,gt){Promise.resolve(gt).then(function(ht){He({value:ht,done:dt})},Mt)}(dt,gt,(Mt=ue[He](Mt)).done,Mt.value)})}}}L.d(Ne,{FC:()=>ge,KL:()=>Ze,_T:()=>ae,mG:()=>K,qq:()=>Ae})}},It=>{It(It.s=4220)}]);